"use strict";(self.webpackChunkjustlend_front=self.webpackChunkjustlend_front||[]).push([[321],{66369:(e,t,r)=>{r.r(t),r.d(t,{default:()=>me});var n=r(76998),s=r(96843),a=r(98859),i=r(87207),l=r.n(i),o=r(22172),d=r(81941),c=r(33270),h=r(93995),p=r(19523),g=r(13412),m=r(42780),u=r(40437),y=r(70102),_=r(99861),v=r(68111),x=r(75659),w=r(25356),j=r(23446);const{feedbackUrl:A}=x.Ay;class N extends n.Component{constructor(e){var t;super(e),this.state={lang:(null===(t=(0,c.Sp)())||void 0===t?void 0:t.lang)||window.localStorage.getItem("lang")||s.Ay.options.currentLocale}}render(){const{wideLayout:e}=this.props,{lang:t}=this.state;return(0,j.jsx)("div",{className:l()("energy-rental-page-header",{"wide-layout":e}),children:(0,j.jsxs)("div",{className:"energy-top flex jcsb",children:[(0,j.jsxs)("div",{children:[(0,j.jsxs)("div",{className:"page-title",children:[(0,j.jsx)("div",{className:"title-text green-line",children:s.Ay.get("energy_rental.page_header.title")}),(0,j.jsx)(v.N_,{to:"/energy?lang="+t,className:"classic-version-link",onClick:()=>{window.gtag("event","click",{event_category:"energyrent",event_label:"energyrent_pro_click_swicthtoOld"})},children:s.Ay.get("energy_rental.page_header.classic_btn")})]}),(0,j.jsxs)("div",{className:"j-announce",children:[(0,j.jsx)("span",{className:"announce-icon"}),(0,j.jsx)("a",{className:"announce-content",onClick:()=>{window.gtag("event","click",{event_category:"energyrent",event_label:"energyrent_pro_click_announce"})},href:(0,w.n3)(t),target:"announce",rel:"noreferrer",children:s.Ay.get("strx.stake_annoucement_2")}),(0,j.jsx)("span",{className:"announce-arrow-icon"})]})]}),(0,j.jsxs)("div",{className:"jl-feedback",children:[(0,j.jsxs)("div",{className:"feedback-link",children:[(0,j.jsx)("em",{className:"feedback-icon"}),(0,j.jsx)("a",{className:"jl-links",href:A,target:"feedback",children:s.Ay.get("liquidate.feedback")})]}),(0,j.jsxs)("div",{className:"feedback-title nowrap",children:[(0,j.jsx)("em",{className:"feedback-title-icon"}),s.Ay.get("application.des5")]})]})]})})}}const f=N;var b=r(59866),k=r(67441),C=r(26559),R=r(52297),S=r(63460),I=r(70705),V=r(37455);const T=r.p+"static/media/h-default.563e0b6fe6a92d6e1832.webm",O=r.p+"static/media/d-default.6ab35759681af56ee7c9.webm",E=r.p+"static/media/h-white-theme.fdcfb3e1c7506ce7b9a6.webm",L=r.p+"static/media/d-white-theme.4707fdcd8bf6edfa7d85.webm";const D=r.p+"static/media/d-default-poster.57568917876b6626a3fe1b61a4a99b08.svg";const M=r.p+"static/media/d-white-theme-poster.9484a16a9a42c683862221fb41df70e8.svg";const P=r.p+"static/media/h-default-poster.2a69e3c10a63567cf65c109f52619b0a.svg";const Z=r.p+"static/media/h-white-theme-poster.b03cdb6cb88f4036faf3ff36d96d0fec.svg";var H;let F=(0,a.WQ)("network")(H=(0,a.WQ)("lend")(H=(0,a.WQ)("system")(H=(0,a.WQ)("strx")(H=(0,a.WQ)("energyRental")(H=(0,a.PA)(H=class extends n.Component{constructor(e){var t,r;super(e),t=this,this.componentDidMount=async()=>{const{energyAmountValue:e,durationValueInSeconds:t}=this.state;this.props.energyRental.updateNewOrderInfo(e,t),this.initVideo(!this.state.durationIsDayUnitBoolean,!0)},this.componentDidUpdate=()=>{this.props.lend.theme!==this.state.innerTheme&&(this.initVideo(!this.state.durationIsDayUnitBoolean,!0),this.setState({innerTheme:this.props.lend.theme}))},this.initVideo=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.state.durationIsDayUnitBoolean,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{theme:n}=t.props.lend;let s=T;e||(s=O),"white"===n&&(s=E,e||(s=L)),t.setState({videoUrl:s},(()=>{r||t.switchRef.play().then((r=>{setTimeout((()=>{t.setState({playStatus:e?1:2})}),1500)})).catch((e=>{}))}))},this.resetFormInput=()=>{this.setState({energyAmountInputValue:"",energyAmountValue:x.TS.energyRental.newOrderDefaultEnergyValue,durationOptionIndex:1,durationInputValue:"",durationIsDayUnitBoolean:!0,durationValueInSeconds:this.rentTimeExcution(86400),isOtherAddressInputActive:!1,otherAddressInputValue:"",otherAddressVerifiedValue:"",energyAmountInputError:"",durationInputError:"",otherAddressInputError:"",showBalanceError:!1}),this.props.energyRental.updateNewOrderInfo(x.TS.energyRental.newOrderDefaultEnergyValue,this.rentTimeExcution(86400))},this.renderEnergyAmountInput=()=>{const{energyAmountInputValue:e,energyAmountValue:t,energyAmountInputError:r}=this.state,{isConnected:n}=this.props.network;let{maxRentableOfType:a,marketData:i,trxBalance:d}=this.props.energyRental;const{energyStakePerTrx:h}=i;d=(0,o.A)(d).div(x.TS.trxPrecision);const p=t&&t>0?(0,o.A)(t).idiv(x.TS.estimatedEnergyPerTx):0;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"field-title",children:[(0,j.jsx)("div",{className:"title-text",children:s.Ay.get("energy_rental.form.amount_field.title")}),(0,j.jsx)("div",{className:"available-amount-title",children:s.Ay.get("energy_rental.form.amount_field.available_trx_amount")}),(0,j.jsx)("div",{className:"available-amount-value",children:n&&(0,c.ZV)((0,o.A)(d),x.TS.trxDecimal)}),(0,j.jsx)("div",{className:"available-amount-suffix",children:n?"TRX":"--"})]}),(0,j.jsxs)(k.A.Group,{compact:!0,className:l()("energy-amount-input-group",{"j-error-input-group":r}),children:[(0,j.jsx)(k.A,{className:"j-input energy-amount-input",placeholder:(0,c.QA)(x.TS.energyRental.newOrderDefaultEnergyValue),allowClear:!0,addonBefore:(0,j.jsx)("span",{className:"energy-logo"}),value:(0,c.QA)(e),onChange:e=>this.onChangeEnergyAmountInput((0,c.DS)(e.target.value)),onFocus:()=>{this.setState({showBalanceError:!0})}}),r&&(0,j.jsxs)("div",{className:"j-error-tip",children:[(0,j.jsx)("span",{className:"j-error-img"}),(0,j.jsx)("div",{className:"j-safe-text",children:r})]})]}),(0,j.jsxs)("div",{className:"estimated-transaction-count-hint",children:[s.Ay.get("energy_rental.tilde")+" ",s.Ay.get(p>1?"energy_rental.form.amount_field.estimated_transaction_count_hint_plural":"energy_rental.form.amount_field.estimated_transaction_count_hint",{value:p})]})]})},this.onChangeEnergyAmountInput=function(e){let r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{durationValueInSeconds:n,energyAmountInputDecimal:s}=t.state;try{if(""===e)t.setState({energyAmountInputValue:""}),t.onChangeEnergyAmountInput(x.TS.energyRental.newOrderDefaultEnergyValue,!1);else if((0,o.A)(e).eq(0))t.setState({energyAmountInputValue:(0,c.CW)(e,s)}),t.props.energyRental.updateNewOrderInfo((0,o.A)(0),n),t.validateEnergyAmountInput(0);else{const{valid:a,str:i}=(0,c.PY)(""+e,s);a&&/^\d*$/.test(i)&&(r?t.setState({energyAmountInputValue:i,energyAmountValue:(0,o.A)(i)}):t.setState({energyAmountValue:(0,o.A)(i)}),t.props.energyRental.updateNewOrderInfo((0,o.A)(i),n),t.validateEnergyAmountInput(i))}}catch(a){console.log("error: onChangeEnergyAmountInput")}},this.validateEnergyAmountInput=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.state.energyAmountInputValue;const{maxRentableOfType:r,marketData:n}=t.props.energyRental,{energyStakePerTrx:a}=n,i=(0,o.A)(r).times(a)._toFixed(0,1),l=(0,o.A)(x.TS.energyRental.newOrderMinEnergyValue);e||(0,o.A)(e).eq(0)?(0,o.A)((0,o.A)(r).times(a)).lt(l)?t.setState({energyAmountInputError:s.Ay.get("energy_rental.form.amount_field.energy_no_balance")}):(0,o.A)(e).lt(l)?t.setState({energyAmountInputError:s.Ay.getHTML("energy_rental.form.amount_field.min_amount_error",{value:(0,c.ZV)(l)})}):(0,o.A)(e).gt(i)?t.setState({energyAmountInputError:s.Ay.getHTML("energy_rental.form.amount_field.max_amount_error",{value:(0,c.ZV)(i)})}):t.setState({energyAmountInputError:""}):t.setState({energyAmountInputError:""})},this.renderDurationInput=()=>{const{durationOptionIndex:e,durationInputError:t,durationInputValue:r,durationIsDayUnitBoolean:n,mobile:a}=this.state;let{trxBalance:i}=this.props.energyRental;i=(0,o.A)(i).div(x.TS.trxPrecision);const{theme:d}=this.props.lend,h="white"===d;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"field-title",children:(0,j.jsx)("div",{className:"title-text",children:s.Ay.get("energy_rental.form.duration_field.title")})}),(0,j.jsxs)("div",{className:"duration-input-row",children:[(0,j.jsx)("div",{className:l()("duration-option",{selected:0==e}),onClick:()=>{this.setState({showBalanceError:!0}),this.onClickDurationOption(0),window.gtag("event","energyrent_pro_renttime_clickchange",{event_category:"energyrent",event_label:"3_hour"})},children:s.Ay.get("energy_rental.form.duration_field.three_hour")}),(0,j.jsx)("div",{className:l()("duration-option",{selected:1==e}),onClick:()=>{this.setState({showBalanceError:!0}),this.onClickDurationOption(1),window.gtag("event","energyrent_pro_renttime_clickchange",{event_category:"energyrent",event_label:"1_day"})},children:s.Ay.get("energy_rental.form.duration_field.one_day")}),(0,j.jsx)("div",{className:l()("duration-option",{selected:2==e}),onClick:()=>{this.setState({showBalanceError:!0}),this.onClickDurationOption(2),window.gtag("event","energyrent_pro_renttime_clickchange",{event_category:"energyrent",event_label:"3_days"})},children:s.Ay.get("energy_rental.form.duration_field.three_day")}),(0,j.jsx)(k.A.Group,{compact:!0,className:l()("duration-input-group",{"j-error-input-group":t},{"j-have-val-input-group":r}),children:(0,j.jsx)(k.A,{className:"j-input duration-input",placeholder:s.Ay.get("energy_rental.form.duration_field.other_options"),value:(0,c.QA)(r),onChange:e=>{this.onChangeDurationInput((0,c.DS)(e.target.value)),window.gtag("event","energyrent_pro_renttime_clickchange",{event_category:"energyrent",event_label:"coustom"})},onFocus:()=>{this.setState({showBalanceError:!0})},addonAfter:(0,j.jsx)(C.A,{placement:"bottom",overlayClassName:"j-tooltip-dropdown rental-switch-time",title:!0===n?s.Ay.get("s9.switch_hour"):s.Ay.get("s9.switch_day"),children:(0,j.jsxs)("div",{className:"switch-unit-button",onClick:()=>{this.setState({showBalanceError:!0,playStatus:0}),this.onClickDurationInputUnitSwitch(!n),window.gtag("event","energyrent_pro_cutomtime_clickunit",{event_category:"energyrent",event_label:n?"day":"hour"})},children:[!0===n?s.Ay.get("energy_rental.form.duration_field.day_unit"):s.Ay.get("energy_rental.form.duration_field.hour_unit"),a?(0,j.jsx)("img",{alt:"time-switch-icon",src:n?h?M:D:h?Z:P}):(0,j.jsxs)("video",{id:"banner-video",muted:!0,playsInline:!0,ref:e=>{this.switchRef=e},children:[(0,j.jsx)("source",{src:this.state.videoUrl,type:"video/webm"}),"Your browser does not support the video tag."]},this.state.videoUrl)]})}),ref:e=>{this.durationInputRef=e}})}),t&&(0,j.jsxs)("div",{className:"j-error-tip",children:[(0,j.jsx)("span",{className:"j-error-img"}),(0,j.jsx)("div",{className:"j-safe-text",children:t})]})]}),(!0===n&&(0,o.A)(r).gte(.1)&&(0,o.A)(r).lt(1)||!0!==n&&(0,o.A)(r).gte(1)&&(0,o.A)(r).lt(22)||0==e)&&(0,j.jsxs)("div",{className:"pretty-short-warning start",children:[(0,j.jsxs)("svg",{width:"12",height:"13",viewBox:"0 0 12 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,j.jsx)("circle",{cx:"6",cy:"6.5",r:"5.5",stroke:"#F58721"}),(0,j.jsx)("path",{fill:"#F58721",d:"M6.76368 8.95452C6.76368 9.25577 6.51947 9.49998 6.21823 9.49998H6.00004C5.6988 9.49998 5.45459 9.25577 5.45459 8.95452C5.45459 8.65328 5.6988 8.40907 6.00004 8.40907H6.21823C6.51947 8.40907 6.76368 8.65328 6.76368 8.95452ZM6.10914 7.59089C5.74764 7.59089 5.45459 7.29784 5.45459 6.93634V4.42725C5.45459 4.06575 5.74764 3.77271 6.10914 3.77271C6.47063 3.77271 6.76368 4.06576 6.76368 4.42725V6.93634C6.76368 7.29784 6.47063 7.59089 6.10914 7.59089Z"})]}),(0,j.jsxs)("div",{className:"ml-5",children:[(0,j.jsx)("span",{children:s.Ay.get("s9.pretty_short_pre")}),(0,j.jsx)(C.A,{placement:"bottom",overlayClassName:"j-tooltip-dropdown pretty-short-tip",title:s.Ay.get("s9.pretty_short_hover"),children:(0,j.jsx)("span",{className:"dashed",children:s.Ay.get("s9.pretty_short_dashed")})}),(0,j.jsx)("span",{children:s.Ay.get("s9.pretty_short_suf")})]})]})]})},this.onClickDurationOption=e=>{const{energyAmountValue:t}=this.state;var r=0;0==e?r=10800:1==e?r=86400:2==e&&(r=259200),r=this.rentTimeExcution(r),this.setState({durationOptionIndex:e,durationInputValue:"",durationValueInSeconds:r,durationInputError:""}),this.props.energyRental.updateNewOrderInfo(t,r)},this.rentTimeExcution=e=>{let t=.1*e;return e+(t>7200?7200:t)},this.onChangeDurationInput=e=>{const{durationIsDayUnitBoolean:t,durationInputDecimal:r,energyAmountValue:n}=this.state;try{if(""===e||(0,o.A)(e).eq(0))this.setState({durationOptionIndex:3,durationInputValue:(0,c.CW)(e,r),durationValueInSeconds:0}),this.props.energyRental.updateNewOrderInfo(n,0),t?this.setState({durationInputError:s.Ay.get("energy_rental.form.duration_field.day_unit_min_amount_error")}):this.setState({durationInputError:s.Ay.get("energy_rental.form.duration_field.hour_unit_min_amount_error")});else{const{valid:a,str:i}=(0,c.PY)(e,r);if(a&&/^\d*(.|.[0-9]){0,1}$/.test(i)){let e=t?24*(0,o.A)(i)*60*60:60*(0,o.A)(i)*60;e=this.rentTimeExcution(e),this.setState({durationOptionIndex:3,durationInputValue:i,durationValueInSeconds:e}),this.props.energyRental.updateNewOrderInfo(n,e),t?(0,o.A)(i).lt(.1)?this.setState({durationInputError:s.Ay.get("energy_rental.form.duration_field.day_unit_min_amount_error")}):(0,o.A)(i).gt(30)?this.setState({durationInputError:s.Ay.get("energy_rental.form.duration_field.day_unit_max_amount_error")}):this.setState({durationInputError:""}):(0,o.A)(i).lt(1)?this.setState({durationInputError:s.Ay.get("energy_rental.form.duration_field.hour_unit_min_amount_error")}):(0,o.A)(i).gt(720)?this.setState({durationInputError:s.Ay.get("energy_rental.form.duration_field.hour_unit_max_amount_error")}):this.setState({durationInputError:""})}}}catch(a){console.log("error: onChangeDurationInput")}},this.onClickDurationInputUnitSwitch=e=>{const{energyAmountValue:t,durationIsDayUnitBoolean:r,mobile:n}=this.state;n||this.initVideo(e),this.setState({durationIsDayUnitBoolean:e,durationInputValue:"",durationValueInSeconds:0,durationInputError:"",durationOptionIndex:3}),this.props.energyRental.updateNewOrderInfo(t,0),this.durationInputRef.focus()},this.renderOtherAddressInput=()=>{const{isConnected:e}=this.props.network,{isOtherAddressInputActive:t,otherAddressInputValue:r,otherAddressInputError:n}=this.state;return(0,j.jsxs)(j.Fragment,{children:[e?(0,j.jsx)("div",{className:l()("field-title","other-address-field-title",{"is-active":t}),children:(0,j.jsx)("div",{className:"title-text",onClick:()=>{t?this.setState({isOtherAddressInputActive:!1,otherAddressInputValue:"",otherAddressInputError:"",otherAddressVerifiedValue:""}):this.setState({isOtherAddressInputActive:!0}),window.gtag("event","click",{event_category:"energyrent",event_label:"energyrent_pro_rentforothers_clickBtn"})},children:s.Ay.get("energy_rental.form.others_address_field.title")})}):(0,j.jsx)(C.A,{title:()=>(0,j.jsx)("div",{className:"connect-wallet-hint",children:s.Ay.get("energy_rental.form.others_address_field.connect_wallet_first_msg")}),placement:"bottomRight",overlayClassName:"j-tooltip-dropdown energy-rental-tooltip",children:(0,j.jsx)("div",{className:l()("field-title","other-address-field-title","not-connected"),children:(0,j.jsx)("div",{className:"title-text",children:s.Ay.get("energy_rental.form.others_address_field.title")})})}),t&&(0,j.jsxs)(k.A.Group,{compact:!0,className:l()("other-address-input-group",{"j-error-input-group":n}),children:[(0,j.jsx)(k.A,{className:"j-input other-address-input",placeholder:s.Ay.get("energy_rental.form.others_address_field.placeholder"),value:r,onChange:e=>this.onChangeOtherAddressInput(e.target.value),onClick:()=>{window.gtag("event","click",{event_category:"energyrent",event_label:"energyrent_pro_rentforothers_clickEnter"})},onFocus:()=>{this.setState({showBalanceError:!0})},allowClear:!0,addonAfter:(0,j.jsx)(j.Fragment,{})}),n&&(0,j.jsxs)("div",{className:"j-error-tip",children:[(0,j.jsx)("span",{className:"j-error-img"}),(0,j.jsx)("div",{className:"j-safe-text",children:n})]})]}),(0,j.jsx)("div",{className:"other-address-input-placeholder"})]})},this.onChangeOtherAddressInput=async e=>{this.setState({otherAddressInputValue:e,otherAddressVerifiedValue:"",otherAddressInputError:""});try{const t=await(0,c.sU)(e);console.log(t),t&&Object.keys(t).length>0?"Contract"===(null===t||void 0===t?void 0:t.type)?this.setState({otherAddressInputError:s.Ay.get("energy_rental.form.others_address_field.contract_address_error")}):this.setState({otherAddressInputValue:e,otherAddressVerifiedValue:e,otherAddressInputError:""}):this.setState({otherAddressInputError:s.Ay.get("energy_rental.form.others_address_field.inactive_error")})}catch(t){console.log("error: onChangeOtherAddressInput"),console.log(t),window.gtag("event","energyrent_pro_rentforothers_errortips",{event_category:"energyrent",event_label:"energyrent_pro_rentforothers_errortips"}),this.setState({otherAddressInputError:s.Ay.get("energy_rental.form.others_address_field.invalid_address")})}},this.renderPrepaidInfoBox=(e,t)=>{const{lang:r,mobile:n}=this.state;return(0,j.jsxs)("div",{className:"prepaid-info-box",children:[(0,j.jsxs)("div",{className:"info-row emphazied",children:[(0,j.jsx)("div",{className:"row-title",children:s.Ay.get("energy_rental.form.prepayment_info.prepayment_title")}),(0,j.jsx)("div",{className:"row-value",children:(0,c.ZV)(e,2,{miniText:.01})}),(0,j.jsx)("div",{className:"row-suffix",children:"TRX"})]}),(0,j.jsxs)("div",{className:"info-row",children:[(0,j.jsx)("div",{className:"row-title",children:n?(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(R.L,{onMouseEnter:()=>{window.gtag("event","energyrent_pro_payment_hoverRefund",{event_category:"energyrent",event_label:"energyrent_pro_payment_hoverRefund"})},title:()=>(0,j.jsxs)("div",{children:[s.Ay.get("energy_rental.form.prepayment_info.security_deposit_hint"),(0,j.jsx)("span",{className:"four-pixel-placeholder"}),(0,j.jsx)("a",{href:(0,w.Wz)(r),target:"_blank",rel:"noreferrer",onClick:()=>{window.gtag("event","energyrent_pro_payment_hover_clickdetail",{event_category:"energyrent",event_label:"energyrent_pro_payment_hover_clickdetail"})},className:"purple-link-btn hover",children:s.Ay.get("energy_rental.form.prepayment_info.rules_detail")})]}),placement:"topLeft",overlayClassName:"j-tooltip-dropdown energy-rental-tooltip",children:[(0,j.jsx)("div",{className:"title-part",children:s.Ay.get("energy_rental.form.prepayment_info.security_deposit_title_mobile_part_one")}),(0,j.jsx)("div",{className:"title-part",children:s.Ay.get("energy_rental.form.prepayment_info.security_deposit_title_mobile_part_two")})]})}):(0,j.jsxs)(j.Fragment,{children:[s.Ay.get("energy_rental.form.prepayment_info.security_deposit_title"),(0,j.jsx)(C.A,{onMouseEnter:()=>{window.gtag("event","energyrent_pro_payment_hoverRefund",{event_category:"energyrent",event_label:"energyrent_pro_payment_hoverRefund"})},title:()=>(0,j.jsxs)("div",{children:[s.Ay.get("energy_rental.form.prepayment_info.security_deposit_hint"),(0,j.jsx)("span",{className:"four-pixel-placeholder"}),(0,j.jsx)("a",{href:(0,w.Wz)(r),target:"_blank",rel:"noreferrer",onClick:()=>{window.gtag("event","energyrent_pro_payment_hover_clickdetail",{event_category:"energyrent",event_label:"energyrent_pro_payment_hover_clickdetail"})},className:"purple-link-btn hover",children:s.Ay.get("energy_rental.form.prepayment_info.rules_detail")})]}),placement:"topLeft",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown energy-rental-tooltip refund-amount-tooltip",children:(0,j.jsx)("div",{className:"j-tooltip-icon"})})]})}),(0,j.jsx)("div",{className:"row-value",children:(0,c.ZV)(t,2,{miniText:.01})}),(0,j.jsx)("div",{className:"row-suffix",children:"TRX"})]})]})},this.confirmAddOrder=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.props.energyRental.newOrderPrepayment;if(0===t.props.network.isRightChain)return void t.props.network.changeChain();const{otherAddressVerifiedValue:r,showBalanceError:n}=t.state;let{trxBalance:s,newOrderSafeValue:a}=t.props.energyRental;s=(0,o.A)(s).div(x.TS.trxPrecision);const i=(0,o.A)(e).gt(s),l=(0,o.A)(e).plus(a).gt(s);if(n||!i&&!l){if(!i){if(t.props.system.clearRejectError(),t.props.energyRental.rentPaused)return t.props.energyRental.setData({rentPausedVisible:!0});const e=r||window.defaultAccount;t.setState({isCheckingIfOrderExist:!0});const n=await t.props.energyRental.getRenterReceiverRentBalance(e);(0,o.A)(n).gt(0)?(t.props.energyRental.setData({addOrderModalVisible:!0,isAddOrderModalApprovingTrans:!1,addOrderModalIsRenew:!0,addOrderModalStep:1,renewOrderShouldUseSavedInfo:!1,renewOrderExistingRemainingSeconds:"--"}),t.props.energyRental.getExistingRentalOrderInfo(e),t.resetFormInput()):(0,o.A)(n).eq(0)&&t.props.energyRental.setData({addOrderModalVisible:!0,isAddOrderModalApprovingTrans:!1,addOrderModalIsRenew:!1,addOrderModalStep:3,submittedNewOrderReceiver:e,submittedNewOrderEnergyAmount:t.props.energyRental.newOrderEnergyAmount,submittedNewOrderTrxAmount:t.props.energyRental.newOrderTrxAmount,submittedNewOrderDuration:t.props.energyRental.newOrderDuration,submittedNewOrderPrepayment:t.props.energyRental.newOrderPrepayment}),t.setState({isCheckingIfOrderExist:!1})}}else t.setState({showBalanceError:!0})},this.state={lang:(null===(r=(0,c.Sp)())||void 0===r?void 0:r.lang)||window.localStorage.getItem("lang")||s.Ay.options.currentLocale,mobile:(0,b.A)(window.navigator).any,energyAmountInputValue:"",energyAmountInputDecimal:0,energyAmountValue:x.TS.energyRental.newOrderDefaultEnergyValue,durationOptionIndex:1,durationInputValue:"",durationInputDecimal:1,durationIsDayUnitBoolean:!0,durationValueInSeconds:this.rentTimeExcution(86400),isOtherAddressInputActive:!1,otherAddressInputValue:"",otherAddressVerifiedValue:"",energyAmountInputError:"",durationInputError:"",otherAddressInputError:"",showBalanceError:!1,playStatus:0,videoUrl:O,innerTheme:this.props.lend.theme},this.durationInputRef=null,this.switchRef=null}render(){const{showSectionHeader:e,currentRentalPrice:t,isUtilizationAboveKink:r}=this.props,{showBalanceError:n,energyAmountValue:a,durationValueInSeconds:i,energyAmountInputError:l,durationInputError:d,otherAddressInputError:h,isOtherAddressInputActive:p,otherAddressVerifiedValue:g,isCheckingIfOrderExist:m}=this.state,{isConnected:u}=this.props.network;let{trxBalance:y,newOrderEnergyAmount:_,newOrderDuration:v,newOrderPrepayment:A,newOrderSecurityDeposit:N,newOrderTrxSavedVsBurning:f,newOrderTrxSavedVsStaking:b,newOrderSafeValue:k}=this.props.energyRental;y=(0,o.A)(y).div(x.TS.trxPrecision);const C=l||d||h,R=(0,o.A)(a).eq((0,o.A)(_))&&(0,o.A)(i).eq((0,o.A)(v)),V=!(0,o.A)(a).isNaN()&&(0,o.A)(a).gt(0)&&!(0,o.A)(i).isNaN()&&(0,o.A)(i).gt(0),T=(0,o.A)(A).gt(y),O=r,E=n&&!C&&(0,o.A)(A).plus(k).gt(y);!C&&(0,w.as)(i);return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:"rental-form section-content-container",children:[e&&(0,j.jsx)("div",{className:"section-header",children:(0,j.jsx)("div",{className:"title",children:s.Ay.get("energy_rental.form.add_order_title")})}),(0,j.jsxs)("div",{className:"form-content",children:[this.renderEnergyAmountInput(),this.renderDurationInput(),this.renderOtherAddressInput(),this.renderPrepaidInfoBox(A,N),(0,j.jsxs)("div",{className:"rent-action-button-container",children:[O&&(0,j.jsx)("div",{className:"high-rental-price-hint",children:s.Ay.get("energy_rental.form.hints.hign_rental_price",{value:(0,c.ZV)(t,0,{miniText:"0.001"})})}),E&&(0,j.jsx)("div",{className:"safe-max-hint",children:s.Ay.get("energy_rental.form.hints.safe_max_hints",{value:(0,c.ZV)(k,2)})}),u?T&&n?(0,j.jsx)("button",{className:"j-large-btn j-supply rent-action-button",disabled:!0,children:s.Ay.get("energy_rental.form.action_btn.insufficient_trx")}):(0,j.jsx)("button",{className:"j-large-btn j-supply rent-action-button",disabled:this.props.network.isRightChain&&(!R||!V||(0,o.A)(A).isNaN()||m||C||p&&""===g),onClick:()=>{this.confirmAddOrder(A),this.props.energyRental.isNeedShowDealTip()&&this.props.energyRental.setData({dealNoteShow:!0}),window.gtag("event","energyrent_pro_click_rentNow",{event_category:"energyrent",event_label:p?"otherAddr":"currentAddr"})},children:!this.props.network.isRightChain||R&&!m&&!(0,o.A)(A).isNaN()||C||p&&""===g?s.Ay.get("energy_rental.form.action_btn.rent"):(0,j.jsx)("span",{className:"siging-icon"})}):(0,j.jsx)("button",{className:"j-large-btn j-supply rent-action-button",onClick:()=>this.props.network.connectWalletV2(),children:s.Ay.get("energy_rental.form.action_btn.connect_wallet")})]}),(0,j.jsx)("div",{className:"trx-saved-hint",children:(0,j.jsx)("div",{className:"hint-content",children:s.Ay.getHTML("energy_rental.form.hints.trx_saved",{savedValue:(0,c.ZV)(f,2,{showNegative:!0,miniText:"0.01"}),stakingValue:(0,c.ZV)(b,2,{miniText:"0.01"})})})})]}),this.props.energyRental.addOrderModalVisible&&(0,j.jsx)(S.A,{newOrderSubmittedCallback:this.resetFormInput}),this.props.energyRental.endOrderModalVisible&&(0,j.jsx)(I.A,{successCallback:()=>{}})]})})}})||H)||H)||H)||H)||H)||H;const B=F;var W,U=r(86653),Q=r(60888);r(51465);const X=(0,a.WQ)("energyRental")(W=(0,a.WQ)("network")(W=(0,a.WQ)("system")(W=(0,a.PA)(W=class extends n.Component{constructor(e){var t;super(e),this.componentDidMount=()=>{this.handleScroll(),this.orderListRef.addEventListener("scroll",this.handleScroll)},this.handleScroll=()=>{this.setState({orderListAtBottom:this.orderListRef.scrollHeight-340-this.orderListRef.scrollTop<15})},this.onClickOrderListSelectOption=e=>{this.setState({orderListByExpirationTime:e,mobileListDisplay:!1}),this.props.energyRental.getMiniOrderList(e?0:1)},this.onClickEndButton=async e=>{0!==this.props.network.isRightChain?(this.props.energyRental.setData({endOrderModalVisible:!0,endOrderModalInfo:e}),this.props.system.clearRejectError()):this.props.network.changeChain()},this.onClickRenewButton=async e=>{if(0!==this.props.network.isRightChain){if(this.props.energyRental.rentPaused)return this.props.energyRental.setData({rentPausedVisible:!0});this.props.energyRental.setData({addOrderModalVisible:!0,isAddOrderModalApprovingTrans:!1,addOrderModalIsRenew:!0,renewOrderShouldUseSavedInfo:!1,addOrderModalStep:2,renewOrderExistingRemainingSeconds:e.canRentSeconds}),this.props.energyRental.getExistingRentalOrderInfo(e.receiver,e.canRentSeconds>0?1e5:0,0,e.canRentSeconds>0)}else this.props.network.changeChain()},this.othersForMeList=()=>{const{orderListByExpirationTime:e,durationUnitSwitch:t,lang:r,mobile:n,othersOrderListAtBottom:a,mobileListDisplay:i}=this.state,{miniReceiverTotal:l,miniReceiverOrdersList:d}=this.props.energyRental,{defaultAccount:h}=this.props.network;return null===d||void 0===d?void 0:d.map(((e,r)=>{let a=(0,U.HO)(d[r].renter),i=(0,U.HO)(d[r].receiver);const l=(0,U.HO)(this.props.energyRental.returnRentInfo);let p=e.receiver===h?(0,o.A)(l.unrecoveredEnergyAmount).plus(1e4):l.unrecoveredEnergyAmount,g=(0,o.A)(l.dailyRent).times((0,o.A)(p).div(l.rentAmount)).times(.5),m=(0,o.A)(l.rentRemain).plus(l.securityDeposit);g=(0,o.A)(g).gt(m)?m:g;let u=e.canRentSeconds<300,y=e.canRentSeconds>=300&&e.canRentSeconds<2400,_=e.canRentSeconds>=2400&&e.canRentSeconds<86400;return(0,j.jsxs)("div",{className:"order-item",children:[(0,j.jsxs)("div",{className:"order-header",children:[s.Ay.get("s7.from")," ",(0,c.it)(e.renter,6,6)]}),(0,j.jsxs)("div",{className:"order-detail",children:[(0,j.jsxs)("div",{className:"detail-row energy-row",children:[(0,j.jsxs)("div",{className:"field",children:[(0,j.jsx)(C.A,{title:()=>s.Ay.getHTML("energy_rental.mini_list.energy_amount_hint",{value:(0,c.ZV)((0,o.A)(e.delegateTrxAmount)._toFixed(0,0),0)}),placement:"topLeft",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown energy-rental-tooltip",onMouseEnter:()=>{window.gtag("event","energyrent_pro_orderlist_hoverenergy",{event_category:"energyrent",event_label:"energyrent_pro_orderlist_hoverenergy"})},children:(0,j.jsx)("div",{className:"j-tooltip-icon"})}),(0,j.jsx)(R.L,{title:()=>s.Ay.getHTML("energy_rental.mini_list.energy_amount_hint",{value:(0,c.ZV)((0,o.A)(e.delegateTrxAmount)._toFixed(0,0),0)}),placement:"topLeft",overlayClassName:"j-tooltip-dropdown energy-rental-tooltip",onMouseEnter:()=>{window.gtag("event","energyrent_pro_orderlist_hoverenergy",{event_category:"energyrent",event_label:"energyrent_pro_orderlist_hoverenergy"})},children:s.Ay.get("energy_rental.mini_list.energy_amount_title")})]}),(0,j.jsxs)("div",{className:"value",children:[(0,j.jsx)("span",{children:(0,c.ZV)((0,o.A)(e.energyAmount),0)}),(0,j.jsx)("div",{className:"energy-icon"})]})]}),(0,j.jsxs)("div",{className:u?"warning-box":"",children:[(0,j.jsxs)("div",{className:"tip-box "+(y?"alert":_?"warning":""),children:[(0,j.jsxs)("div",{className:"detail-row time-row",children:[(0,j.jsxs)("div",{className:"field",children:[(0,j.jsx)(C.A,{title:()=>s.Ay.getHTML("energy_rental.mini_list.rental_time_hint"),placement:"topLeft",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown energy-rental-tooltip",onMouseEnter:()=>{window.gtag("event","energyrent_pro_orderlist_hovertime",{event_category:"energyrent",event_label:"energyrent_pro_orderlist_hovertime"})},children:(0,j.jsx)("div",{className:"j-tooltip-icon"})}),(0,j.jsx)(R.L,{title:()=>s.Ay.getHTML("energy_rental.mini_list.rental_time_hint"),placement:"topLeft",overlayClassName:"j-tooltip-dropdown energy-rental-tooltip",onMouseEnter:()=>{window.gtag("event","energyrent_pro_orderlist_hovertime",{event_category:"energyrent",event_label:"energyrent_pro_orderlist_hovertime"})},children:t?s.Ay.get("energy_rental.mini_list.rental_time_title_remaining"):s.Ay.get("energy_rental.mini_list.rental_time_title_expiration")})]}),(0,j.jsxs)("div",{className:"inline-flex",children:[(0,j.jsx)(C.A,{placement:"bottomRight",arrowPointAtCenter:!0,overlayInnerStyle:{padding:u?12:0},onMouseEnter:()=>{this.props.energyRental.getReturnRentInfo(a,i),window.gtag("event","energyrent_pro_orderlist_hoverRemainTRX",{event_category:"energyrent",event_label:"energyrent_pro_orderlist_hoverRemainTRX"})},overlayClassName:"j-tooltip-dropdown j-tooltip-dropdown-receiver",title:u?s.Ay.get("s7.tips3"):(0,j.jsxs)("div",{className:"rent-info-tooltip",children:[(0,j.jsxs)("div",{className:"detail-row",children:[(0,j.jsx)("div",{className:"row-title2",children:s.Ay.get("energy_rental.end_order_modal.remaining_trx")}),(0,j.jsxs)("div",{className:"row-value2",children:[(0,c.ZV)((0,o.A)(l.rentRemain).plus(l.securityDeposit).minus(g),6)," ","TRX"]})]}),(0,j.jsx)("div",{className:"divider-line"}),(0,j.jsxs)("div",{className:"detail-row",children:[(0,j.jsx)("div",{className:"row-title",children:s.Ay.get("energy_rental.end_order_modal.remaining_rent")}),(0,j.jsxs)("div",{className:"row-value",children:[(0,c.ZV)(l.rentRemain,6)," TRX"]})]}),(0,j.jsxs)("div",{className:"detail-row",children:[(0,j.jsx)("div",{className:"row-title",children:s.Ay.get("energy_rental.end_order_modal.security_deposit")}),(0,j.jsxs)("div",{className:"row-value",children:[(0,c.ZV)(l.securityDeposit,6)," TRX"]})]}),(0,j.jsxs)("div",{className:"detail-row",style:{alignItems:"flex-start"},children:[(0,j.jsxs)("div",{className:"row-title",children:[(0,j.jsx)("div",{style:{textAlign:"start"},children:s.Ay.get("energy_rental.end_order_modal.deducted_unrecovered_energy_hint")}),(0,j.jsx)("div",{style:{textAlign:"start"},children:s.Ay.get("energy_rental.end_order_modal.deducted_unrecovered_energy_detail",{value:(0,c.ZV)(p,0)})})]}),(0,j.jsxs)("div",{className:"row-value",children:["- ",(0,c.ZV)(g,6)," TRX"]})]})]}),children:(0,j.jsxs)("div",{className:"value value-dash inline-flex"+(u||y?" red":_?" yellow":""),children:[(0,j.jsx)("span",{className:u?"":"mr-15",children:u?s.Ay.get("s7.to_be_liquidated"):t?(0,w.fj)(e.canRentSeconds):(0,w.Sm)(e.canRentSeconds)}),!u&&(n?(0,j.jsx)("div",{className:"switch-icon",onClick:()=>{this.setState({durationUnitSwitch:!t}),window.gtag("event","energyrent_pro_orderlist_clicktime",{event_category:"energyrent",event_label:"energyrent_pro_orderlist_clicktime"})}}):(0,j.jsx)(C.A,{title:()=>s.Ay.getHTML("energy_rental.mini_list.rental_time_display_switch_hint"),placement:"topRight",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown energy-rental-tooltip",children:(0,j.jsx)("div",{className:"switch-icon",onClick:()=>{this.setState({durationUnitSwitch:!t}),window.gtag("event","energyrent_pro_orderlist_clicktime",{event_category:"energyrent",event_label:"energyrent_pro_orderlist_clicktime"})}})}))]})}),u&&(0,j.jsx)(C.A,{placement:"bottomRight",arrowPointAtCenter:!0,overlayInnerStyle:{width:300},overlayClassName:"j-tooltip-dropdown",title:(0,j.jsxs)("div",{className:"rent-info-tooltip",children:[(0,j.jsxs)("div",{className:"detail-row",children:[(0,j.jsx)("div",{className:"row-title2",children:s.Ay.get("energy_rental.end_order_modal.remaining_trx")}),(0,j.jsxs)("div",{className:"row-value2",children:[(0,c.ZV)((0,o.A)(l.rentRemain).plus(l.securityDeposit).minus(g),6)," ","TRX"]})]}),(0,j.jsx)("div",{className:"divider-line"}),(0,j.jsxs)("div",{className:"detail-row",children:[(0,j.jsx)("div",{className:"row-title",children:s.Ay.get("energy_rental.end_order_modal.remaining_rent")}),(0,j.jsxs)("div",{className:"row-value",children:[(0,c.ZV)(l.rentRemain,6)," TRX"]})]}),(0,j.jsxs)("div",{className:"detail-row",children:[(0,j.jsx)("div",{className:"row-title",children:s.Ay.get("energy_rental.end_order_modal.security_deposit")}),(0,j.jsxs)("div",{className:"row-value",children:[(0,c.ZV)(l.securityDeposit,6)," TRX"]})]}),(0,j.jsxs)("div",{className:"detail-row",style:{alignItems:"flex-start"},children:[(0,j.jsxs)("div",{className:"row-title",children:[(0,j.jsx)("div",{style:{textAlign:"start"},children:s.Ay.get("energy_rental.end_order_modal.deducted_unrecovered_energy_hint")}),(0,j.jsx)("div",{style:{textAlign:"start"},children:s.Ay.get("energy_rental.end_order_modal.deducted_unrecovered_energy_detail",{value:(0,c.ZV)(p,0)})})]}),(0,j.jsxs)("div",{className:"row-value",children:["- ",(0,c.ZV)(g,6)," TRX"]})]})]}),trigger:["hover","click"],children:(0,j.jsx)("span",{className:"j-tooltip-icon ml-4"})})]})]}),(y||_)&&(0,j.jsx)("div",{className:"detail-row",children:(0,j.jsxs)("div",{className:"warning-box "+(_?"none":""),children:[y?(0,j.jsxs)("svg",{width:"12",height:"11",viewBox:"0 0 12 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,j.jsx)("path",{fill:"#FF5266",fillRule:"evenodd",clipRule:"evenodd",d:"M7.53593 0.95513L11.7597 8.27099C12.4424 9.45335 11.5891 10.9313 10.2238 10.9313H1.77619C0.410912 10.9313 -0.44238 9.45335 0.240255 8.27099L4.46407 0.95513C5.14671 -0.227232 6.8533 -0.227229 7.53593 0.95513ZM6.76797 1.39852C6.42665 0.807335 5.57335 0.807335 5.23203 1.39851L1.00822 8.71437C0.666903 9.30555 1.09355 10.0445 1.77619 10.0445H10.2238C10.9064 10.0445 11.3331 9.30555 10.9918 8.71437L6.76797 1.39852Z"}),(0,j.jsx)("path",{fill:"#FF5266",d:"M6.5 8.02381C6.5 8.2868 6.2868 8.5 6.02381 8.5H5.97619C5.7132 8.5 5.5 8.2868 5.5 8.02381C5.5 7.76082 5.7132 7.54762 5.97619 7.54762H6.02381C6.2868 7.54762 6.5 7.76082 6.5 8.02381ZM6 6.83333C5.72386 6.83333 5.5 6.60948 5.5 6.33333V4C5.5 3.72386 5.72386 3.5 6 3.5C6.27614 3.5 6.5 3.72386 6.5 4V6.33333C6.5 6.60948 6.27614 6.83333 6 6.83333Z"})]}):(0,j.jsxs)("svg",{width:"12",height:"13",viewBox:"0 0 12 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,j.jsx)("circle",{cx:"6",cy:"6.5",r:"5.5",stroke:"#F58721"}),(0,j.jsx)("path",{fill:"#F58721",d:"M6.76365 8.95452C6.76365 9.25577 6.51944 9.49998 6.2182 9.49998H6.00001C5.69877 9.49998 5.45456 9.25577 5.45456 8.95452C5.45456 8.65328 5.69877 8.40907 6.00001 8.40907H6.2182C6.51944 8.40907 6.76365 8.65328 6.76365 8.95452ZM6.10911 7.59089C5.74761 7.59089 5.45456 7.29784 5.45456 6.93634V4.42725C5.45456 4.06575 5.74761 3.77271 6.10911 3.77271C6.4706 3.77271 6.76365 4.06576 6.76365 4.42725V6.93634C6.76365 7.29784 6.4706 7.59089 6.10911 7.59089Z"})]}),(0,j.jsx)("span",{className:y?"red-tip":"yellow-tip",children:y?s.Ay.get("s9.duration_lt_40m_for_list"):s.Ay.get("s9.duration_lt_24h_for_list")})]})})]}),u&&(0,j.jsxs)("div",{className:"tobe-liquidated-warning flex-center",children:[(0,j.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,j.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.53593 1.45537L11.7597 8.77123C12.4424 9.95359 11.5891 11.4315 10.2238 11.4315H1.77619C0.410912 11.4315 -0.44238 9.95359 0.240255 8.77123L4.46407 1.45537C5.14671 0.273012 6.8533 0.273015 7.53593 1.45537ZM6.76797 1.89876C6.42665 1.30758 5.57335 1.30758 5.23203 1.89876L1.00822 9.21462C0.666903 9.8058 1.09355 10.5448 1.77619 10.5448H10.2238C10.9064 10.5448 11.3331 9.8058 10.9918 9.21462L6.76797 1.89876Z",fill:"#FF5266"}),(0,j.jsx)("path",{d:"M6.5 8.52381C6.5 8.7868 6.2868 9 6.02381 9H5.97619C5.7132 9 5.5 8.7868 5.5 8.52381C5.5 8.26082 5.7132 8.04762 5.97619 8.04762H6.02381C6.2868 8.04762 6.5 8.26082 6.5 8.52381ZM6 7.33333C5.72386 7.33333 5.5 7.10948 5.5 6.83333V4.5C5.5 4.22386 5.72386 4 6 4C6.27614 4 6.5 4.22386 6.5 4.5V6.83333C6.5 7.10948 6.27614 7.33333 6 7.33333Z",fill:"#FF5266"})]}),(0,j.jsx)("span",{className:"red",children:s.Ay.get("s7.tips3")})]})]})]}),(0,j.jsxs)("div",{className:"action-btns",children:[(0,j.jsx)("button",{className:"action-btn end-btn",onClick:()=>{this.setState({order:e}),this.props.energyRental.setData({endRentalTipShow:!0,endOrderType:"receiver"}),window.gtag("event","click",{event_category:"energyrent",event_label:"energyrent_pro_orderlist_clickEnd"})},children:s.Ay.get("energy_rental.mini_list.end_btn")}),(0,j.jsx)(C.A,{placement:n?"bottomRight":"bottom",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown j-tooltip-dropdown-receiver",title:s.Ay.get("s7.tips2"),children:(0,j.jsx)("div",{className:"action-btn",children:(0,j.jsx)("button",{className:"j-btn j-rent-renew",disabled:!0,children:s.Ay.get("energy_rental.mini_list.renew_btn")})})})]})]},r)}))},this.state={lang:(null===(t=(0,c.Sp)())||void 0===t?void 0:t.lang)||window.localStorage.getItem("lang")||s.Ay.options.currentLocale,mobile:(0,b.A)(window.navigator).any,orderListByExpirationTime:!0,durationUnitSwitch:!0,orderListAtBottom:!1,mobileListDisplay:!0,order:{},othersOrderListAtBottom:!1},this.orderListRef=null}componentWillUnmount(){this.orderListRef.removeEventListener("scroll",this.handleScroll)}render(){const{orderListByExpirationTime:e,durationUnitSwitch:t,lang:r,mobile:n,orderListAtBottom:a,mobileListDisplay:i}=this.state,{orderListTotalCount:d,miniOrderList:h,miniReceiverTotal:p}=this.props.energyRental,{defaultAccount:g}=this.props.network;let m=d;isNaN(d)?m=p:!isNaN(d)&&isNaN(p)?m=d:isNaN(d)&&isNaN(p)?m=0:!isNaN(d)&&isNaN(p)&&(m=d+p);const u=m>1;return(0,j.jsxs)("div",{className:"rental-order-mini-list section-content-container",children:[(0,j.jsxs)("div",{className:"list-wrapper",children:[(0,j.jsx)("div",{className:"list-header",children:(0,j.jsxs)("div",{className:"list-header-title",children:[(0,j.jsxs)("div",{className:"title-cotent",children:[s.Ay.get(d+p>1?"energy_rental.mini_list.list_title_plural":"energy_rental.mini_list.list_title"),d+p>1&&(0,j.jsx)("div",{className:"order-count-rect",children:d+p})]}),d>1&&(0,j.jsxs)("div",{className:"list-order-select",onTouchStart:()=>this.setState({mobileListDisplay:!0}),onMouseEnter:()=>this.setState({mobileListDisplay:!0}),children:[e?s.Ay.get("energy_rental.mini_list.order_by_expiration_time"):s.Ay.get("energy_rental.mini_list.order_by_rental_start"),(0,j.jsxs)("div",{className:"list-content "+(i?"":"hide"),children:[(0,j.jsx)("div",{className:l()("order-option",{active:e}),onClick:()=>{this.onClickOrderListSelectOption(!0),window.gtag("event","click",{event_category:"energyrent",event_label:"energyrent_pro_orderlist_clickchangeSort"})},children:s.Ay.get("energy_rental.mini_list.order_by_expiration_time")}),(0,j.jsx)("div",{className:l()("order-option",{active:!e}),onClick:()=>{this.onClickOrderListSelectOption(!1),window.gtag("event","click",{event_category:"energyrent",event_label:"energyrent_pro_orderlist_clickchangeSort"})},children:s.Ay.get("energy_rental.mini_list.order_by_rental_start")})]})]})]})}),(0,j.jsx)("div",{children:(0,j.jsxs)("div",{className:"order-list",ref:e=>{this.orderListRef=e},children:[h.map(((e,r)=>{let a=(0,U.HO)(h[r].renter),i=(0,U.HO)(h[r].receiver);const l=(0,U.HO)(this.props.energyRental.returnRentInfo);let d=e.receiver===g?(0,o.A)(l.unrecoveredEnergyAmount).plus(1e4):l.unrecoveredEnergyAmount,p=(0,o.A)(l.dailyRent).times((0,o.A)(d).div(l.rentAmount)).times(.5),m=(0,o.A)(l.rentRemain).plus(l.securityDeposit);p=(0,o.A)(p).gt(m)?m:p;let u=e.canRentSeconds<300,y=e.canRentSeconds>=300&&e.canRentSeconds<2400,_=e.canRentSeconds>=2400&&e.canRentSeconds<86400;return(0,j.jsxs)("div",{className:"order-item renter",children:[(0,j.jsxs)("div",{className:"order-header",children:[s.Ay.get("energy_rental.mini_list.order_title",{value:(0,c.it)(e.receiver,6,6)}),e.receiver==g?(0,j.jsx)("div",{className:"rent-for-self-tips",children:s.Ay.get("energy_rental.mini_list.self_address_tips")}):(0,j.jsx)("div",{className:"rent-for-others-tips",children:s.Ay.get("energy_rental.mini_list.other_address_tips")})]}),(0,j.jsxs)("div",{className:"order-detail",children:[(0,j.jsxs)("div",{className:"detail-row energy-row",children:[(0,j.jsxs)("div",{className:"field",children:[(0,j.jsx)(C.A,{title:()=>s.Ay.getHTML("energy_rental.mini_list.energy_amount_hint",{value:(0,c.ZV)((0,o.A)(e.delegateTrxAmount)._toFixed(0,0),0)}),placement:"topLeft",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown energy-rental-tooltip",onMouseEnter:()=>{window.gtag("event","energyrent_pro_orderlist_hoverenergy",{event_category:"energyrent",event_label:"energyrent_pro_orderlist_hoverenergy"})},children:(0,j.jsx)("div",{className:"j-tooltip-icon"})}),(0,j.jsx)(R.L,{title:()=>s.Ay.getHTML("energy_rental.mini_list.energy_amount_hint",{value:(0,c.ZV)((0,o.A)(e.delegateTrxAmount)._toFixed(0,0),0)}),placement:"topLeft",overlayClassName:"j-tooltip-dropdown energy-rental-tooltip",onMouseEnter:()=>{window.gtag("event","energyrent_pro_orderlist_hoverenergy",{event_category:"energyrent",event_label:"energyrent_pro_orderlist_hoverenergy"})},children:s.Ay.get("energy_rental.mini_list.energy_amount_title")})]}),(0,j.jsxs)("div",{className:"value",children:[(0,j.jsx)("span",{children:(0,c.ZV)((0,o.A)(e.energyAmount),0)}),(0,j.jsx)("div",{className:"energy-icon"})]})]}),(0,j.jsxs)("div",{className:u?"warning-box":"",children:[(0,j.jsxs)("div",{className:"tip-box "+(y?"alert":_?"warning":""),children:[(0,j.jsxs)("div",{className:"detail-row time-row",children:[(0,j.jsxs)("div",{className:"field",children:[(0,j.jsx)(C.A,{title:()=>s.Ay.getHTML("energy_rental.mini_list.rental_time_hint"),placement:"topLeft",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown energy-rental-tooltip",onMouseEnter:()=>{window.gtag("event","energyrent_pro_orderlist_hovertime",{event_category:"energyrent",event_label:"energyrent_pro_orderlist_hovertime"})},children:(0,j.jsx)("div",{className:"j-tooltip-icon"})}),(0,j.jsx)(R.L,{title:()=>s.Ay.getHTML("energy_rental.mini_list.rental_time_hint"),placement:"topLeft",overlayClassName:"j-tooltip-dropdown energy-rental-tooltip",onMouseEnter:()=>{window.gtag("event","energyrent_pro_orderlist_hovertime",{event_category:"energyrent",event_label:"energyrent_pro_orderlist_hovertime"})},children:t?s.Ay.get("energy_rental.mini_list.rental_time_title_remaining"):s.Ay.get("energy_rental.mini_list.rental_time_title_expiration")})]}),(0,j.jsxs)("div",{className:"flex-center",children:[u?(0,j.jsx)("div",{children:(0,j.jsx)("div",{className:"value value-dash red",children:s.Ay.get("s7.to_be_liquidated")})}):(0,j.jsx)(C.A,{placement:"bottomRight",arrowPointAtCenter:!0,overlayInnerStyle:{padding:0},onMouseEnter:()=>{this.props.energyRental.getReturnRentInfo(a,i),window.gtag("event","energyrent_pro_orderlist_hoverRemainTRX",{event_category:"energyrent",event_label:"energyrent_pro_orderlist_hoverRemainTRX"})},overlayClassName:"j-tooltip-dropdown j-tooltip-dropdown-receiver",title:(0,j.jsxs)("div",{className:"rent-info-tooltip",children:[(0,j.jsxs)("div",{className:"detail-row",children:[(0,j.jsx)("div",{className:"row-title2",children:s.Ay.get("energy_rental.end_order_modal.remaining_trx")}),(0,j.jsxs)("div",{className:"row-value2",children:[(0,c.ZV)((0,o.A)(l.rentRemain).plus(l.securityDeposit).minus(p),6)," ","TRX"]})]}),(0,j.jsx)("div",{className:"divider-line"}),(0,j.jsxs)("div",{className:"detail-row",children:[(0,j.jsx)("div",{className:"row-title",children:s.Ay.get("energy_rental.end_order_modal.remaining_rent")}),(0,j.jsxs)("div",{className:"row-value",children:[(0,c.ZV)(l.rentRemain,6)," TRX"]})]}),(0,j.jsxs)("div",{className:"detail-row",children:[(0,j.jsx)("div",{className:"row-title",children:s.Ay.get("energy_rental.end_order_modal.security_deposit")}),(0,j.jsxs)("div",{className:"row-value",children:[(0,c.ZV)(l.securityDeposit,6)," TRX"]})]}),(0,j.jsxs)("div",{className:"detail-row",style:{alignItems:"flex-start"},children:[(0,j.jsxs)("div",{className:"row-title",children:[(0,j.jsx)("div",{style:{textAlign:"start"},children:s.Ay.get("energy_rental.end_order_modal.deducted_unrecovered_energy_hint")}),(0,j.jsx)("div",{style:{textAlign:"start"},children:s.Ay.get("energy_rental.end_order_modal.deducted_unrecovered_energy_detail",{value:(0,c.ZV)(d,0)})})]}),(0,j.jsxs)("div",{className:"row-value",children:["- ",(0,c.ZV)(p,6)," TRX"]})]})]}),children:(0,j.jsxs)("div",{className:"flex-center",children:[(0,j.jsx)("span",{className:"value value-dash"+(y?" red":_?" yellow":""),children:t?(0,w.fj)(e.canRentSeconds):(0,w.Sm)(e.canRentSeconds)}),n?(0,j.jsx)("div",{className:"switch-icon",onClick:()=>{this.setState({durationUnitSwitch:!t}),window.gtag("event","energyrent_pro_orderlist_clicktime",{event_category:"energyrent",event_label:"energyrent_pro_orderlist_clicktime"})}}):(0,j.jsx)(C.A,{title:()=>s.Ay.getHTML("energy_rental.mini_list.rental_time_display_switch_hint"),placement:"topRight",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown energy-rental-tooltip",children:(0,j.jsx)("div",{className:"switch-icon",onClick:()=>{this.setState({durationUnitSwitch:!t}),window.gtag("event","energyrent_pro_orderlist_clicktime",{event_category:"energyrent",event_label:"energyrent_pro_orderlist_clicktime"})}})})]})}),u&&(0,j.jsx)(C.A,{placement:"bottomRight",arrowPointAtCenter:!0,overlayInnerStyle:{width:300},overlayClassName:"j-tooltip-dropdown",title:(0,j.jsxs)("div",{className:"rent-info-tooltip",children:[(0,j.jsxs)("div",{className:"detail-row",children:[(0,j.jsx)("div",{className:"row-title2",children:s.Ay.get("energy_rental.end_order_modal.remaining_trx")}),(0,j.jsxs)("div",{className:"row-value2",children:[(0,c.ZV)((0,o.A)(l.rentRemain).plus(l.securityDeposit).minus(p),6)," ","TRX"]})]}),(0,j.jsx)("div",{className:"divider-line"}),(0,j.jsxs)("div",{className:"detail-row",children:[(0,j.jsx)("div",{className:"row-title",children:s.Ay.get("energy_rental.end_order_modal.remaining_rent")}),(0,j.jsxs)("div",{className:"row-value",children:[(0,c.ZV)(l.rentRemain,6)," TRX"]})]}),(0,j.jsxs)("div",{className:"detail-row",children:[(0,j.jsx)("div",{className:"row-title",children:s.Ay.get("energy_rental.end_order_modal.security_deposit")}),(0,j.jsxs)("div",{className:"row-value",children:[(0,c.ZV)(l.securityDeposit,6)," TRX"]})]}),(0,j.jsxs)("div",{className:"detail-row",style:{alignItems:"flex-start"},children:[(0,j.jsxs)("div",{className:"row-title",children:[(0,j.jsx)("div",{style:{textAlign:"start"},children:s.Ay.get("energy_rental.end_order_modal.deducted_unrecovered_energy_hint")}),(0,j.jsx)("div",{style:{textAlign:"start"},children:s.Ay.get("energy_rental.end_order_modal.deducted_unrecovered_energy_detail",{value:(0,c.ZV)(d,0)})})]}),(0,j.jsxs)("div",{className:"row-value",children:["- ",(0,c.ZV)(p,6)," TRX"]})]})]}),trigger:["hover","click"],children:(0,j.jsx)("span",{className:"j-tooltip-icon ml-4"})})]})]}),(y||_)&&(0,j.jsx)("div",{className:"detail-row",children:(0,j.jsxs)("div",{className:"warning-box "+(_?"none":""),children:[y?(0,j.jsxs)("svg",{width:"12",height:"11",viewBox:"0 0 12 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,j.jsx)("path",{fill:"#FF5266",fillRule:"evenodd",clipRule:"evenodd",d:"M7.53593 0.95513L11.7597 8.27099C12.4424 9.45335 11.5891 10.9313 10.2238 10.9313H1.77619C0.410912 10.9313 -0.44238 9.45335 0.240255 8.27099L4.46407 0.95513C5.14671 -0.227232 6.8533 -0.227229 7.53593 0.95513ZM6.76797 1.39852C6.42665 0.807335 5.57335 0.807335 5.23203 1.39851L1.00822 8.71437C0.666903 9.30555 1.09355 10.0445 1.77619 10.0445H10.2238C10.9064 10.0445 11.3331 9.30555 10.9918 8.71437L6.76797 1.39852Z"}),(0,j.jsx)("path",{fill:"#FF5266",d:"M6.5 8.02381C6.5 8.2868 6.2868 8.5 6.02381 8.5H5.97619C5.7132 8.5 5.5 8.2868 5.5 8.02381C5.5 7.76082 5.7132 7.54762 5.97619 7.54762H6.02381C6.2868 7.54762 6.5 7.76082 6.5 8.02381ZM6 6.83333C5.72386 6.83333 5.5 6.60948 5.5 6.33333V4C5.5 3.72386 5.72386 3.5 6 3.5C6.27614 3.5 6.5 3.72386 6.5 4V6.33333C6.5 6.60948 6.27614 6.83333 6 6.83333Z"})]}):(0,j.jsxs)("svg",{width:"12",height:"13",viewBox:"0 0 12 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,j.jsx)("circle",{cx:"6",cy:"6.5",r:"5.5",stroke:"#F58721"}),(0,j.jsx)("path",{fill:"#F58721",d:"M6.76365 8.95452C6.76365 9.25577 6.51944 9.49998 6.2182 9.49998H6.00001C5.69877 9.49998 5.45456 9.25577 5.45456 8.95452C5.45456 8.65328 5.69877 8.40907 6.00001 8.40907H6.2182C6.51944 8.40907 6.76365 8.65328 6.76365 8.95452ZM6.10911 7.59089C5.74761 7.59089 5.45456 7.29784 5.45456 6.93634V4.42725C5.45456 4.06575 5.74761 3.77271 6.10911 3.77271C6.4706 3.77271 6.76365 4.06576 6.76365 4.42725V6.93634C6.76365 7.29784 6.4706 7.59089 6.10911 7.59089Z"})]}),(0,j.jsx)("span",{className:y?"red-tip":"yellow-tip",children:y?s.Ay.get("s9.duration_lt_40m_for_list"):s.Ay.get("s9.duration_lt_24h_for_list")})]})})]}),u&&(0,j.jsxs)("div",{className:"tobe-liquidated-warning flex-center",children:[(0,j.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,j.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.53593 1.45537L11.7597 8.77123C12.4424 9.95359 11.5891 11.4315 10.2238 11.4315H1.77619C0.410912 11.4315 -0.44238 9.95359 0.240255 8.77123L4.46407 1.45537C5.14671 0.273012 6.8533 0.273015 7.53593 1.45537ZM6.76797 1.89876C6.42665 1.30758 5.57335 1.30758 5.23203 1.89876L1.00822 9.21462C0.666903 9.8058 1.09355 10.5448 1.77619 10.5448H10.2238C10.9064 10.5448 11.3331 9.8058 10.9918 9.21462L6.76797 1.89876Z",fill:"#FF5266"}),(0,j.jsx)("path",{d:"M6.5 8.52381C6.5 8.7868 6.2868 9 6.02381 9H5.97619C5.7132 9 5.5 8.7868 5.5 8.52381C5.5 8.26082 5.7132 8.04762 5.97619 8.04762H6.02381C6.2868 8.04762 6.5 8.26082 6.5 8.52381ZM6 7.33333C5.72386 7.33333 5.5 7.10948 5.5 6.83333V4.5C5.5 4.22386 5.72386 4 6 4C6.27614 4 6.5 4.22386 6.5 4.5V6.83333C6.5 7.10948 6.27614 7.33333 6 7.33333Z",fill:"#FF5266"})]}),(0,j.jsx)("span",{className:"red",children:s.Ay.get("s7.tips3")})]})]})]}),(0,j.jsxs)("div",{className:"action-btns",children:[(0,j.jsx)("button",{className:"action-btn end-btn",onClick:()=>{this.onClickEndButton(e),window.gtag("event","click",{event_category:"energyrent",event_label:"energyrent_pro_orderlist_clickEnd"})},children:s.Ay.get("energy_rental.mini_list.end_btn")}),(0,j.jsx)("button",{className:"action-btn add-btn",onClick:()=>{this.onClickRenewButton(e),window.gtag("event","click",{event_category:"energyrent",event_label:"energyrent_pro_orderlist_clickRenew"})},children:s.Ay.get("energy_rental.mini_list.renew_btn")})]})]},r)})),p>0&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"order-list-subtitle",children:[(0,j.jsx)("span",{children:s.Ay.get("s7.others_for_me")}),(0,j.jsx)("div",{className:"olt-line"})]}),this.othersForMeList()]})]})})]}),(0,j.jsx)("div",{className:"blur-filter-on-list"+(d+p<=2?" transparent":"")}),u&&(0,j.jsx)(v.N_,{className:"order-list-link purple-link-btn hover",to:"/energyRentalOrderList?lang="+r,onClick:()=>{window.gtag("event","click",{event_category:"energyrent",event_label:"energyrent_pro_orderlist_clickAllorders"})},children:s.Ay.get("energy_rental.mini_list.order_list_btn")}),(0,j.jsx)(Q.A,{endRentalInfo:this.state.order,endRetalFn:()=>this.onClickEndButton(this.state.order)})]})}})||W)||W)||W)||W;const q=r.p+"static/media/subsidy.fe0db464693556ce4ae329c527ce8776.svg";const z=r.p+"static/media/subsidy-white-theme.866215845652759aede8727c550e2c19.svg";var Y;let $=(0,a.WQ)("network")(Y=(0,a.WQ)("lend")(Y=(0,a.WQ)("energyRental")(Y=(0,a.PA)(Y=class extends n.Component{constructor(e){var t;super(e),this.getAnnouncementUrl=()=>{const{lang:e}=this.state;return e&&e.includes("en")?"https://support.justlend.org/hc/en-us/articles/19326031593497":"https://support.justlend.org/hc/zh-cn/articles/19326031593497"},this.state={lang:(null===(t=(0,c.Sp)())||void 0===t?void 0:t.lang)||window.localStorage.getItem("lang")||s.Ay.options.currentLocale}}render(){const{isConnected:e}=this.props.network,{theme:t}=this.props.lend,{totalReward:r,multiRewardData:n,userData:{rewardMap:{gainNew:a,gainLast:i,miningStatus:l,currPhase:o,currRewardStatus:d}}}=this.props.energyRental,h="white"===t,p=e&&((0,c.gH)(a).gt(0)||Object.keys(n).length>0||(0,c.gH)(i).gt(0)&&"2"==l),g=e&&((0,c.gH)(a).gt(0)||(0,c.gH)(i).gt(0)&&"2"==l),m="1"==d&&"2"==l,u=(0,c.ZV)(a,6,{miniText:"0.000001"}),y=(0,c.ZV)(i,6,{miniText:"0.000001"}),_=(0,c.gH)(a).gt(0)?(0,c.ZV)((0,c.gH)(a).plus(r),6,{miniText:"0.000001"}):(0,c.ZV)((0,c.gH)(r),6,{miniText:"0.000001"}),v=(0,c.gH)(i).gt(0)?(0,c.ZV)((0,c.gH)(i).plus(r),6,{miniText:"0.000001"}):(0,c.ZV)((0,c.gH)(r),6,{miniText:"0.000001"});return(0,j.jsxs)("div",{className:"energy-subsidy-bar section-content-container unclaim"+(p?" ":" hidden")+("2"==d?" status":""),children:[(0,j.jsxs)("div",{className:"flexA",children:[(0,j.jsx)("img",{alt:"",src:h?z:q,className:"notify"}),(0,j.jsx)("div",{className:"value",children:"--"===r||"--"===a&&"--"===i?"--":(0,c.gH)(r).gt(0)?g?(0,j.jsx)(C.A,{title:s.Ay.get("strx.part_processing",{value:m?y:u}),placement:"top",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown",children:s.Ay.get("strx.tobe_claimed",{value:m?v:_})}):s.Ay.get("strx.tobe_claimed",{value:m?v:_}):g?s.Ay.get("strx.all_processing",{value:m?v:_}):0})]}),(0,j.jsx)("div",{className:"bottom",children:Object.keys(n).length>0?(0,j.jsx)("div",{className:"claim-btn purple-link-btn hover",onClick:()=>{this.props.network.setData({allowanceVisible:!0})},children:s.Ay.get("strx.claime")}):(0,j.jsx)(C.A,{overlayClassName:"j-tooltip-dropdown",placement:"top",arrowPointAtCenter:!0,title:s.Ay.getHTML("v2.rewards.processing",{value:Number(o)-1}),trigger:"['hover','click']",children:(0,j.jsx)("div",{className:"claim-btn disabled",children:s.Ay.get("strx.claime")})})})]})}})||Y)||Y)||Y)||Y;const G=$;var J;const K=(0,a.WQ)("energyRental")(J=(0,a.PA)(J=class extends n.Component{constructor(e){var t;super(e),this.state={lang:(null===(t=(0,c.Sp)())||void 0===t?void 0:t.lang)||window.localStorage.getItem("lang")||s.Ay.options.currentLocale}}render(){const{lang:e}=this.state,{newOrderSecurityDeposit:t}=this.props.energyRental;return(0,j.jsxs)("div",{className:"rental-tips section-content-container",children:[(0,j.jsx)("div",{className:"tips-bg"}),(0,j.jsxs)("div",{className:"section-header",children:[(0,j.jsx)("div",{className:"title",children:s.Ay.get("energy_rental.tips.title")}),(0,j.jsx)("a",{href:(0,w.iW)(e),target:"_blank",rel:"noreferrer",className:"purple-link-btn hover",onClick:()=>{window.gtag("event","click",{event_category:"energyrent",event_label:"energyrent_pro_tips_clickUserguide"})},children:s.Ay.get("energy_rental.tips.rental_guide_btn")}),(0,j.jsx)("div",{className:"section-divider"})]}),(0,j.jsxs)("div",{className:"tips-container",children:[(0,j.jsx)("div",{className:"tips-item",children:(0,j.jsx)("span",{className:"tips-content",children:s.Ay.get("energy_rental.tips.tips_1",{value:(0,c.ZV)(t,2)})})}),(0,j.jsx)("div",{className:"tips-item",children:(0,j.jsx)("span",{className:"tips-content",children:s.Ay.get("energy_rental.tips.tips_2")})}),(0,j.jsxs)("div",{className:"tips-item",children:[(0,j.jsx)("span",{className:"tips-content with-link",children:s.Ay.get("energy_rental.tips.tips_3")}),(0,j.jsx)("a",{href:(0,w.pQ)(e),target:"_blank",rel:"noreferrer",className:"purple-link-btn hover",onClick:()=>{window.gtag("event","click",{event_category:"energyrent",event_label:"energyrent_pro_tips_clickGasdetails"})},children:s.Ay.get("energy_rental.tips.learn_more_btn")})]}),(0,j.jsx)("div",{className:"tips-item",children:(0,j.jsx)("span",{className:"tips-content",children:s.Ay.get("energy_rental.tips.tips_4")})})]})]})}})||J)||J;var ee,te=r(37895),re=r(81055);let ne=(0,a.WQ)("lend")(ee=(0,a.PA)(ee=class extends n.Component{constructor(e){super(e),this.onChartHightLight=e=>{const{dataList:t}=this.props,r=e.batch.reduce(((e,t)=>(e[t.seriesIndex]=t,e)),{}),n=t[r[0].dataIndex];this.setState({hasTouchedChart:!0,curParams:[{axisValue:n.date,value:n.depositedAPY,dataIndex:r[0].dataIndex},{axisValue:n.date,value:n.depositedUSD,dataIndex:r[0].dataIndex}]})},this.initRef=e=>{this.echartRef=e},this.onChartReady=()=>{setTimeout(this.showTooltipForCurrentData,800)},this.showTooltipForCurrentData=()=>{var e,t;const{mobile:r}=this.state,n=null===(e=this.echartRef)||void 0===e?void 0:e.getEchartsInstance();null!==(t=this.props.dataList)&&void 0!==t&&t.length?n&&n.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:this.props.dataList.findIndex((e=>e.current))||0,position:r?[40,10]:[80,10]}):setTimeout(this.showTooltipForCurrentData,800)},this.hideTooltip=()=>{var e;const t=null===(e=this.echartRef)||void 0===e?void 0:e.getEchartsInstance();t&&t.dispatchAction({type:"hideTip"})},this.onChartMouseover=()=>{!this.state.isHovering&&this.setState({isHovering:!0}),this.setState({labelStatus:!1})},this.onChartMouseout=()=>{this.setState({isHovering:!1,labelStatus:!0}),setTimeout((()=>{this.showTooltipForCurrentData()}),400)},this.state={mobile:(0,c.Fr)().any,curParams:{trx1wEnergyShow:"--",totalApyShow:"--",supplyApyShow:"--",occupancyRateShow:"--",voteApyShow:"--",dataIndex:0},hasTouchedChart:!1,isHovering:!1,labelStatus:!0},this.echartRef=null}componentDidUpdate(e){this.hideTooltip(),setTimeout((()=>{this.showTooltipForCurrentData()}))}getEchartsOption(){const{voteApy:e=0,totalApy:t}=this.props,{theme:r}=this.props.lend,{mobile:n,labelStatus:a}=this.state,i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;const n=e.find((e=>e.current));t=n?(0,o.A)((0,o.A)(r).toFixed(4,1)).minus(+(0,o.A)(n.supply).toFixed(4,1)):(0,o.A)(t);const s=(0,re.mY)(100*t,2,{miniText:"0.01"})+"%";return e.map((e=>{const r=(0,re.mY)(100*e.supply,2,{miniText:"0.01"})+"%",n=t.plus((0,o.A)(e.supply).toFixed(4,1)).times(100),a=(0,re.mY)(n,2,{miniText:"0.01"})+"%",i=(0,re.mY)(100*e.base,2,{round:!0})+"%";return{...e,totalApy:n.valueOf(),value:n.valueOf(),trx1wEnergyShow:(0,re.mY)(100*e.trx1wEnergy,0,{miniText:"0.001"}),voteApyShow:s,supplyApyShow:r,totalApyShow:a,occupancyRateShow:i}}))}(this.props.dataList,e,t),l=function(e){let{theme:t,dataList:r,isMobile:n,labelStatus:a}=e;const i=r.map((e=>100*e.base)),l=(r.map((e=>e.totalApy)),r.map((e=>100*e.trx1wEnergy))),o="white"===t,d=i.map(((e,t)=>[e,l[t]]));return{background:"transparent",color:[{type:"linear",x:1,y:0,x2:0,y2:0,colorStops:[{offset:0,color:"#1BDCB5"},{offset:1,color:"#5FD2EB"}],global:!1},{type:"linear",x:0,y:1,x2:0,y2:0,colorStops:[{offset:0,color:"rgba(29, 192, 163, 0)"},{offset:1,color:"rgba(134, 255, 231, 0.3)"}],global:!1}],grid:{top:32,left:n?0:23,right:9,bottom:0,containLabel:!0},tooltip:{trigger:"axis",showContent:!0,extraCssText:"z-index: 9999928492384982394892348928492384293489238492384923849899",position:n?["10%","20%"]:function(e,t,r,n,s){return[e[0]-100,"0%"]},axisPointer:{type:"line",animation:!1,lineStyle:{color:o?"rgb(34, 35, 43, 0.4)":"rgba(255, 255, 255, 0.4)",type:"dashed",width:.5},label:{precision:2}},backgroundColor:o?"#ffffff":"#353745",borderWidth:"0",padding:0,textStyle:{color:"rgba(255,255,255,0.6)",fontFamily:"PingFang SC",fontSize:"14px"},formatter:function(e){const t=r[e[0].dataIndex];return`<div class="chart-tooltip">\n            <div class="stat">\n              <span class="stat-title">${s.Ay.get("energy_rental.market_data.chart_tooltip_price")}</span>\n              <span class="stat-value green-color">${t.trx1wEnergyShow} sun/${s.Ay.get("strx.energy_day2")}</span>\n            </div>\n            <div class="stat">\n              <span class="stat-title">${s.Ay.get("energy_rental.market_data.chart_tooltip_utilization")}</span>\n              <span class="stat-value">${t.occupancyRateShow}</span>\n            </div>\n          </div>`}},xAxis:{type:"value",data:i,boundaryGap:!1,axisLine:{show:!1},axisLabel:{show:!0,color:"transparent",margin:0,fontSize:10,align:"center"},axisPointer:{value:r.findIndex((e=>e.current))||0,handle:{show:a,color:"transparent"}},axisTick:{show:!1},splitLine:{show:!1},name:"",nameLocation:"start",nameGap:0,nameTextStyle:{color:o?"rgba(34,35,43,0.6)":"rgba(255,255,255,0.6)",fontSize:12,lineHeight:16,verticalAlign:"top",fontWeight:400,padding:n?[13,12,0,0]:[12,16,0,0]}},yAxis:{type:"value",name:"",axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}},series:[{data:d,type:"line",areaStyle:{color:"transparent"},lineStyle:{width:3},itemStyle:{normal:{opacity:0,lineStyle:{width:3}},emphasis:{opacity:1,shadowOffsetX:2,shadowOffsetY:2,color:"#18C19F",borderColor:"#ffffff",borderWidth:3,shadowBlur:2,shadowColor:"rgba(0, 0, 0, 0.1)"}},symbolSize:6},{data:d,type:"line",lineStyle:{color:"transparent"},areaStyle:{},itemStyle:{show:!1,normal:{opacity:0},emphasis:{opacity:0}}}]}}({theme:r,dataList:i,isMobile:n,labelStatus:a});return l}render(){return(0,j.jsx)("div",{className:"chart",onMouseOut:this.onChartMouseout,onMouseOver:this.onChartMouseover,children:(0,j.jsx)(te.A,{option:this.getEchartsOption(),ref:this.initRef,style:{height:194},className:"",onChartReady:this.onChartReady})})}})||ee)||ee;var se;const ae=(0,a.WQ)("network")(se=(0,a.WQ)("lend")(se=(0,a.WQ)("system")(se=(0,a.WQ)("pool")(se=(0,a.WQ)("energyRental")(se=(0,a.PA)(se=class extends n.Component{constructor(e){var t;super(e),this.state={lang:(null===(t=(0,c.Sp)())||void 0===t?void 0:t.lang)||window.localStorage.getItem("lang")||s.Ay.options.currentLocale}}render(){const{lang:e}=this.state,{data:t,utilizationRate:r}=this.props,{maxRentableOfType:n}=this.props.energyRental,a=(0,o.A)(1e5).idiv(x.TS.estimatedEnergyPerTx);return(0,j.jsxs)("div",{className:"rental-market-data section-content-container visible",children:[(0,j.jsxs)("div",{className:"price-and-chart",children:[(0,j.jsxs)("div",{className:"price-info",children:[(0,j.jsx)("div",{className:"title",children:s.Ay.get("energy_rental.market_data.current_energy_price")}),(0,j.jsxs)("div",{className:"price",children:[(0,j.jsx)("span",{className:"value",children:(0,c.ZV)(100*t.trx1wEnergy,0,{miniText:"0.001"})}),(0,j.jsxs)("span",{className:"suffix",children:["sun/",s.Ay.get("strx.energy_day2")]})]}),(0,j.jsx)("div",{className:"price-hint",children:s.Ay.get("energy_rental.market_data.energy_price_hint",{trxValue:(0,c.ZV)((0,o.A)(t.trx1wEnergy).times(10),3,{miniText:"0.001"}),stakingValue:(0,c.ZV)((0,o.A)((0,o.A)(1e5).div(t.energyStakePerTrx))._toFixed(0,0),0,{miniText:"0.1"})})}),(0,j.jsxs)("div",{className:"estimated-transaction-count-hint",children:[s.Ay.get("energy_rental.tilde")+" ",s.Ay.get(a>1?"energy_rental.form.amount_field.estimated_transaction_count_hint_plural":"energy_rental.form.amount_field.estimated_transaction_count_hint",{value:a})]}),(0,j.jsx)("a",{href:(0,w.SS)(e),target:"_blank",rel:"noreferrer",className:"purple-link-btn hover",onClick:()=>{window.gtag("event","click",{event_category:"energyrent",event_label:"energyrent_pro_marketData_clickrent"})},children:s.Ay.get("energy_rental.market_data.about_rental_price_btn")})]}),(0,j.jsx)("div",{className:"chart-wrap",children:(0,j.jsx)(ne,{dataList:t.model,voteApy:t.voteApy,totalApy:t.totalApy})})]}),(0,j.jsxs)("div",{className:"market-stat",children:[(0,j.jsxs)("div",{className:"stat",children:[(0,j.jsx)("span",{className:"grey-dot"}),(0,j.jsx)("div",{className:"stat-title",children:s.Ay.get("energy_rental.market_data.available_energy_title")}),(0,j.jsx)("div",{className:"stat-value",children:(0,c.ZV)((0,o.A)(t.energyStakePerTrx).times(n),0)})]}),(0,j.jsxs)("div",{className:"stat",children:[(0,j.jsx)("span",{className:"grey-dot"}),(0,j.jsx)("div",{className:"stat-title",children:s.Ay.get("energy_rental.market_data.utilization_title")}),(0,j.jsx)("div",{className:"stat-value",children:t.model?(0,c.ZV)(r,2,{round:!0})+"%":"--"})]}),(0,j.jsxs)("div",{className:"stat",children:[(0,j.jsx)("span",{className:"grey-dot"}),(0,j.jsx)("div",{className:"stat-title",children:s.Ay.get("energy_rental.market_data.renting_addresses_title")}),(0,j.jsx)("div",{className:"stat-value",children:(0,c.ZV)((0,o.A)(t.energyRentHeadCount),0)})]})]})]})}})||se)||se)||se)||se)||se)||se;var ie,le=r(48634);let oe=(0,a.WQ)("lend")(ie=(0,a.WQ)("energyRental")(ie=(0,a.PA)(ie=class extends n.Component{constructor(){super(),this.close=()=>{this.props.energyRental.setData({firstVisitModalVisible:!1})},this.state={mobile:(0,b.A)(window.navigator).any}}render(){const{mobile:e}=this.state,{theme:t,lang:r}=this.props.lend,{firstVisitModalVisible:n}=this.props.energyRental;return(0,j.jsx)(le.A,{title:"",visible:n,closable:!1,destroyOnClose:!0,icon:null,onCancel:()=>this.close(),footer:null,width:e?335:400,centered:!0,className:`j-modal header-border ${t} first-visit-modal ${r}`,getContainer:()=>document.querySelector(".j-wrapper"),children:(0,j.jsxs)("div",{className:"first-visit-modal-content",children:[(0,j.jsx)("div",{className:"first-visit-modal-bg"}),(0,j.jsx)("div",{className:"first-visit-modal-title",children:s.Ay.get("energy_rental.first_visit_modal.modal_title")}),(0,j.jsxs)("div",{className:"first-visit-modal-content-rows",children:[(0,j.jsx)("div",{className:"first-visit-modal-content-row",children:s.Ay.get("energy_rental.first_visit_modal.row_1")}),(0,j.jsx)("div",{className:"first-visit-modal-content-row",children:s.Ay.get("energy_rental.first_visit_modal.row_2")}),(0,j.jsx)("div",{className:"first-visit-modal-content-row",children:s.Ay.get("energy_rental.first_visit_modal.row_3")})]}),(0,j.jsx)("a",{href:(0,w.iW)(r),target:"_blank",rel:"noreferrer",className:"tutorial-link purple-link-btn hover",onClick:()=>{},children:s.Ay.get("energy_rental.first_visit_modal.tutorial_btn")}),(0,j.jsx)("button",{className:"explore-btn",onClick:()=>{this.close()},children:s.Ay.get("energy_rental.first_visit_modal.explore_btn")})]})})}})||ie)||ie)||ie;const de=oe;var ce;r(95893);let he=(0,a.WQ)("network")(ce=(0,a.WQ)("lend")(ce=(0,a.WQ)("system")(ce=(0,a.WQ)("pool")(ce=(0,a.WQ)("energyRental")(ce=(0,a.PA)(ce=class extends n.Component{constructor(e){var t;super(e),this.componentDidMount=async()=>{window.localStorage.setItem("lastVisitEnergyRentalPage","energyRental");const{isConnected:e}=this.props.network;await this.props.lend.getLatestBlockInfo(),this.props.energyRental.setVariablesInterval(),document.title="Energy Rental - JustLend DAO",e?this.props.energyRental.getMiniOrderList():this.props.network.on("connect",(async()=>{this.props.energyRental.getMiniOrderList()})),window.gtag("event","energyrent_pro_PV",{event_category:"energyrent",event_label:"energyrent_pro_PV"}),window.gtag("event","energyrent_pro_UV",{event_category:"energyrent",event_label:"energyrent_pro_UV"});const t=window.localStorage.getItem("didVisitNewRentalPage");null!=t&&"false"!=t||(window.localStorage.setItem("didVisitNewRentalPage","true"),this.props.energyRental.setData({firstVisitModalVisible:!0}))},this.getUserData=async()=>{await this.props.energyRental.getUserTrxBalance(),await this.props.energyRental.getMultiReward(),await this.props.energyRental.getUserData(),await this.props.energyRental.getMiniOrderList(),this.props.network.on("connect",(async()=>{await this.props.energyRental.getUserTrxBalance(),await this.props.energyRental.getMultiReward(),await this.props.energyRental.getUserData(),await this.props.energyRental.getMiniOrderList()})),this.props.network.on("chainChanged",(async()=>{await this.props.energyRental.getUserTrxBalance(),await this.props.energyRental.getMultiReward(),await this.props.energyRental.getUserData(),await this.props.energyRental.getCommonRentInfos(),await this.props.energyRental.getMiniOrderList()}))},this.getMarketData=async()=>{try{this.props.energyRental.getMarketData(),this.props.energyRental.getCommonRentInfos()}catch(e){console.log("error: getMarketData")}},this.state={lang:(null===(t=(0,c.Sp)())||void 0===t?void 0:t.lang)||window.localStorage.getItem("lang")||s.Ay.options.currentLocale}}componentWillUnmount(){this.props.system.clearRejectError(),this.props.energyRental.clearVariablesInterval()}render(){const{isConnected:e,finishedWalletInit:t}=this.props.network,{theme:r}=this.props.lend,{kink:n,marketData:s,isGettingMiniOrderList:a,orderListTotalCount:i,miniReceiverTotal:c}=this.props.energyRental;const v=((0,o.A)(i).isNaN()||(0,o.A)(i).lt(0)?0:i)+((0,o.A)(c).isNaN()||(0,o.A)(c).lt(0)?0:c)>0,x=s&&s.model&&s.model.find((e=>!0===e.current)),w=x?100*x.base:"--",A="--"!==w&&(0,o.A)(w).gte(n);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"j-wrapper "+r,children:[(0,j.jsx)("div",{className:"energy-rental-page-bg"}),(0,j.jsx)(h.A,{instantActions:this.getMarketData,mountedActions:this.getUserData,classNames:"transparent-bg"}),(0,j.jsx)(p.A,{pageName:"energyRental"}),!a||t&&!e?(0,j.jsxs)("div",{className:"j-energy-rental-container modal-appender"+(this.props.energyRental.addOrderModalVisible?" high-level-container":""),children:[(0,j.jsx)(f,{wideLayout:v}),(0,j.jsxs)("div",{className:l()("rental-content-container",{"show-mini-list":v}),children:[(0,j.jsx)(B,{showSectionHeader:v,currentRentalPrice:100*s.trx1wEnergy,isUtilizationAboveKink:A}),v&&(0,j.jsx)(X,{})]}),(0,j.jsx)(G,{}),(0,j.jsx)(K,{}),(0,j.jsx)(ae,{data:s,utilizationRate:w})]}):(0,j.jsxs)("div",{className:"j-energy-rental-container energy-rental-skeleton",children:[(0,j.jsxs)("div",{className:"page-title-skeleton-container",children:[(0,j.jsx)(d.A,{title:!1,paragraph:{rows:1,width:"50%"},active:!0}),(0,j.jsx)(d.A,{title:!1,paragraph:{rows:1,width:"100%"},active:!0})]}),(0,j.jsxs)("div",{className:"rental-content-skeleton-group",children:[(0,j.jsxs)("div",{className:"rental-form-skeleton-container skeleton-container-background",children:[(0,j.jsx)("div",{className:"form-skeleton-bg"}),(0,j.jsx)("div",{className:"form-title-skeleton-row",children:(0,j.jsx)(d.A,{title:!1,paragraph:{rows:1,width:"45%"},active:!0})}),(0,j.jsxs)("div",{className:"form-content-skeleton-group",children:[(0,j.jsxs)("div",{className:"form-content-skeleton-row",children:[(0,j.jsx)(d.A,{title:!1,paragraph:{rows:1,width:"100%"},active:!0}),(0,j.jsx)(d.A,{title:!1,paragraph:{rows:1,width:"100%"},active:!0})]}),(0,j.jsx)(d.A,{title:!1,paragraph:{rows:1,width:"100%"},active:!0,className:"thick-skeleton dark"}),(0,j.jsx)(d.A,{title:!1,paragraph:{rows:1,width:"50%"},active:!0}),(0,j.jsx)(d.A,{title:!1,paragraph:{rows:1,width:"50%"},active:!0}),(0,j.jsxs)("div",{className:"form-content-skeleton-row tall-row",children:[(0,j.jsx)(d.A,{title:!1,paragraph:{rows:1,width:"100%"},active:!0}),(0,j.jsx)(d.A,{title:!1,paragraph:{rows:1,width:"100%"},active:!0}),(0,j.jsx)(d.A,{title:!1,paragraph:{rows:1,width:"100%"},active:!0}),(0,j.jsx)(d.A,{title:!1,paragraph:{rows:1,width:"100%"},active:!0})]}),(0,j.jsx)(d.A,{title:!1,paragraph:{rows:1,width:"50%"},active:!0}),(0,j.jsxs)("div",{className:"rent-info-skeleton-group",children:[(0,j.jsx)(d.A,{title:!1,paragraph:{rows:2,width:"100%"},active:!0}),(0,j.jsx)(d.A,{title:!1,paragraph:{rows:2,width:"100%"},active:!0})]}),(0,j.jsx)(d.A,{title:!1,paragraph:{rows:1,width:"100%"},active:!0,className:"thick-skeleton"}),(0,j.jsx)(d.A,{title:!1,paragraph:{rows:1,width:"100%"},active:!0,className:"thick-skeleton"})]})]}),(0,j.jsxs)("div",{className:"mini-list-skeleton-container skeleton-container-background",children:[(0,j.jsxs)("div",{className:"list-title-skeleton-row",children:[(0,j.jsx)(d.A,{title:!1,paragraph:{rows:1,width:"100%"},active:!0}),(0,j.jsx)(d.A,{title:!1,paragraph:{rows:1,width:"100%"},active:!0})]}),(0,j.jsxs)("div",{className:"order-skeleton-group",children:[(0,j.jsx)(d.A,{title:!1,paragraph:{rows:1,width:"100%"},active:!0}),(0,j.jsxs)("div",{className:"order-content-skeleton-group",children:[(0,j.jsx)(d.A,{title:!1,paragraph:{rows:3,width:"100%"},active:!0}),(0,j.jsx)(d.A,{title:!1,paragraph:{rows:3,width:"100%"},active:!0})]})]}),(0,j.jsxs)("div",{className:"order-skeleton-group",children:[(0,j.jsx)(d.A,{title:!1,paragraph:{rows:1,width:"100%"},active:!0}),(0,j.jsxs)("div",{className:"order-content-skeleton-group",children:[(0,j.jsx)(d.A,{title:!1,paragraph:{rows:3,width:"100%"},active:!0}),(0,j.jsx)(d.A,{title:!1,paragraph:{rows:3,width:"100%"},active:!0})]})]}),(0,j.jsx)("div",{className:"list-link-skeleton-row",children:(0,j.jsx)(d.A,{title:!1,paragraph:{rows:1,width:"100%"},active:!0})})]})]}),(0,j.jsxs)("div",{className:"subsidies-skeleton-container skeleton-container-background",children:[(0,j.jsx)(d.A,{title:!1,paragraph:{rows:1,width:"100%"},active:!0,className:"left-skeleton"}),(0,j.jsx)(d.A,{title:!1,paragraph:{rows:1,width:"100%"},active:!0,className:"right-skeleton"})]}),(0,j.jsxs)("div",{className:"tips-skeleton-container skeleton-container-background",children:[(0,j.jsx)("div",{className:"tips-title-skeleton-row",children:(0,j.jsx)(d.A,{title:!1,paragraph:{rows:1,width:"45%"},active:!0})}),(0,j.jsxs)("div",{className:"tips-content-skeleton-group",children:[(0,j.jsx)("div",{className:"left-group",children:(0,j.jsx)(d.A,{title:!1,paragraph:{rows:2,width:"100%"},active:!0})}),(0,j.jsx)("div",{className:"right-group",children:(0,j.jsx)(d.A,{title:!1,paragraph:{rows:2,width:"100%"},active:!0})})]})]}),(0,j.jsxs)("div",{className:"market-data-skeleton-container skeleton-container-background",children:[(0,j.jsxs)("div",{className:"price-and-chart-skeleton-group",children:[(0,j.jsx)("div",{className:"left-group",children:(0,j.jsx)(d.A,{title:!1,paragraph:{rows:4,width:"100%"},active:!0})}),(0,j.jsx)("div",{className:"right-group",children:(0,j.jsx)(d.A,{title:!1,paragraph:{rows:2,width:"100%"},active:!0})})]}),(0,j.jsxs)("div",{className:"market-stat-skeleton",children:[(0,j.jsx)(d.A,{title:!1,paragraph:{rows:1,width:"100%"},active:!0}),(0,j.jsx)(d.A,{title:!1,paragraph:{rows:1,width:"100%"},active:!0}),(0,j.jsx)(d.A,{title:!1,paragraph:{rows:1,width:"100%"},active:!0})]})]})]}),(0,j.jsx)("div",{className:"modal-appender j-deal-note-modal-appender"+(this.props.energyRental.dealNoteShow?" high-level-container":"")}),(0,j.jsx)(g.A,{})]}),(0,j.jsx)(y.A,{}),(0,j.jsx)(_.A,{store:"energyRental"}),!this.props.energyRental.addOrderModalVisible&&(0,j.jsx)(u.A,{}),(0,j.jsx)(de,{}),(0,j.jsx)(m.A,{theme:r}),(0,j.jsx)(V.A,{})]})}})||ce)||ce)||ce)||ce)||ce)||ce;const pe=he;var ge;const me=(0,a.WQ)("network")(ge=(0,a.PA)(ge=class extends n.Component{constructor(e){super(e),this.componentDidMount=async()=>{this.props.network.setData({routeName:"EnergyRent"})}}render(){return(0,j.jsx)(pe,{})}})||ge)||ge},70102:(e,t,r)=>{r.d(t,{A:()=>h});var n,s=r(76998),a=r(98859),i=(r(33270),r(48634)),l=r(96843),o=(r(83933),r(95889),r(852)),d=r(52142),c=(r(75659),r(23446));const h=(0,a.WQ)("network")(n=(0,a.WQ)("lend")(n=(0,a.WQ)("system")(n=(0,a.WQ)("pool")(n=(0,a.WQ)("strx")(n=(0,a.PA)(n=class extends s.Component{constructor(){super(),this.close=()=>{this.props.strx.setData({rentPausedVisible:!1})},this.state={lang:window.localStorage.getItem("lang")||l.Ay.options.currentLocale,approving:!1}}componentDidMount(){}render(){const{theme:e}=this.props.lend,{rentPausedVisible:t}=this.props.strx;return(0,c.jsx)(i.A,{title:l.Ay.get("collateral_tip_title"),visible:t,closable:!1,icon:null,footer:null,width:400,centered:!0,className:`j-modal j-rent-paused-modal  header-border ${e} `,getContainer:()=>document.querySelector(".j-wrapper"),children:(0,c.jsxs)("div",{className:"rent-paused",children:[(0,c.jsx)("img",{className:"rp-icon",src:"white"===e?d:o,alt:""}),(0,c.jsx)("div",{className:"rp-des",children:l.Ay.getHTML("strx.energy_under_upgrading")}),(0,c.jsx)("button",{className:"j-large-btn j-supply rent-now",onClick:()=>this.close(),children:l.Ay.get("got_it")})]})})}})||n)||n)||n)||n)||n)||n},80646:()=>{},95889:()=>{},99861:(e,t,r)=>{r.d(t,{A:()=>u});var n,s=r(76998),a=r(59866),i=r(98859),l=r(33270),o=r(95381),d=r(48634),c=r(26559),h=r(65506),p=r(96843),g=r(75659),m=(r(28567),r(83933),r(80646),r(23446));const u=(0,i.WQ)("network")(n=(0,i.WQ)("strx")(n=(0,i.WQ)("energyRental")(n=(0,i.WQ)("system")(n=(0,i.PA)(n=class extends s.Component{constructor(){super(),this.renderRewardList=()=>{const{defaultValue:e,multiRewardData:t}=this.props[this.props.store],{approving:r,lang:n}=this.state;let s=Object.keys(t).reverse();return(0,m.jsx)(o.A.Group,{disabled:r,defaultValue:e,onChange:this.onChange,value:e,children:s.map((n=>(0,m.jsxs)("div",{className:"j-reward-item"+(e.length>=g.Ay.rewardNum&&!e.includes(n)||r?" j-reward-item-disabled":""),children:[(0,m.jsx)(o.A,{className:"j-checkbox blue",value:n,disabled:e.length>=g.Ay.rewardNum&&!e.includes(n),children:p.Ay.getHTML("v2.rewards.num",{value:n})})," ",(0,m.jsxs)("div",{className:"tar",children:[(0,m.jsxs)("span",{className:"j-value",children:[(0,l.ZV)((0,l.gH)(parseInt(t[n].amount)).div(g.Ay.tokenDefaultPrecision),6,{miniText:.001})," "]}),(0,m.jsx)("span",{className:"j-reward-unit",children:" JST"})]})]},n)))})},this.onChange=e=>{let t=null===e||void 0===e?void 0:e.length;if(t>g.Ay.rewardNum)return;this.props[this.props.store].filterReward(e);const{multiRewardData:r}=this.props[this.props.store];let n=Object.keys(r).length;t===g.Ay.rewardNum||t===n?this.setState({checkAll:!0}):t<g.Ay.rewardNum&&this.setState({checkAll:!1})},this.onCheckAllChange=e=>{let t=e.target.checked;if(t){const{multiRewardData:e}=this.props[this.props.store];this.props[this.props.store].filterReward(Object.keys(e)),window.gtag("event","PC_select_all_reward",{event_category:"PC_V1.5",event_label:"select_all_reward"})}else this.props[this.props.store].setData({defaultValue:[],choosedTotalReward:0}),window.gtag("event","PC_unselect_all_reward",{event_category:"PC_V1.5",event_label:"unselect_all_reward"});this.setState({checkAll:t})},this.getReward=async()=>{if(this.props.system.clearRejectError(),0===this.props.network.isRightChain)return void this.props.network.changeChain();if(0===this.props.network.isMainNetwork)return void this.props.network.showNetworkErrorModal();window.gtag("event","PC_claim_confirm",{event_category:"PC_V1.5",event_label:"claim_confirm"});const{multiRewardData:e,defaultValue:t,choosedTotalReward:r}=this.props[this.props.store],n={title:"strx.energy_notification_reward_title",title2:"deposit.transactionsent",title3:"v2.transaction_confirm_fail",title4:"deposit.confirm_transaction",obj:{value:(0,l.ZV)(r,6,{miniText:.001}),token:"JST"},transType:"reward"};this.setState({approving:!0});let s=[];t.map((t=>{s.push([e[t].merkleIndex,e[t].index,e[t].amount,e[t].proof])}));const a=g.Ay.sTRX.merkleDistributor;const i=await this.props.system.getFeeLimitCommon(a,"multiClaim((uint256,uint256,uint256,bytes32[])[])",[]);await this.props.system.getAllowanceMultiReward([s],n,i)&&(window.gtag("event","PC_claim_success",{event_category:"PC_V1.5",event_label:"claim_success"}),this.props.network.setData({allowanceVisible:!1}),setTimeout((()=>{this.props[this.props.store].getMultiReward()}),5e3)),this.setState({approving:!1})},this.timerInterval=null,this.state={mobile:(0,a.A)(window.navigator).any,lang:window.localStorage.getItem("lang")||p.Ay.options.currentLocale,approving:!1,indeterminate:!0,checkAll:!0}}render(){const{mobile:e,lang:t,checkAll:r,data:n,approving:s}=this.state,{theme:a,multiRewardData:i,defaultValue:g,choosedTotalReward:u,totalReward:y,collapse:_}=this.props[this.props.store],{allowanceVisible:v}=this.props.network,{transModalInfo:x}=this.props.system,{declined:w,transType:j}=x;return(0,m.jsx)(d.A,{title:p.Ay.get("strx.energy_waiting_get_allowance"),maskClosable:!1,visible:v,closable:!0,onCancel:()=>{this.props.system.clearRejectError(),this.props.network.setData({allowanceVisible:!1}),this.props[this.props.store].collapseInit(),this.props[this.props.store].filterReward(),window.gtag("event","PC_reward_modal_close",{event_category:"PC_V1.5",event_label:"reward_modal_close"})},footer:null,className:"j-modal j-reward-modal j-allowance-modal header-border",width:450,centered:!e,getContainer:()=>document.querySelector(".j-wrapper"),children:(0,m.jsxs)("div",{className:"j-rewards j-allowance",children:[(0,m.jsx)("div",{className:"rewards-icon"}),(0,m.jsx)("div",{className:"rewards-title",children:p.Ay.get("v2.rewards.claiming")}),(0,m.jsxs)("div",{className:"rewards-value",children:[(0,l.gH)(u).eq(0)?"0":(0,l.ZV)(u,6,{miniText:.001})," ","JST"]}),(0,m.jsxs)("div",{className:"rewards-lists",children:[(0,m.jsxs)("div",{className:"rewards-list-top",children:[(0,m.jsxs)("div",{className:"flex aic",children:[(0,m.jsxs)(o.A,{className:"j-checkbox blue",disabled:s,onChange:this.onCheckAllChange,checked:r,children:[p.Ay.get("strx.energy_rounds")," (",g.length,"/",Object.keys(i).length,")"]}),Object.keys(i).length>3&&(0,m.jsx)(c.A,{title:p.Ay.get("v2.rewards.most_can_claim"),placement:"top",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown",getPopupContainer:()=>document.querySelector(".j-reward-modal"),children:(0,m.jsx)("span",{className:"j-tooltip-icon"})})]}),(0,m.jsxs)("div",{className:"j-collapse"+(_?"":" active"),onClick:()=>{this.props[this.props.store].setData({collapse:!_}),_?window.gtag("event","PC_rewards_uncollapse",{event_category:"PC_V1.5",event_label:"rewards_uncollapse"}):window.gtag("event","PC_rewards_collapse",{event_category:"PC_V1.5",event_label:"rewards_collapse"})},children:[p.Ay.get("strx.energy_allowance_detail"),(0,m.jsx)("span",{className:"j-collapse-icon"})]})]}),!_&&(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:"pr",children:[(0,m.jsx)("div",{className:"rewards-list-content scroll-bar",children:this.renderRewardList()}),Object.keys(i).length>3&&(0,m.jsx)("div",{className:"linear"})]})})]}),(0,m.jsx)("div",{className:"borrow-tip borrow-important-tip "+((0,l.gH)(y).minus(u).gt(0)?"":"opacity"),children:((0,l.gH)(y).minus(u).gt(0),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{className:"en-US"===t?"en":""}),p.Ay.getHTML("v2.rewards.have_reclaimed",{value:(0,l.ZV)((0,l.gH)(y).minus(u),8,{miniText:.001}),token:"JST"})]}))}),s?(0,m.jsxs)("button",{className:"j-large-btn j-blue j-signing mt-0",disabled:!0,children:[p.Ay.get("v2.sign_in_wallet"),(0,m.jsx)("span",{className:"siging-icon"})]}):(0,m.jsx)(h.A,{className:"j-large-btn j-blue mt-0",disabled:(null===g||void 0===g?void 0:g.length)<=0,onClick:this.getReward,children:p.Ay.get("v2.rewards.claim_confirm")}),w&&"reward"===j&&(0,m.jsxs)("div",{className:"j-error-tip wallet-reject",children:[(0,m.jsx)("span",{className:"j-error-img"}),(0,m.jsx)("div",{children:p.Ay.get("v2.reject_in_wallet")})]})]})})}})||n)||n)||n)||n)||n}}]);