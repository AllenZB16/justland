(self.webpackChunkjustlend_front=self.webpackChunkjustlend_front||[]).push([[195],{18195:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>G});var a=s(76998),n=s(26559),i=s(67441),r=s(96843),l=s(59866),o=s(98859),c=s(22172),d=s(93995),p=s(19523),h=s(13412),m=s(40437),x=s(13251),g=s(33270),u=s(65115),_=s.n(u),v=s(45901),j=s.n(v),y=s(65684),k=s.n(y);const A=()=>Math.floor(1e4*Math.random()),w=e=>e.match(/^T/)?k().address.toHex(e).toUpperCase():e,N=function(e){const t=`${arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST"}${arguments.length>2?arguments[2]:void 0}${arguments.length>3?arguments[3]:void 0}?${T(arguments.length>4&&void 0!==arguments[4]?arguments[4]:{})}`;return b(e,t)},b=(e,t)=>_().createHmac("sha1",e).update(t,"utf8").digest("base64"),T=e=>{const t=j().pick(e,["Lang","System","Version","address","chain","channel","nonce","secretId","ts"]),s=Object.keys(t).sort(),a=[];for(const n of s)a.push(`${n}=${e[n]}`);return a.join("&")},f=async(e,t)=>{try{e=w(e);const s={System:"chrome",Version:"1.0.0",DeviceID:"1:1:1:1",Lang:"1",channel:"official",packageName:"justlend",ts:(new Date).getTime(),chain:"MainChain"},a=((e,t)=>{const s=A(),a="AE68A487AA919CAE";e=w(e),t.nonce=s,t.secretId=a,t.address=e;const n=N("FMD5MW11TIIMYFSWDXVGQDUD9XR7GVV9XR29J","POST",t.DeviceID,"/api/stat/action",t);return console.log("signature: ",n),{nonce:s,secretId:a,signature:n}})(e,s);a.address=e,t.address=e;const n={headers:s,params:a};await(0,x.XB)(t,n)}catch(s){return{success:!1}}};s(47767),s(95893);var C,R=s(33635),S=s(48634),X=s(75659),P=s(79467),D=s(73185),V=(s(65627),s(94709)),F=s(23446);let M=(0,o.WQ)("network")(C=(0,o.WQ)("lend")(C=(0,o.WQ)("system")(C=(0,o.WQ)("strx")(C=(0,o.PA)(C=class extends a.Component{constructor(e){super(),this.state={mobile:(0,l.A)(window.navigator).any}}render(){const{userData:e}=this.props.strx,{accountWithDrawAmount:t,roundDetails:s}=e,{mobile:a}=this.state;let{theme:i}=this.props.lend;const l="white"===i;return(0,F.jsxs)(S.A,{title:r.Ay.get("strx.stake_unstaking_details"),footer:null,onCancel:()=>{this.props.setUnlockModalVisible(!1),window.gtag("event","PC_stake_detail_modal_close",{event_category:"sTRX",event_label:"stake_detail_modal_close"})},className:"unlock-modal"+(l?" white":""),visible:this.props.visible,centered:!0,width:a?"calc(100vw - 40px)":"400px",closeIcon:(0,F.jsx)("img",{alt:"",src:l?D.A:P.A}),children:[(0,F.jsxs)("div",{className:"unlock-balance",children:[(0,F.jsx)("div",{children:r.Ay.get("strx.stake_unstaking_total")}),(0,F.jsx)("div",{className:"amount",children:(0,F.jsx)(Z,{value:`${(0,g.ZV)(t,3,{miniText:"0.001"})} TRX`})})]}),(0,F.jsxs)("div",{className:"unlock-detail",children:[(0,F.jsxs)("div",{className:"top",children:[(0,F.jsx)("div",{className:"title tooltip-text-wrap",children:r.Ay.get("strx.stake_avaiable_withdraw_time")}),(0,F.jsx)("div",{children:r.Ay.get("strx.stake_amount")})]}),(0,F.jsx)("ul",{className:"list",children:s.map(((e,t)=>(0,F.jsxs)("li",{children:[(0,F.jsx)("span",{className:"time",children:2===e.status?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(V.L,{overlayClassName:"j-tooltip-dropdown",title:r.Ay.get("strx.stake_unlock_time_tip"),placement:"topRight",arrowPointAtCenter:!0,overlayStyle:{maxWidth:"500px"},onOpen:()=>{window.gtag("event","H5_stake_unlock_time_hover",{event_category:"sTRX",event_label:"stake_unlock_time_hover"})},children:["\u2248 ",(0,g.fU)(1e3*Number(e.timestamp))]}),a?null:(0,F.jsx)(n.A,{overlayClassName:"j-tooltip-dropdown",title:r.Ay.get("strx.stake_unlock_time_tip"),placement:"top",arrowPointAtCenter:!0,overlayStyle:{maxWidth:"500px"},children:(0,F.jsx)("span",{className:"j-tooltip-icon",onMouseEnter:()=>{window.gtag("event","PC_stake_unlock_time_hover",{event_category:"sTRX",event_label:"stake_unlock_time_hover"})}})})]}):(0,g.fU)(1e3*Number(e.timestamp))}),(0,F.jsx)("span",{className:"value",children:(0,F.jsx)(Z,{value:`${(0,g.ZV)(e.amount,3,{miniText:"0.001"})} TRX`})})]},t)))})]})]})}})||C)||C)||C)||C)||C;function Z(e){const{value:t}=e,[s,a]=t.split(".");return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("span",{className:"highlight",children:s}),a?(0,F.jsxs)("span",{className:"normal",style:{fontSize:12},children:[".",a]}):""]})}const L=M;s(83933);var z,I=s(852),$=s(52142);let E=(0,o.WQ)("network")(z=(0,o.WQ)("lend")(z=(0,o.WQ)("system")(z=(0,o.PA)(z=class extends a.Component{constructor(){super(),this.close=()=>{this.props.closeRoundSize()},this.state={}}componentDidMount(){}render(){const{theme:e}=this.props.lend;return(0,F.jsxs)(S.A,{title:"",visible:this.props.visible,closable:!0,icon:null,onCancel:()=>this.props.setRoundModalVisible(!1),footer:null,width:400,centered:!0,className:`j-modal j-transaction-modal short ${e}`,getContainer:()=>document.querySelector(".j-wrapper"),children:[(0,F.jsx)("div",{className:"trans-title",children:r.Ay.get("strx.stake_round_size_note")}),(0,F.jsxs)("div",{className:"trans-body center",children:[(0,F.jsx)("div",{className:"trans-icon",children:(0,F.jsx)("img",{src:"white"===e?$:I,alt:""})}),(0,F.jsx)("div",{className:"trans-tips",children:r.Ay.get("strx.stake_round_size_content")}),(0,F.jsx)("div",{className:"j-large-btn j-supply",onClick:()=>this.props.setRoundModalVisible(!1),children:r.Ay.get("strx.stake_round_size_btn")})]})]})}})||z)||z)||z)||z;const q=E;var W,U=s(42780),B=s(25034),Q=s(12226);let H=(0,o.WQ)("network")(W=(0,o.WQ)("lend")(W=(0,o.WQ)("system")(W=(0,o.WQ)("pool")(W=(0,o.WQ)("strx")(W=(0,o.PA)(W=class extends a.Component{constructor(e){var t;super(e),t=this,this.componentDidMount=async()=>{await this.props.lend.getLatestBlockInfo(),this.props.strx.setVariablesInterval(),document.title="Staked TRX - JustLend DAO";const{hash:e,search:t}=window.location;(e.includes("source=finance")||t.includes("source=finance"))&&this.setState({fromFinance:!0}),window.gtag("event","PC_page_strx",{event_category:"sTRX",event_label:"page_strx"})},this.getUserData=async e=>{const t=await(0,x.lt)(e);t.success&&this.setState({userData:t.data})},this.deposit=async()=>{if(this.props.system.clearRejectError(),window.gtag("event","PC_stake_stake_button",{event_category:"sTRX",event_label:"stake_stake_button"}),0===this.props.network.isRightChain)return void this.props.network.changeChain();const{inputTRX:e,fromFinance:t,mobile:s}=this.state,{defaultAccount:a}=this.props.network;let n=(0,c.A)(e).eq(0)||(0,c.A)(e).isNaN()?1e3:e;const i={title:"v2.transaction_confirm",title2:"deposit.transactionsent",title3:"v2.transaction_confirm_fail",title4:"strx.stake_stake",obj:{value:(0,c.A)(e).eq(0)||(0,c.A)(e).isNaN()?1e3:e,token:"TRX"},transType:"depositsTRX"};this.setState({submitting:!0});const r=X.TS.contract.sTRXProxyContract;const l=new c.A(n).times(1e6)._toHex();let o={callValue:l};const d=await this.props.system.getFeeLimitCommon(r,"deposit()",[],o);await this.props.system.strxDeposit(l,i,d)&&(setTimeout((async()=>{if(await this.props.strx.getUserData(),await this.props.strx.getUserTrxBalance(),this.resetData(),s&&t){const e={actionType:9,actionTime:(new Date).getTime(),tokenId:"_",amount:new c.A(n).times(1e6)._toFixed(0,1)};await f(a,e)}}),5e3),window.gtag("event","PC_stake_stake_success",{event_category:"sTRX",event_label:"stake_stake_success"})),this.setState({submitting:!1})},this.withdraw=async()=>{if(this.props.system.clearRejectError(),window.gtag("event","PC_stake_unstake_button",{event_category:"sTRX",event_label:"stake_unstake_button"}),0===this.props.network.isRightChain)return void this.props.network.changeChain();const{userData:e,marketData:t}=this.props.strx,{accountSupply:s,processingRoundSize:a}=e,{inputsTRX:n,percentSelected:i,mobile:r,fromFinance:l}=this.state,{exchangeRate:o}=t,{defaultAccount:d}=this.props.network;if(a>32)return void this.setState({roundSizeModalVisible:!0});let p=(0,c.A)(n).eq(0)||(0,c.A)(n).isNaN()?1e3:4===i?s:n;const h={title:"v2.transaction_confirm",title2:"deposit.transactionsent",title3:"v2.transaction_confirm_fail",title4:"strx.stake_unstake",obj:{value:(0,c.A)(n).isNaN()?1e3:n,token:"sTRX"},transType:"withdrawStrx"};this.setState({submitting:!0});const m=X.TS.contract.sTRXProxyContract,x=new c.A(p).times(1e18)._toHex();let g=[{type:"uint256",value:x}];const u={feeLimit:await this.props.system.getFeeLimitCommon(m,"withdraw(uint256)",g)};await this.props.system.strWithdraw(x,h,u)&&(setTimeout((async()=>{if(await this.props.strx.getMarketData(),await this.props.strx.getUserData(),await this.props.strx.getUserTrxBalance(),this.resetData(),r&&l){const e={actionType:10,actionTime:(new Date).getTime(),tokenId:"_",amount:new c.A(p).times(o).div(1e12)._toFixed(0,1)};await f(d,e)}}),5e3),window.gtag("event","PC_stake_unstake_success",{event_category:"sTRX",event_label:"stake_unstake_success"})),this.setState({submitting:!1})},this.claimAll=async()=>{if(this.props.system.clearRejectError(),window.gtag("event","PC_stake_claim_button",{event_category:"sTRX",event_label:"stake_claim_button"}),0===this.props.network.isRightChain)return void this.props.network.changeChain();const{userData:e}=this.props.strx,{accountCanClaimAmount:t}=e,s={title:"v2.transaction_confirm",title2:"deposit.transactionsent",title3:"v2.transaction_confirm_fail",title4:"lend.withdraw",obj:{value:t,token:"sTRX"},transType:"claimStrx"};this.setState({claimSubmit:!0});const a=X.TS.contract.sTRXProxyContract;const n={feeLimit:await this.props.system.getFeeLimitCommon(a,"claimAll()",[])};await this.props.system.claimAll(s,n)&&(setTimeout((async()=>{await this.props.strx.getMarketData(),await this.props.strx.getUserData(),await this.props.strx.getUserTrxBalance(),this.resetData()}),5e3),window.gtag("event","PC_stake_claim_success",{event_category:"sTRX",event_label:"stake_claim_success"})),this.setState({claimSubmit:!1})},this.onChangeInputTRX=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"input";const{valid:a,str:n}=(0,g.PY)(e,6);if(t.props.system.clearRejectError(),a){const{marketData:a,trxBalance:r,energyFee:l,getEnergyFee:o}=t.props.strx,{exchangeRate:d,trxPrice:p}=a,{errorFlag:h}=t.setState;let m=(0,c.A)(n).times(1e18).div(d),x=(0,c.A)(n).eq(0)||""===n||(0,c.A)(n).times(p).lt(.01)?"":"\u2248 $"+(0,g.ZV)((0,c.A)(n).times(p),2);"percent"===s?t.setState({inputTRX:n,TRX2sTRX:m,trxDollar:x}):t.setState({percentSelected:0,inputTRX:n,TRX2sTRX:m,trxDollar:x});let u,_=h;try{const s=(0,c.A)(e).eq(0)||(0,c.A)(e).isNaN()?1e3:e,a=await t.props.system.getStrxDepositEnergyReqired(new c.A(s).times(1e6)._toHex());let n=l||await o();u=(0,c.A)((0,c.A)(a).times(n).div(1e6)._toFixed(0,1)).plus(2).toNumber(),u=u<X.TS.sTRX.safeValueMin?X.TS.sTRX.safeValueMin:u}catch(i){console.log("error: calculate safe max")}(0,c.A)(n).gt((0,c.A)(r).div(1e6))?_=1:(0,c.A)(n).lt((0,c.A)(X.TS.sTRX.stakeLimitMin))?_=4:(0,c.A)(n).gt((0,c.A)(X.TS.sTRX.stakeLimitMax))?_=5:(0,c.A)(r).div(1e6).gt(u)&&(0,c.A)(r).div(1e6).minus((0,c.A)(n)).lt(u)?_=2:(0,c.A)(r).div(1e6).lte(u)&&""!==n&&(_=3),t.setState({errorFlag:_,safeValue:u})}},this.onChangeInputsTRX=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"input";const{valid:a,str:n}=(0,g.PY)(e,18);if(t.props.system.clearRejectError(),a){const{marketData:e,userData:a}=t.props.strx,{exchangeRate:i,trxPrice:r,totalUnfreezable:l,balanceToUnfreeze:o}=e,{accountSupply:d}=a,{errorFlag:p}=t.setState;let h=(0,c.A)(n).times(i).div(1e18),m=(0,c.A)(n).eq(0)||""===n||(0,c.A)(h).times(r).lt(.01)?"":"\u2248 $"+(0,g.ZV)((0,c.A)(h).times(r),2),x=p;(0,c.A)(n).gt(d)?x=1:(0,c.A)(n).lt((0,c.A)(X.TS.sTRX.stakeLimitMin))?x=4:(0,c.A)(n).gt((0,c.A)(l).minus(o).times(1e18).div(i))&&(x=5),"percent"===s?t.setState({inputsTRX:n,errorFlag:x,sTRX2TRX:h,strxDollar:m}):t.setState({percentSelected:0,inputsTRX:n,errorFlag:x,sTRX2TRX:h,strxDollar:m})}},this.setPercent=e=>{const{stakeTab:t}=this.state,{userData:s,trxBalance:a}=this.props.strx,{accountSupply:n}=s,{isConnected:i}=this.props.network;if(i)if(1===t){let t=(0,c.A)(a).div(1e6).times(e/4);t=t._toFixed(18,1),this.setState({percentSelected:e}),this.onChangeInputTRX(t,"percent"),window.gtag("event","PC_stake_percent"+e,{event_category:"sTRX",event_label:"stake_percent"+e})}else{let t=(0,c.A)(n).times(e/4);t=t._toFixed(18,1),this.setState({percentSelected:e}),this.onChangeInputsTRX(t,"percent"),window.gtag("event","PC_unstake_percent"+e,{event_category:"sTRX",event_label:"unstake_percent"+e})}},this.getInstantData=async()=>{await this.props.strx.getMarketData()},this.getMountedData=async()=>{await this.props.strx.getUserData(),await this.props.strx.getUserTrxBalance(),this.props.network.on("connect",(async()=>{this.props.system.clearRejectError(),await this.props.strx.getUserData(),await this.props.strx.getUserTrxBalance(),this.resetData()}))},this.exchangeShowStrxBalance=()=>{const{showStrxBalance:e}=this.state;this.setState({showStrxBalance:!e}),window.gtag("event","PC_stake_exchange_balance",{event_category:"sTRX",event_label:"stake_exchange_balance"})},this.changeStakeTab=e=>{this.props.system.clearRejectError(),this.setState({stakeTab:e,percentSelected:0,errorFlag:0,submitting:!1,inputTRX:"",inputsTRX:"",trxDollar:"",strxDollar:""}),1===e?window.gtag("event","PC_stake_stake_tab",{event_category:"sTRX",event_label:"stake_stake_tab"}):2===e&&window.gtag("event","PC_stake_unstake_tab",{event_category:"sTRX",event_label:"stake_unstake_tab"})},this.setUnlockModalVisible=e=>{this.props.system.clearRejectError(),this.setState({unlockModalVisible:e}),e&&window.gtag("event","PC_stake_show_detail",{event_category:"sTRX",event_label:"stake_show_detail"})},this.setRoundSizeVisible=e=>{this.setState({roundSizeModalVisible:e})},this.onConnect=()=>{this.props.network.connectWalletV2(),window.gtag("event","PC_stake_connect_wallet",{event_category:"sTRX",event_label:"stake_connect_wallet"})},this.reserveTrx=()=>{const{trxBalance:e}=this.props.strx;this.onChangeInputTRX((0,c.A)(e).div(1e6).minus(this.state.safeValue)),window.gtag("event","PC_stake_reserve_trx",{event_category:"sTRX",event_label:"stake_reserve_trx"})},this.resetData=()=>{this.setState({percentSelected:0,errorFlag:0,submitting:!1,inputTRX:"",inputsTRX:"",trxDollar:"",strxDollar:""})},this.getAnnouncementUrl=()=>{const{lang:e}=this.state,t=e&&e.includes("en")?"https://justlendorg.zendesk.com/hc/en-us/articles/17080985061657":"https://justlendorg.zendesk.com/hc/zh-cn/articles/17080985061657";return X.TS.nile?t:"https://support.justlend.org/hc/en-us/articles/32539144305305"},this.getLearnUrl=()=>{const{lang:e}=this.state,t=e&&e.includes("en")?"https://justlendorg.zendesk.com/hc/en-us/articles/16512826805785":"https://justlendorg.zendesk.com/hc/zh-cn/articles/16512826805785",s=e&&e.includes("en")?"https://justlendorg.zendesk.com/hc/en-us/articles/17525391458329":"https://justlendorg.zendesk.com/hc/zh-cn/articles/17525391458329";return X.TS.nile?t:s},this.state={lang:window.localStorage.getItem("lang")||r.Ay.options.currentLocale,mobile:(0,l.A)(window.navigator).any,marketData:{model:[]},userData:{roundDetails:[]},percentSelected:0,inputTRX:"",TRX2sTRX:"--",sTRX2TRX:"--",inputsTRX:"",showStrxBalance:!1,stakeTab:1,unlockModalVisible:!1,roundSizeModalVisible:!1,trxDollar:"",strxDollar:"",errorFlag:0,submitting:!1,claimSubmit:!1,fromFinance:!1}}componentWillUnmount(){this.props.system.clearRejectError(),this.props.strx.clearVariablesInterval()}render(){const{theme:e}=this.props.lend,{isConnected:t}=this.props.network,{marketData:s,userData:a,trxBalance:l}=this.props.strx,{transModalInfo:o}=this.props.system,{declined:x,transType:u}=o,{percentSelected:_,inputTRX:v,TRX2sTRX:j,sTRX2TRX:y,showStrxBalance:k,stakeTab:A,inputsTRX:w,unlockModalVisible:N,roundSizeModalVisible:b,trxDollar:T,strxDollar:f,errorFlag:C,submitting:S,lang:P,claimSubmit:D,mobile:M}=this.state,{exchangeRate:Z,trxPrice:z,totalApy:I,avgApy:$,unfreezeDelayDays:E,totalUnfreezable:W,balanceToUnfreeze:H}=s,{accountCanClaimAmount:Y,accountSupply:O,accountWithDrawAmount:G,accountIncome:J}=a,K=this.getLearnUrl(),ee=this.getAnnouncementUrl();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:"j-wrapper "+e+(X.TS.winterThemeVisible?" snow-show":""),children:[X.TS.winterThemeVisible&&(0,F.jsx)(B.A,{fromPage:"liquidityStake"}),(0,F.jsx)(d.A,{instantActions:this.getInstantData,mountedActions:this.getMountedData}),(0,F.jsx)(p.A,{pageName:"liquidityStake"}),(0,F.jsxs)("div",{className:"j-main j-stake-container j-liquidity-stake",children:[(0,F.jsxs)("div",{className:"top-header",children:[(0,F.jsx)("div",{className:"title",children:r.Ay.get("strx.stake_trx_liquid_staking")}),(0,F.jsxs)("div",{className:"info",children:[(0,F.jsxs)("div",{className:"desc",children:[r.Ay.get("strx.stake_info"),(0,F.jsx)(Q.z,{href:K,target:"_portal",className:"learn-more",onClick:window.gtag("event","PC_stake_about_strx",{event_category:"sTRX",event_label:"stake_about_strx"}),children:r.Ay.get("strx.stake_about_strx")})]}),(0,F.jsxs)("div",{className:"j-announce",children:[(0,F.jsx)("span",{className:"announce-icon"}),(0,F.jsx)("a",{className:"announce-content",onClick:window.gtag("event","PC_stake_annoucement",{event_category:"sTRX",event_label:"stake_annoucement"}),href:ee,target:"announce",rel:"noopener noreferrer",children:r.Ay.get("strx.stake_annoucement_2")}),(0,F.jsx)("span",{className:"announce-arrow-icon"})]})]})]}),(0,F.jsxs)("div",{className:"j-liquidity-stake-content",children:[t?(0,c.A)(O).eq(0)&&(0,c.A)(G).eq(0)&&(0,c.A)(Y).eq(0)?(0,F.jsxs)("div",{className:"apy-box-nostake",children:[(0,F.jsxs)("div",{className:"apy-title tooltip-text-wrap",children:[(0,F.jsx)(V.L,{overlayClassName:"j-tooltip-dropdown",title:(0,F.jsxs)(F.Fragment,{children:[r.Ay.get("strx.stake_staking_apy_tip2")," ",(0,F.jsx)(Q.z,{href:K,target:"_blank",rel:"noopener noreferrer",className:"learn-more",children:r.Ay.get("strx.stake_staking_apy_link")})]}),placement:"topRight",arrowPointAtCenter:!0,children:r.Ay.get("strx.stake_staking_apy")}),(0,F.jsx)(n.A,{overlayClassName:"j-tooltip-dropdown",title:(0,F.jsxs)(F.Fragment,{children:[r.Ay.get("strx.stake_staking_apy_tip2")," ",(0,F.jsx)(Q.z,{href:K,target:"_blank",rel:"noopener noreferrer",className:"learn-more",children:r.Ay.get("strx.stake_staking_apy_link")})]}),placement:"top",arrowPointAtCenter:!0,children:(0,F.jsx)("span",{className:"j-tooltip-icon",onMouseEnter:()=>{window.gtag("event","PC_stake_staking_apy_hover",{event_category:"sTRX",event_label:"stake_staking_apy_hover"})}})})]}),(0,F.jsxs)("div",{className:"apy-value",children:[(0,g.ZV)(100*$,2,{miniText:.01}),"%"]}),(0,F.jsx)("div",{className:"apy-desc",children:r.Ay.get("strx.stake_rewards_desc")}),(0,F.jsxs)("div",{className:"redeem",children:[(0,F.jsxs)("section",{children:[(0,F.jsxs)("div",{children:[r.Ay.get("strx.stake_strx_balance")," "]}),(0,F.jsxs)("p",{children:[(0,F.jsx)("strong",{children:(0,g.ZV)((0,c.A)(O),3)}),"sTRX"]})]}),(0,c.A)(J).gt(0)&&(0,F.jsxs)("section",{children:[(0,F.jsxs)("div",{className:"title tooltip-text-wrap",children:[(0,F.jsx)(V.L,{overlayClassName:"j-tooltip-dropdown",title:r.Ay.get("strx.stake_accumulated_tip"),placement:"topRight",arrowPointAtCenter:!0,children:r.Ay.get("strx.stake_accumulated")}),(0,F.jsx)(n.A,{overlayClassName:"j-tooltip-dropdown",title:r.Ay.get("strx.stake_accumulated_tip"),placement:"top",arrowPointAtCenter:!0,children:(0,F.jsx)("span",{className:"j-tooltip-icon"})})]}),(0,F.jsxs)("strong",{className:"value",children:[(0,c.A)(J).gte(.01)?(0,F.jsx)("span",{className:"pre",children:"\u2248 "}):"",(0,c.A)(J).gte(1e6)?(0,F.jsx)(n.A,{overlayClassName:"j-tooltip-dropdown",title:(0,g.ZV)(J,2,{miniText:.01}),placement:"top",arrowPointAtCenter:!0,children:(0,F.jsx)("span",{className:"income",children:(0,g.ZV)(J,2,{miniText:.01})})}):(0,F.jsx)("span",{className:"income",children:(0,g.ZV)(J,2,{miniText:.01})}),(0,F.jsx)("span",{className:"postfix",children:"TRX"})]})]})]}),(0,F.jsx)("div",{className:"apy-img"})]}):(0,F.jsxs)("div",{className:"apy-box-stake"+((0,c.A)(G).eq(0)&&(0,c.A)(Y).eq(0)?" no-stake":""),children:[(0,F.jsxs)("div",{className:"balance-info"+((0,c.A)(G).eq(0)&&(0,c.A)(Y).eq(0)?" only-stake":" "),children:[(0,F.jsxs)("div",{className:"balance-label",onClick:()=>this.exchangeShowStrxBalance(),children:[k?r.Ay.get("strx.stake_strx_balance"):r.Ay.get("strx.stake_trx_staked"),M?(0,F.jsx)("span",{className:"exchange"}):(0,F.jsx)(n.A,{title:k?r.Ay.get("strx.stake_exchange_label_trx"):r.Ay.get("strx.stake_exchange_label_strx"),placement:"top",overlayClassName:"j-tooltip-dropdown",arrowPointAtCenter:!0,children:(0,F.jsx)("span",{className:"exchange"})})]}),(0,F.jsxs)("div",{className:"balance",children:[k?`${(0,g.ZV)(O,3,{miniText:.001})}`:`${(0,g.ZV)((0,c.A)(O).times(Z).div(1e18),3,{miniText:.001})}`,(0,F.jsx)("span",{className:"postfix",children:k?"sTRX":"TRX"})]}),(0,F.jsxs)("div",{className:"money",children:[(0,c.A)(O).times(Z).div(1e18).times(z).gte(.01)?"\u2248 ":"",(0,g.ZV)((0,c.A)(O).times(Z).div(1e18).times(z),2,{miniText:.01,needDolar:!0})]})]}),(0,c.A)(G).eq(0)&&(0,c.A)(Y).eq(0)?(0,F.jsxs)("div",{className:"apy-only-stake",children:[(0,F.jsxs)("div",{className:"column",children:[(0,F.jsxs)("div",{className:"title tooltip-text-wrap",children:[(0,F.jsx)(V.L,{overlayClassName:"j-tooltip-dropdown",title:(0,F.jsxs)(F.Fragment,{children:[r.Ay.get("strx.stake_staking_apy_tip2")," ",(0,F.jsx)(Q.z,{href:K,target:"_blank",rel:"noopener noreferrer",className:"learn-more",children:r.Ay.get("strx.stake_staking_apy_link")})]}),placement:"topRight",arrowPointAtCenter:!0,children:r.Ay.get("strx.stake_staking_apy")}),(0,F.jsx)(n.A,{overlayClassName:"j-tooltip-dropdown",title:(0,F.jsxs)(F.Fragment,{children:[r.Ay.get("strx.stake_staking_apy_tip2")," ",(0,F.jsx)(Q.z,{href:K,target:"_blank",rel:"noopener noreferrer",className:"learn-more",children:r.Ay.get("strx.stake_staking_apy_link")})]}),placement:"top",arrowPointAtCenter:!0,children:(0,F.jsx)("span",{className:"j-tooltip-icon",onMouseEnter:()=>{window.gtag("event","PC_stake_staking_apy_hover",{event_category:"sTRX",event_label:"stake_staking_apy_hover"})}})})]}),(0,F.jsxs)("strong",{className:"value",children:[(0,g.ZV)(100*$,2,{miniText:.01}),"%"]})]}),(0,F.jsxs)("div",{className:"column",children:[(0,F.jsxs)("div",{className:"title",children:[r.Ay.get("strx.stake_daily_rewards"),(0,F.jsx)("em",{})]}),(0,F.jsxs)("strong",{className:"value",children:[(0,g.ZV)((0,c.A)(O).times(Z).div(1e18).times(I).div(365),3,{miniText:.001}),(0,F.jsx)("span",{className:"postfix",children:"TRX"})]})]}),(0,F.jsxs)("div",{className:"column",children:[(0,F.jsxs)("div",{className:"title tooltip-text-wrap",children:[(0,F.jsx)(V.L,{overlayClassName:"j-tooltip-dropdown",title:r.Ay.get("strx.stake_accumulated_tip"),placement:"topRight",arrowPointAtCenter:!0,children:r.Ay.get("strx.stake_accumulated")}),(0,F.jsx)(n.A,{overlayClassName:"j-tooltip-dropdown",title:r.Ay.get("strx.stake_accumulated_tip"),placement:"top",arrowPointAtCenter:!0,children:(0,F.jsx)("span",{className:"j-tooltip-icon"})})]}),(0,F.jsxs)("strong",{className:"value",children:[(0,c.A)(J).gte(.01)?(0,F.jsx)("span",{className:"pre",children:"\u2248 "}):"",(0,c.A)(J).gte(1e6)?(0,F.jsx)(n.A,{overlayClassName:"j-tooltip-dropdown",title:(0,g.ZV)(J,2,{miniText:.01}),placement:"top",arrowPointAtCenter:!0,children:(0,F.jsx)("span",{className:"income",children:(0,g.ZV)(J,2,{miniText:.01})})}):(0,F.jsx)("span",{className:"income",children:(0,g.ZV)(J,2,{miniText:.01})}),(0,F.jsx)("span",{className:"postfix",children:"TRX"})]})]})]}):(0,F.jsxs)("div",{className:"user-stake-info",children:[(0,F.jsxs)("div",{className:"withdraw-label tooltip-text-wrap",children:[(0,F.jsx)(V.L,{overlayClassName:"j-tooltip-dropdown",title:r.Ay.get("strx.stake_avaiable_withdraw_tip",{value:E}),placement:"topLeft",arrowPointAtCenter:!0,children:r.Ay.get("strx.stake_avaiable_withdraw")}),(0,F.jsx)(n.A,{overlayClassName:"j-tooltip-dropdown",title:r.Ay.get("strx.stake_avaiable_withdraw_tip",{value:E}),placement:"top",arrowPointAtCenter:!0,children:(0,F.jsx)("span",{className:"j-tooltip-icon",onMouseEnter:()=>{window.gtag("event","PC_stake_avaiable_withdraw_hover",{event_category:"sTRX",event_label:"stake_avaiable_withdraw_hover"})}})})]}),(0,F.jsxs)("div",{className:"withdraw-balance",children:[(0,F.jsx)("strong",{children:(0,g.ZV)((0,c.A)(Y),3,{miniText:.001})}),"TRX"]}),(0,c.A)(G).gt(0)?(0,F.jsxs)("div",{className:"unlock-bar",children:[r.Ay.getHTML("strx.stake_strx_unstaking",{value:(0,g.ZV)((0,c.A)(G),3,{miniText:.001})}),(0,F.jsx)(Q.z,{showArrow:!1,onClick:this.setUnlockModalVisible,className:"detail",children:r.Ay.get("strx.stake_details")})]}):null,(0,F.jsxs)("div",{className:"apy-info "+((0,c.A)(G).gt(0)?"no-withdraw":"show-widthdraw"),children:[(0,F.jsxs)("div",{className:"column",children:[(0,F.jsxs)("div",{className:"title tooltip-text-wrap",children:[(0,F.jsx)(V.L,{overlayClassName:"j-tooltip-dropdown",title:(0,F.jsxs)(F.Fragment,{children:[r.Ay.get("strx.stake_staking_apy_tip2")," ",(0,F.jsx)(Q.z,{href:K,target:"_blank",rel:"noopener noreferrer",className:"learn-more",children:r.Ay.get("strx.stake_staking_apy_link")})]}),placement:"topRight",arrowPointAtCenter:!0,children:r.Ay.get("strx.stake_staking_apy")}),(0,F.jsx)(n.A,{overlayClassName:"j-tooltip-dropdown",title:(0,F.jsxs)(F.Fragment,{children:[r.Ay.get("strx.stake_staking_apy_tip2")," ",(0,F.jsx)(Q.z,{href:K,target:"_blank",rel:"noopener noreferrer",className:"learn-more",children:r.Ay.get("strx.stake_staking_apy_link")})]}),placement:"top",arrowPointAtCenter:!0,children:(0,F.jsx)("span",{className:"j-tooltip-icon",onMouseEnter:()=>{window.gtag("event","PC_stake_staking_apy_hover",{event_category:"sTRX",event_label:"stake_staking_apy_hover"})}})})]}),(0,F.jsxs)("strong",{className:"value",children:[(0,g.ZV)(100*$,2,{miniText:.01}),"%"]})]}),(0,F.jsxs)("div",{className:"column",children:[(0,F.jsxs)("div",{className:"title",children:[r.Ay.get("strx.stake_daily_rewards"),(0,F.jsx)("em",{})]}),(0,F.jsxs)("strong",{className:"value",children:[(0,g.ZV)((0,c.A)(O).times(Z).div(1e18).times(I).div(365),3,{miniText:.001}),(0,F.jsx)("span",{className:"postfix",children:"TRX"})]})]}),(0,F.jsxs)("div",{className:"column",children:[(0,F.jsxs)("div",{className:"title tooltip-text-wrap",children:[(0,F.jsx)(V.L,{overlayClassName:"j-tooltip-dropdown",title:r.Ay.get("strx.stake_accumulated_tip"),placement:"topRight",arrowPointAtCenter:!0,children:r.Ay.get("strx.stake_accumulated")}),(0,F.jsx)(n.A,{overlayClassName:"j-tooltip-dropdown",title:r.Ay.get("strx.stake_accumulated_tip"),placement:"top",arrowPointAtCenter:!0,children:(0,F.jsx)("span",{className:"j-tooltip-icon"})})]}),(0,F.jsxs)("strong",{className:"value",children:[(0,c.A)(J).gte(.01)?(0,F.jsx)("span",{className:"pre",children:"\u2248 "}):"",(0,c.A)(J).gte(1e6)?(0,F.jsx)(n.A,{overlayClassName:"j-tooltip-dropdown",title:(0,g.ZV)(J,2,{miniText:.01}),placement:"top",arrowPointAtCenter:!0,children:(0,F.jsx)("span",{className:"income",children:(0,g.ZV)(J,2,{miniText:.01})})}):(0,F.jsx)("span",{className:"income",children:(0,g.ZV)(J,2,{miniText:.01})}),(0,F.jsx)("span",{className:"postfix",children:"TRX"})]})]})]}),(0,c.A)(Y).gt(0)?D?(0,F.jsxs)("div",{className:"withdraw disabled",children:[r.Ay.get("strx.stake_withdraw"),(0,F.jsx)("span",{className:"siging-icon"})]}):(0,F.jsx)("div",{className:"withdraw j-large-btn j-supply",onClick:()=>this.claimAll(),children:r.Ay.get("strx.stake_withdraw")}):(0,F.jsx)(n.A,{overlayClassName:"j-tooltip-dropdown",title:r.Ay.get("strx.stake_no_withdraw_amount"),placement:"top",arrowPointAtCenter:!0,children:(0,F.jsx)("div",{className:"withdraw disabled",children:r.Ay.get("strx.stake_withdraw")})}),x&&"claimStrx"===u&&(0,F.jsxs)("div",{className:"reject-info j-error-tip",children:[r.Ay.get("v2.reject_in_wallet"),(0,F.jsx)("span",{className:"j-error-img"})]})]}),(0,F.jsx)("div",{className:"img-bg"+((0,c.A)(G).eq(0)&&(0,c.A)(Y).eq(0)?" only-stake":" ")})]}):(0,F.jsxs)("div",{className:"apy-box-nostake disconnect",children:[(0,F.jsxs)("div",{className:"apy-title tooltip-text-wrap",children:[(0,F.jsx)(V.L,{overlayClassName:"j-tooltip-dropdown",title:(0,F.jsxs)(F.Fragment,{children:[r.Ay.get("strx.stake_staking_apy_tip2")," ",(0,F.jsx)(Q.z,{href:K,target:"_blank",rel:"noopener noreferrer",className:"learn-more",children:r.Ay.get("strx.stake_staking_apy_link")})]}),placement:"topRight",arrowPointAtCenter:!0,children:r.Ay.get("strx.stake_staking_apy")}),(0,F.jsx)(n.A,{overlayClassName:"j-tooltip-dropdown",title:(0,F.jsxs)(F.Fragment,{children:[r.Ay.get("strx.stake_staking_apy_tip2")," ",(0,F.jsx)(Q.z,{href:K,target:"_blank",rel:"noopener noreferrer",className:"learn-more",children:r.Ay.get("strx.stake_staking_apy_link")})]}),placement:"top",arrowPointAtCenter:!0,children:(0,F.jsx)("span",{className:"j-tooltip-icon",onMouseEnter:()=>{window.gtag("event","PC_stake_apy_hover",{event_category:"sTRX",event_label:"stake_apy_hover"})}})})]}),(0,F.jsxs)("div",{className:"apy-value",children:[(0,g.ZV)(100*$,2,{miniText:.01}),"%"]}),(0,F.jsx)("div",{className:"apy-desc",children:r.Ay.get("strx.stake_rewards_desc")}),(0,F.jsx)("div",{className:"connect-btn",onClick:this.onConnect,children:r.Ay.get("strx.stake_connect_wallet")}),(0,F.jsx)("div",{className:"apy-img"})]}),(0,F.jsxs)("div",{className:"stake-box "+(X.TS.winterThemeVisible?"snow-ele-top":""),children:[(0,F.jsxs)("div",{className:"tabs",children:[(0,F.jsx)("span",{className:`${1===A?"active":""} ${P}`,onClick:()=>this.changeStakeTab(1),children:r.Ay.get("strx.stake_stake")}),(0,F.jsx)("span",{className:`${2===A?"active":""} ${P}`,onClick:()=>this.changeStakeTab(2),children:r.Ay.get("strx.stake_unstake")})]}),1===A?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:"lock-content",children:[(0,F.jsxs)("div",{className:`balance-info ${P}`,children:[(0,F.jsx)("span",{className:"balance-label",children:r.Ay.get("strx.stake_staking_amount")}),(0,F.jsxs)("span",{className:"balance",children:[(0,F.jsx)("span",{className:"balance-title",children:r.Ay.get("strx.stake_balance")}),(0,F.jsx)("strong",{className:"balance-value-number",children:(0,g.ZV)((0,c.A)(l).div(1e6),6)}),(0,F.jsx)("strong",{className:"balance-postfix",children:"TRX"})]})]}),(0,F.jsxs)("div",{className:"input-wrap"+(C?" j-error-stake":""),children:[(0,F.jsx)(i.A,{className:"j-input stake-input "+(C>1?"j-error-input j-info-input":1===C?"j-error-input":""),onChange:e=>this.onChangeInputTRX((0,g.DS)(e.target.value)),onFocus:()=>{window.gtag("event","PC_stake_stake_input_focus",{event_category:"sTRX",event_label:"stake_stake_input_focus"})},placeholder:"1,000",value:(0,g.QA)(v),addonAfter:(0,F.jsx)("span",{className:"stake-trx",children:"TRX"})}),(0,F.jsx)("div",{className:"inputDollar",children:(0,c.A)(v).isNaN()?"\u2248 $"+(0,g.ZV)((0,c.A)(1e3).times(z),2):T}),1===C&&(0,F.jsxs)("div",{className:"j-error-tip",children:[(0,F.jsx)("span",{className:"j-error-img"}),(0,F.jsx)("div",{children:r.Ay.get("strx.stake_insufficient_balance")})]}),2===C&&(0,F.jsxs)("div",{className:"j-error-tip j-info-tip",children:[(0,F.jsx)("span",{className:"j-error-img"}),(0,F.jsxs)("div",{className:"j-error-text-wrap",children:[(0,F.jsx)("div",{className:"j-error-text",children:r.Ay.get("strx.stake_enough_trx2",{value:this.state.safeValue})}),(0,F.jsx)(Q.z,{showArrow:!1,className:"reserve-enough-btn",onClick:()=>this.reserveTrx(),children:r.Ay.get("strx.stake_reserve_trx2")})]})]}),3===C&&(0,F.jsxs)("div",{className:"j-error-tip j-info-tip",children:[(0,F.jsx)("span",{className:"j-error-img"}),(0,F.jsx)("div",{children:r.Ay.get("strx.stake_enough_resources")})]}),4===C&&(0,F.jsxs)("div",{className:"j-error-tip",children:[(0,F.jsx)("span",{className:"j-error-img"}),(0,F.jsx)("div",{children:r.Ay.get("strx.stake_stake_min_amount",{value:X.TS.sTRX.stakeLimitMin})})]}),5===C&&(0,F.jsxs)("div",{className:"j-error-tip",children:[(0,F.jsx)("span",{className:"j-error-img"}),(0,F.jsx)("div",{children:r.Ay.get("strx.stake_stake_max_amount",{value:(0,g.ZV)(X.TS.sTRX.stakeLimitMax,6)})})]})]}),(0,F.jsxs)("div",{className:"percent",children:[(0,F.jsx)("div",{className:1===_?"selected":"",onClick:()=>this.setPercent(1),children:"25%"}),(0,F.jsx)("div",{className:2===_?"selected":"",onClick:()=>this.setPercent(2),children:"50%"}),(0,F.jsx)("div",{className:3===_?"selected":"",onClick:()=>this.setPercent(3),children:"75%"}),(0,F.jsx)("div",{className:4===_?"selected":"",onClick:()=>this.setPercent(4),children:"100%"})]}),(0,F.jsxs)("div",{className:"info",children:[(0,F.jsx)("div",{children:r.Ay.get("strx.stake_will_get")}),(0,F.jsxs)("div",{className:"available",children:[(0,c.A)(v).isNaN()?(0,g.ZV)((0,c.A)(1e3).times(1e18).div(Z),6,{miniText:1e-6}):(0,g.ZV)(j,6,{miniText:1e-6}),(0,F.jsx)("span",{className:"strx",children:"sTRX"})]})]}),(0,F.jsxs)("div",{className:"info",children:[(0,F.jsx)("div",{children:r.Ay.get("strx.stake_ratio")}),(0,F.jsxs)("div",{className:"rate",children:["1 TRX = ",(0,g.ZV)((0,c.A)(1e18).div(Z),6)," sTRX"]})]})]}),t?S?(0,F.jsxs)("button",{className:"j-large-btn j-supply",disabled:!0,children:[r.Ay.get("v2.sign_in_wallet"),(0,F.jsx)("span",{className:"siging-icon"})]}):(0,F.jsx)("button",{className:"j-large-btn j-supply",onClick:()=>this.deposit(),disabled:1===C||4===C||5===C||(0,c.A)(v).isNaN()&&(0,c.A)(l).div(1e6).lt(1e3)||(0,c.A)(v).eq(0)||(0,c.A)(l).eq(0),children:r.Ay.get("strx.stake_stake_btn")}):"disabled"===this.props.lend.serviceInnerStatus?(0,F.jsx)(n.A,{title:r.Ay.get("season.can_not_connect"),overlayClassName:"j-tooltip-dropdown season season-l "+e,arrowPointAtCenter:!0,placement:"bottom",getPopupContainer:()=>document.querySelector(".j-liquidity-stake-content .stake-box .j-large-btn"),children:(0,F.jsx)("button",{className:"j-large-btn j-supply season",onClick:()=>{this.props.lend.setData({noServiceModalAllVisible:!0})},children:r.Ay.get("strx.stake_connect_wallet2")})}):(0,F.jsx)("button",{className:"j-large-btn j-supply",onClick:this.onConnect,children:r.Ay.get("strx.stake_connect_wallet2")}),x&&"depositsTRX"===u?(0,F.jsxs)("div",{className:"j-error-tip wallet-reject",children:[(0,F.jsx)("span",{className:"j-error-img"}),(0,F.jsx)("div",{children:r.Ay.get("v2.reject_in_wallet")})]}):(0,F.jsxs)("div",{className:"j-error-tip wallet-reject j-info-tip",children:[(0,F.jsx)("span",{className:"j-error-img"}),(0,F.jsx)("div",{children:r.Ay.get("strx.stake_wait_days2",{value:E})})]})]}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:"lock-content",children:[(0,F.jsxs)("div",{className:`balance-info ${P}`,children:[(0,F.jsx)("span",{className:"balance-label",children:r.Ay.get("strx.stake_unstaking_amount")}),(0,F.jsxs)("span",{className:"balance",children:[(0,F.jsx)("span",{className:"balance-title",children:r.Ay.get("strx.stake_balance")}),(0,F.jsx)("strong",{className:"balance-value-number",children:t?(0,g.ZV)((0,c.A)(O),18):"--"}),(0,F.jsx)("strong",{className:"balance-value-postfix",children:"sTRX"})]})]}),(0,F.jsxs)("div",{className:"input-wrap"+(C?" j-error-stake":""),children:[(0,F.jsx)(i.A,{className:"j-input stake-input "+(C>1?"j-error-input j-info-input":1===C?"j-error-input":""),onChange:e=>this.onChangeInputsTRX((0,g.DS)(e.target.value)),onFocus:()=>{window.gtag("event","PC_stake_unstake_input_focus",{event_category:"sTRX",event_label:"stake_unstake_input_focus"})},placeholder:"1,000",value:(0,g.QA)(w),addonAfter:(0,F.jsx)("span",{className:"stake-trx stake-strx",children:"sTRX"})}),(0,F.jsx)("div",{className:"inputDollar strx",children:(0,c.A)(w).isNaN()?"\u2248 $"+(0,g.ZV)((0,c.A)(1e3).times(Z).div(1e18).times(z),2):f}),1===C&&(0,F.jsxs)("div",{className:"j-error-tip",children:[(0,F.jsx)("span",{className:"j-error-img"}),(0,F.jsx)("div",{children:r.Ay.get("strx.stake_insufficient_balance")})]}),4===C&&(0,F.jsxs)("div",{className:"j-error-tip",children:[(0,F.jsx)("span",{className:"j-error-img"}),(0,F.jsx)("div",{children:r.Ay.get("strx.stake_unstake_min_amount",{value:X.TS.sTRX.stakeLimitMin})})]}),5===C&&(0,F.jsxs)("div",{className:"j-error-tip",children:[(0,F.jsx)("span",{className:"j-error-img"}),(0,F.jsx)("div",{children:r.Ay.get("strx.stake_unstake_max_amount",{value:(0,g.ZV)((0,c.A)(W).minus(H).times(1e18).div(Z),6)})})]})]}),(0,F.jsxs)("div",{className:"percent",children:[(0,F.jsx)("div",{className:1===_?"selected":"",onClick:()=>this.setPercent(1),children:"25%"}),(0,F.jsx)("div",{className:2===_?"selected":"",onClick:()=>this.setPercent(2),children:"50%"}),(0,F.jsx)("div",{className:3===_?"selected":"",onClick:()=>this.setPercent(3),children:"75%"}),(0,F.jsx)("div",{className:4===_?"selected":"",onClick:()=>this.setPercent(4),children:"100%"})]}),(0,F.jsxs)("div",{className:"info",children:[(0,F.jsx)("div",{children:r.Ay.get("strx.stake_will_get")}),(0,F.jsxs)("div",{className:"available second",children:[(0,c.A)(w).isNaN()?(0,g.ZV)((0,c.A)(1e3).times(Z).div(1e18),6,{miniText:1e-6}):(0,g.ZV)(y,6,{miniText:1e-6}),(0,F.jsx)("span",{className:"trx",children:"TRX"})]})]}),(0,F.jsxs)("div",{className:"info",children:[(0,F.jsx)("div",{children:r.Ay.get("strx.stake_ratio")}),(0,F.jsxs)("div",{className:"rate",children:["1 sTRX = ",(0,g.ZV)((0,c.A)(Z).div(1e18),6)," TRX"]})]})]}),t?S?(0,F.jsxs)("button",{className:"j-large-btn j-supply",disabled:!0,children:[r.Ay.get("v2.sign_in_wallet"),(0,F.jsx)("span",{className:"siging-icon"})]}):(0,F.jsx)("button",{className:"j-large-btn j-supply",onClick:()=>this.withdraw(),disabled:!!C||(0,c.A)(w).isNaN()&&(0,c.A)(O).lt(1e3)||(0,c.A)(w).eq(0)||(0,c.A)(O).eq(0),children:r.Ay.get("strx.stake_unstake_btn")}):"disabled"===this.props.lend.serviceInnerStatus?(0,F.jsx)(n.A,{title:r.Ay.get("season.can_not_connect"),overlayClassName:"j-tooltip-dropdown season season-l "+e,arrowPointAtCenter:!0,placement:"bottom",getPopupContainer:()=>document.querySelector(".j-liquidity-stake-content .stake-box .j-large-btn"),children:(0,F.jsx)("button",{className:"j-large-btn j-supply season",onClick:()=>{this.props.lend.setData({noServiceModalAllVisible:!0})},children:r.Ay.get("strx.stake_connect_wallet2")})}):(0,F.jsx)("button",{className:"j-large-btn j-supply",onClick:this.onConnect,children:r.Ay.get("strx.stake_connect_wallet2")}),x&&"withdrawStrx"===u?(0,F.jsxs)("div",{className:"j-error-tip wallet-reject",children:[(0,F.jsx)("span",{className:"j-error-img"}),(0,F.jsx)("div",{children:r.Ay.get("v2.reject_in_wallet")})]}):(0,F.jsxs)("div",{className:"j-error-tip wallet-reject j-info-tip",children:[(0,F.jsx)("span",{className:"j-error-img"}),(0,F.jsx)("div",{children:r.Ay.get("strx.stake_wait_days2",{value:E})})]})]})]})]}),(0,F.jsx)(R.Z,{data:s,type:"stake"})]}),(0,F.jsx)(h.A,{})]}),(0,F.jsx)(L,{visible:N,setUnlockModalVisible:this.setUnlockModalVisible}),(0,F.jsx)(q,{visible:b,setRoundModalVisible:this.setRoundSizeVisible}),(0,F.jsx)(m.A,{}),(0,F.jsx)(U.A,{theme:e})]})}})||W)||W)||W)||W)||W)||W;const Y=H;var O;const G=(0,o.WQ)("network")(O=(0,o.PA)(O=class extends a.Component{constructor(e){super(e),this.componentDidMount=async()=>{this.props.network.setData({routeName:"LiquidityStake"})}}render(){return(0,F.jsx)(Y,{})}})||O)||O},33635:(e,t,s)=>{"use strict";s.d(t,{Z:()=>x});var a,n=s(76998),i=s(98859),r=s(96843),l=(s(95893),s(33270)),o=s(37895),c=s(81055),d=s(22172),p=s(23446);let h=(0,i.WQ)("lend")(a=(0,i.PA)(a=class extends n.Component{constructor(e){super(e),this.onChartHightLight=e=>{const{dataList:t}=this.props,s=e.batch.reduce(((e,t)=>(e[t.seriesIndex]=t,e)),{}),a=t[s[0].dataIndex];this.setState({hasTouchedChart:!0,curParams:[{axisValue:a.date,value:a.depositedAPY,dataIndex:s[0].dataIndex},{axisValue:a.date,value:a.depositedUSD,dataIndex:s[0].dataIndex}]})},this.initRef=e=>{this.echartRef=e},this.onChartReady=()=>{setTimeout(this.showTooltipForCurrentData,800)},this.showTooltipForCurrentData=()=>{var e,t;const{mobile:s}=this.state,a=null===(e=this.echartRef)||void 0===e?void 0:e.getEchartsInstance();null!==(t=this.props.dataList)&&void 0!==t&&t.length?a&&a.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:this.props.dataList.findIndex((e=>e.current))||0,position:s?[40,10]:[80,10]}):setTimeout(this.showTooltipForCurrentData,800)},this.hideTooltip=()=>{var e;const t=null===(e=this.echartRef)||void 0===e?void 0:e.getEchartsInstance();t&&t.dispatchAction({type:"hideTip"})},this.onChartMouseover=()=>{!this.state.isHovering&&this.setState({isHovering:!0}),this.setState({labelStatus:!1})},this.onChartMouseout=()=>{this.setState({isHovering:!1,labelStatus:!0}),setTimeout((()=>{this.showTooltipForCurrentData()}),400)},this.state={mobile:(0,l.Fr)().any,curParams:{trx1wEnergyShow:"--",totalApyShow:"--",supplyApyShow:"--",occupancyRateShow:"--",voteApyShow:"--",dataIndex:0},hasTouchedChart:!1,isHovering:!1,labelStatus:!0},this.echartRef=null}componentDidUpdate(e){this.hideTooltip(),setTimeout((()=>{this.showTooltipForCurrentData()}))}getEchartsOption(){const{voteApy:e=0,type:t,totalApy:s}=this.props,{theme:a}=this.props.lend,{mobile:n,labelStatus:i}=this.state,o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0;const a=e.find((e=>e.current));t=a?(0,d.A)((0,d.A)(s).toFixed(4,1)).minus(+(0,d.A)(a.supply).toFixed(4,1)):(0,d.A)(t);const n=(0,c.mY)(100*t,2,{miniText:"0.01"})+"%";return e.map((e=>{const s=(0,c.mY)(100*e.supply,2,{miniText:"0.01"})+"%",a=t.plus((0,d.A)(e.supply).toFixed(4,1)).times(100),i=(0,c.mY)(a,2,{miniText:"0.01"})+"%",r=(0,c.mY)(100*e.base,2,{round:!0})+"%";return{...e,totalApy:a.valueOf(),value:a.valueOf(),trx1wEnergyShow:(0,c.mY)(100*e.trx1wEnergy,0,{miniText:"0.001"}),voteApyShow:n,supplyApyShow:s,totalApyShow:i,occupancyRateShow:r}}))}(this.props.dataList,e,s),p=function(e){let{theme:t,dataList:s,type:a,isMobile:n,labelStatus:i}=e;const o=s.map((e=>100*e.base)),c=s.map((e=>e.totalApy)),p=s.map((e=>100*e.trx1wEnergy)),h="white"===t,m="stake"===a,x=m?o.map(((e,t)=>[e,c[t]])):o.map(((e,t)=>[e,p[t]]));return{color:[{type:"linear",x:1,y:0,x2:0,y2:0,colorStops:m?[{offset:0,color:"#9195FB"},{offset:1,color:"#18C19F"}]:[{offset:0,color:"#1BDCB5"},{offset:1,color:"#5FD2EB"}],global:!1},{type:"linear",x:0,y:1,x2:0,y2:0,colorStops:m?[{offset:0,color:"rgba(29, 192, 163, 0)"},{offset:1,color:"rgba(146, 150, 251, 0.3)"}]:[{offset:0,color:"rgba(29, 192, 163, 0)"},{offset:1,color:"rgba(134, 255, 231, 0.3)"}],global:!1}],grid:{top:32,left:n?0:23,right:9,bottom:0,containLabel:!0},tooltip:{trigger:"axis",showContent:!0,extraCssText:"z-index: 999",position:n?["10%","20%"]:void 0,axisPointer:{type:"line",animation:!1,lineStyle:{color:h?"rgb(34, 35, 43, 0.4)":"rgba(255, 255, 255, 0.4)",type:"dashed",width:.5},label:{precision:2}},backgroundColor:h?"#ffffff":"#353745",borderWidth:"0",padding:0,textStyle:{color:"rgba(255,255,255,0.6)",fontFamily:"PingFang SC",fontSize:"14px"},formatter:function(e){const t=s[e[0].dataIndex];return"stake"===a?`<div class="tooltip">\n        <header class="header item color-primary">\n          <span class="title">${r.Ay.get("strx.stake_staking_apy")}</span>\n          <span class="value">${t.totalApyShow}</span>\n        </header>\n        <div class="item">\n          <span class="title color-light">${r.Ay.get("strx.energy_rental")} APY</span>\n          <span class="value value-wrap">\n            <span class="num purple">${t.supplyApyShow}</span>\n            <span class="color-light value-extra">\n              <span class="">(${r.Ay.get("strx.stake_data_energy_renting_rate",{value:""})} </span>&nbsp;<span class="num color-primary">${t.occupancyRateShow}</span>)\n            </span>\n          </span>\n        </div>\n        <div class="item">\n          <span class="title color-light">${r.Ay.get("strx.stake_data_voting_apy")}</span>\n          <span class="value">\n            <span class="green num">${t.voteApyShow}</span>\n          </span>\n        </div>\n      </div>`:`<div class="tooltip energy">\n        <div class="item">\n          <span class="title color-light">${r.Ay.get("strx.energy_rent_energy_price")}</span>\n          <span class="value value-wrap">\n            <span class="num green">${t.trx1wEnergyShow} sun/${r.Ay.get("strx.energy_day2")}</span>\n          </span>\n          <span class="color-light value-extra">\n              <span>(${r.Ay.get("strx.stake_data_energy_renting_rate",{value:""})} </span>&nbsp;<span class="num color-primary">${t.occupancyRateShow}</span>)\n          </span>\n        </div>\n      </div>`}},xAxis:{type:"value",data:o,boundaryGap:!1,axisLine:{show:!0,lineStyle:{color:h?"rgba(34,35,43,0.06)":"rgba(255,255,255,0.06)"}},axisLabel:{show:!0,color:h?"rgba(34,35,43,0.6)":"rgba(255,255,255,0.6)",margin:16,fontSize:10,align:"center",fontFamily:"Avenir Next",interval:(e,t)=>`${t}`.endsWith("0")},axisPointer:{value:s.findIndex((e=>e.current))||0,label:{show:i,formatter:function(e,t){return r.Ay.get("market.current")},backgroundColor:"transparent",color:h?"rgba(34, 0, 34, 0.6)":"rgba(255,255,255,0.6)"},handle:{show:i,color:"transparent"}},axisTick:{show:!1},splitLine:{show:!1},name:n?"":"X:",nameLocation:"start",nameGap:0,nameTextStyle:{color:h?"rgba(34,35,43,0.6)":"rgba(255,255,255,0.6)",fontSize:12,lineHeight:16,verticalAlign:"top",fontWeight:400,padding:n?[13,12,0,0]:m?[35,16,0,0]:[12,16,0,0]}},yAxis:{type:"value",splitNumber:4,name:n?"":"Y:",nameLocation:"end",nameGap:55,nameTextStyle:{color:h?"rgba(34,35,43,0.6)":"rgba(255,255,255,0.6)",fontSize:12,lineHeight:16,verticalAlign:"top",fontWeight:400,padding:n?[13,12,0,0]:m?[10,50,0,0]:[30,80,0,0]},axisLabel:{show:!0,color:h?"rgba(34,35,43, 0.6)":"rgba(255,255,255,0.6)",margin:n?12:20,fontSize:10,verticalAlign:"middle",fontFamily:"Avenir Next",formatter:e=>m?(0,l.ZV)(e,0):(0,d.A)(e).lte(0)?0:(0,l.ZV)(e,3,{cutZero:!0})},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{color:h?"rgba(34,35,43,0.06)":"rgba(255,255,255,0.06)"}}},series:[{data:x,type:"line",areaStyle:{color:"transparent"},lineStyle:{width:3},itemStyle:{normal:{opacity:0,lineStyle:{width:3}},emphasis:{opacity:1,shadowOffsetX:2,shadowOffsetY:2,color:m?"#9195FB":"#18C19F",borderColor:"#ffffff",borderWidth:3,shadowBlur:2,shadowColor:"rgba(0, 0, 0, 0.1)"}},symbolSize:6},{data:x,type:"line",lineStyle:{color:"transparent"},areaStyle:{},itemStyle:{show:!1,normal:{opacity:0},emphasis:{opacity:0}}}]}}({theme:a,dataList:o,type:t,isMobile:n,labelStatus:i});return p}render(){const{mobile:e}=this.state;return(0,p.jsx)("div",{className:"chart",onMouseOut:this.onChartMouseout,onMouseOver:this.onChartMouseover,children:(0,p.jsx)(o.A,{option:this.getEchartsOption(),ref:this.initRef,style:{height:194},className:"",onChartReady:this.onChartReady})})}})||a)||a;var m;let x=(0,i.WQ)("network")(m=(0,i.WQ)("lend")(m=(0,i.WQ)("system")(m=(0,i.WQ)("pool")(m=(0,i.WQ)("strx")(m=(0,i.PA)(m=class extends n.Component{constructor(e){super(e),this.onReverseRate=()=>{const{reverseRate:e}=this.state;this.setState({reverseRate:!e}),window.gtag("event","PC_stake_reverse_rate",{event_category:"sTRX",event_label:"stake_reverse_rate"})},this.state={mobile:(0,l.Fr)().any,reverseRate:!1}}renderStakeMarket(){const{data:e}=this.props,{reverseRate:t}=this.state;return(0,p.jsxs)("div",{className:"data-wrap color-primary",children:[(0,p.jsxs)("div",{className:"summary",children:[(0,p.jsx)("span",{className:"title",children:r.Ay.get("strx.stake_data_total_staked")}),(0,p.jsxs)("div",{className:"value",children:[(0,p.jsx)("span",{className:"num",children:(0,l.ZV)(e.totalDeposits,0,{miniText:"1"})}),(0,p.jsx)("span",{className:"postfix",children:"TRX"})]})]}),(0,p.jsx)("div",{className:"divider-h"}),(0,p.jsxs)("div",{className:"info-wrap",children:[(0,p.jsxs)("div",{className:"info-item",children:[(0,p.jsx)("span",{className:"title color-light",children:r.Ay.get("strx.stake_data_stakers")}),(0,p.jsx)("span",{className:"value",children:(0,l.ZV)(e.depositsHeadCounts,!1)})]}),(0,p.jsxs)("div",{className:"info-item",children:[(0,p.jsx)("span",{className:"title color-light",children:r.Ay.get("strx.stake_data_ratio")}),(0,p.jsxs)("span",{className:"value exchange",children:[t?(0,p.jsxs)("span",{children:["1 sTRX = ",(0,l.ZV)(e.trx1sTrx,6)," TRX"]}):(0,p.jsxs)("span",{children:["1 TRX = ",(0,l.ZV)(e.sTrx1Trx,6)," sTRX"]}),(0,p.jsx)("span",{className:"icon",onClick:this.onReverseRate})]})]}),(0,p.jsxs)("div",{className:"info-item",children:[(0,p.jsx)("span",{className:"title color-light",children:r.Ay.get("strx.stake_data_strx_supply")}),(0,p.jsx)("span",{className:"value",children:(0,l.ZV)(e.totalSupply,0,{miniText:"1"})})]})]})]})}renderEnergy(){const{data:e}=this.props,{maxRentableOfType:t}=this.props.strx;return(0,p.jsxs)("div",{className:"data-wrap color-primary energy-data",children:[(0,p.jsxs)("div",{className:"summary",children:[(0,p.jsx)("span",{className:"title",children:r.Ay.get("strx.energy_rent_energy_price")}),(0,p.jsxs)("div",{className:"value",children:[(0,p.jsx)("span",{className:"num",children:(0,l.ZV)(100*e.trx1wEnergy,0,{miniText:"0.001"})}),(0,p.jsxs)("span",{className:"postfix",children:["sun/",r.Ay.get("strx.energy_day2")]})]}),(0,p.jsx)("div",{className:"sumary-tip color-light",children:r.Ay.get("strx.energy_rent_price")})]}),(0,p.jsx)("div",{className:"divider-h"}),(0,p.jsxs)("div",{className:"info-wrap",children:[(0,p.jsxs)("div",{className:"info-item",children:[(0,p.jsx)("div",{className:"title",children:r.Ay.get("strx.energy_total_resource")}),(0,p.jsxs)("div",{className:"value",children:[(0,p.jsx)("span",{className:"num",children:(0,l.ZV)((0,d.A)(e.totalUnfreezableEnergy).plus(e.totalDelegatedEnergy).times(e.energyStakePerTrx),0)}),(0,p.jsx)("span",{className:"postfix",children:r.Ay.get("strx.energy_energy")})]})]}),(0,p.jsxs)("div",{className:"info-item",children:[(0,p.jsx)("div",{className:"title",children:r.Ay.get("strx.energy_available_rental")}),(0,p.jsxs)("div",{className:"value",children:[(0,p.jsx)("span",{className:"num",children:(0,l.ZV)((0,d.A)(e.energyStakePerTrx).times(t),0)}),(0,p.jsx)("span",{className:"postfix",children:r.Ay.get("strx.energy_energy")})]})]})]})]})}render(){const{lang:e}=this.props.lend,{data:t,type:s}=this.props,a="stake"===s;return a?(0,p.jsxs)("div",{className:`market-data stake ${e}`,children:[(0,p.jsxs)("div",{className:"section-title color-primary",children:[(0,p.jsx)("span",{className:`${s} decoration`}),(0,p.jsx)("span",{children:r.Ay.get("strx.stake_data_modal_data")})]}),(0,p.jsx)("div",{className:"market-data-section stake",children:this.renderStakeMarket()})]}):(0,p.jsxs)("div",{className:`market-data ${e}`,children:[(0,p.jsxs)("div",{className:"section-title color-primary",children:[(0,p.jsx)("span",{className:`${s} decoration`}),(0,p.jsx)("span",{children:r.Ay.get("strx.energy_market_data")})]}),(0,p.jsxs)("div",{className:"market-data-section column",children:[this.renderEnergy(),(0,p.jsx)("div",{className:"divider-v"}),(0,p.jsxs)("div",{className:"chart-wrap "+(a?"stake":"energy"),children:[(0,p.jsxs)("div",{className:"title-wrap",children:[(0,p.jsx)("span",{className:"title color-primary",children:a?r.Ay.get("strx.stake_data_staking_apy_modal"):r.Ay.get("strx.energy_rent_price_model")}),(0,p.jsxs)("span",{className:"desc color-light",children:[(0,p.jsx)("span",{className:"desc",children:r.Ay.get("strx.stake_data_energy_renting_apy")}),(0,p.jsx)("span",{className:"y desc",children:a?"Y: APY (%)":`Y: ${r.Ay.get("strx.energy_rent_energy_price")} (sun/${r.Ay.get("strx.energy_day2")})`})]})]}),(0,p.jsx)(h,{dataList:t.model,voteApy:t.voteApy,type:s,totalApy:t.totalApy})]})]})]})}})||m)||m)||m)||m)||m)||m},47767:()=>{},65115:()=>{},65627:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});s(76998);const a=s.p+"static/media/donut-default.46f3753b5c55611d30de093c9112a49c.svg"},73185:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});s(76998);const a=s.p+"static/media/modal-close.0d98c4ac7cdae154a83275ce568ae770.svg"},79467:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});s(76998);const a=s.p+"static/media/white-close.20ac85ccaf58ba4694de056df04e78c8.svg"}}]);