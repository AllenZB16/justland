"use strict";(self.webpackChunkjustlend_front=self.webpackChunkjustlend_front||[]).push([[373],{5373:(e,t,s)=>{s.r(t),s.d(t,{default:()=>F});var n,r=s(76998),a=s(68111),i=s(96843),l=s(59866),o=s(98859),c=s(25443),d=s.n(c),g=s(93995),m=s(19523),p=s(13412),u=s(26559),h=s(65506),y=s(67441),x=s(40437),v=s(33270),_=s(48634),j=(s(83933),s(95889),s(75659)),A=s(23446);let w=(0,o.WQ)("network")(n=(0,o.WQ)("lend")(n=(0,o.WQ)("system")(n=(0,o.WQ)("pool")(n=(0,o.WQ)("strx")(n=(0,o.PA)(n=class extends r.Component{constructor(){super(),this.close=()=>{this.props.system.clearRejectError(),this.props.strx.setData({returnResourceVisible:!1})},this.returnResource=async()=>{try{if(window.gtag("event","PC_energy_return_confirm",{event_category:"sTRX",event_label:"energy_return_confirm"}),0===this.props.network.isRightChain)return void this.props.network.changeChain();this.props.system.clearRejectError();const{rentBalance:e,energyFee:t,getEnergyFee:s,returnRentInfo:n}=this.props.strx;let r=(0,v.gH)(n.unrecoveredEnergyAmount).plus(1e4),a=(0,v.gH)(n.dailyRent).times((0,v.gH)(r).div(n.rentAmount)).times(.5),i=(0,v.gH)(n.rentRemain).plus(n.securityDeposit).minus(a);const l={title:"v2.transaction_confirm",title2:"deposit.transactionsent",title3:"v2.transaction_confirm_fail",title4:"deposit.confirm_transaction",obj:{value:(0,v.ZV)(i,6,{miniText:"0.000001"}),token:"TRX"},transType:"returnResource"};let o=j.Ay.feeLimitForReturnResourceDefault;const c=await this.props.system.getReturnRentFeeLimit(window.defaultAccount,(0,v.gH)(e).times(j.Ay.trxPrecision)._toFixed(0,1),1);let d=t||await s();if(!(0,v.gH)(d).isNaN()&&!(0,v.gH)(c).isNaN()){o=(0,v.gH)((0,v.gH)(c).times(d).div(1e6)._toFixed(0,1)).plus(5).times(j.Ay.trxPrecision).toNumber()}this.setState({approving:!0});await this.props.system.returnResource(window.defaultAccount,(0,v.gH)(e).times(j.Ay.trxPrecision)._toFixed(0,1),1,(0,v.gH)(o),l)&&(this.props.callback(),this.close(),window.gtag("event","PC_energy_return_confirm_success",{event_category:"sTRX",event_label:"energy_return_confirm_success"}),setTimeout((()=>{this.props.strx.getUserTrxBalance(),this.props.strx.getAccountRentInfos(),this.props.strx.getNotAccountRentInfos()}),5e3)),this.setState({approving:!1})}catch(e){console.log("error: returnSource")}},this.state={lang:window.localStorage.getItem("lang")||i.Ay.options.currentLocale,approving:!1,mobile:(0,l.A)(window.navigator).any}}componentDidMount(){}render(){const{transModalInfo:e}=this.props.system,{transType:t,declined:s}=e,{theme:n}=this.props.lend,{returnResourceVisible:r,securityDeposit:a,returnResourceEnergy:l,returnRentInfo:o}=this.props.strx,{approving:c,lang:d,mobile:g}=((0,v.gH)(l).gt(a)?(0,v.gH)(l).minus(a):(0,v.gH)(a).minus(l),this.state),m=d&&d.includes("en")?"https://justlendorg.zendesk.com/hc/en-us/articles/16512503468057":"https://justlendorg.zendesk.com/hc/zh-cn/articles/16512503468057";let p=(0,v.gH)(o.unrecoveredEnergyAmount).plus(1e4),h=(0,v.gH)(o.dailyRent).times((0,v.gH)(p).div(o.rentAmount)).times(.5),y=(0,v.gH)(o.rentRemain).plus(o.securityDeposit);return h=(0,v.gH)(h).gt(y)?y:h,(0,A.jsx)(_.A,{title:i.Ay.get("strx.energy_end_rental2"),visible:r,closable:!0,icon:null,onCancel:()=>this.close(),footer:null,width:g?"calc(100% - 40px)":400,centered:!0,className:`j-modal j-return-resource-modal  header-border ${n} `,getContainer:()=>document.querySelector(".j-wrapper"),children:(0,A.jsxs)("div",{className:"return-resource",children:[(0,A.jsx)("div",{className:"return-icon"}),(0,A.jsx)("div",{className:"rs-title",children:i.Ay.get("strx.energy_end_tip0")}),(0,A.jsxs)("div",{className:"rs-info",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("div",{className:"rsi-title",children:i.Ay.get("strx.energy_deducted")}),(0,A.jsxs)("div",{className:"rsi-value",children:[(0,v.ZV)(o.rentAmount,0)," ",i.Ay.get("strx.energy_energy")]})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("div",{className:"rsi-title",children:i.Ay.get("strx.energy_asset_returned")}),(0,A.jsxs)("div",{className:"rsi-value flex items-center",children:["\u2248 ",(0,v.ZV)((0,v.gH)(o.rentRemain).plus(o.securityDeposit).minus(h),6)," TRX ",(0,A.jsx)(u.A,{title:(0,A.jsxs)("span",{children:[i.Ay.get("strx.energy_include_info",{value1:(0,v.ZV)(o.rentRemain,6),value2:(0,v.ZV)(o.securityDeposit,6)}),(0,A.jsxs)("a",{className:"learn-more",href:m,target:"_blank",rel:"noopener noreferrer",children:["\xa0\xa0",i.Ay.get("strx.energy_lerna_more2")]})]}),placement:"topRight",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown",children:(0,A.jsx)("span",{className:"j-tooltip-icon ml-4",onMouseEnter:()=>{window.gtag("event","PC_energy_return_hover",{event_category:"sTRX",event_label:"energy_return_hover"})}})})]})]})]}),c?(0,A.jsxs)("button",{className:"j-large-btn j-supply rent-now j-signing",disabled:!0,children:[i.Ay.get("v2.sign_in_wallet"),(0,A.jsx)("span",{className:"siging-icon"})]}):(0,A.jsx)("button",{className:"j-large-btn j-supply rent-now",onClick:()=>this.returnResource(),children:i.Ay.get("strx.energy_confirm_end")}),s&&"returnResource"===t&&(0,A.jsxs)("div",{className:"j-error-tip wallet-reject",children:[(0,A.jsx)("span",{className:"j-error-img"}),(0,A.jsx)("div",{children:i.Ay.get("v2.reject_in_wallet")})]})]})})}})||n)||n)||n)||n)||n)||n;const N=w;var f=s(70102),T=s(99861),b=s(42780),R=s(94709);const S=s.p+"static/media/notify.dd2c5e29c599a462fa5428dfc5128e11.svg";var k;const C=(0,o.WQ)("network")(k=(0,o.WQ)("lend")(k=(0,o.WQ)("strx")(k=(0,o.PA)(k=class extends r.Component{constructor(e){var t;super(),this.getAnnouncementUrl=()=>{const{lang:e}=this.state;return e&&e.includes("en")?"https://support.justlend.org/hc/en-us/articles/19326031593497":"https://support.justlend.org/hc/zh-cn/articles/19326031593497"},this.state={lang:(null===(t=(0,v.Sp)())||void 0===t?void 0:t.lang)||window.localStorage.getItem("lang")||i.Ay.options.currentLocale,mobile:(0,l.A)(window.navigator).any}}render(){const{userData:e,multiRewardData:t,totalReward:s}=this.props.strx,{isConnected:n}=this.props.network,{rewardMap:r}=e,a=n&&((0,v.gH)(r.gainNew).gt(0)||Object.keys(t).length>0||(0,v.gH)(r.gainLast).gt(0)&&"2"==r.miningStatus),l=n&&((0,v.gH)(r.gainNew).gt(0)||(0,v.gH)(r.gainLast).gt(0)&&"2"==r.miningStatus),o="1"==r.currRewardStatus&&"2"==r.miningStatus,c=(0,v.ZV)(r.gainNew,6,{miniText:"0.000001"}),d=(0,v.ZV)(r.gainLast,6,{miniText:"0.000001"}),g=(0,v.gH)(r.gainNew).gt(0)?(0,v.ZV)((0,v.gH)(r.gainNew).plus(s),6,{miniText:"0.000001"}):(0,v.ZV)((0,v.gH)(s),6,{miniText:"0.000001"}),m=(0,v.gH)(r.gainLast).gt(0)?(0,v.ZV)((0,v.gH)(r.gainLast).plus(s),6,{miniText:"0.000001"}):(0,v.ZV)((0,v.gH)(s),6,{miniText:"0.000001"});return(0,A.jsxs)("div",{className:"energy-subsidy"+(a?" unclaim":" ")+("2"==r.currRewardStatus?" status":""),children:[(0,A.jsxs)("div",{className:"flexA",children:[(0,A.jsx)("img",{alt:"",src:S,className:"notify"}),(0,A.jsx)("div",{className:"value",children:"--"===s||"--"===(null===r||void 0===r?void 0:r.gainNew)&&"--"===(null===r||void 0===r?void 0:r.gainLast)?"--":(0,v.gH)(s).gt(0)?l?(0,A.jsx)(u.A,{title:i.Ay.get("strx.part_processing",{value:o?d:c}),placement:"top",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown",children:i.Ay.get("strx.tobe_claimed",{value:o?m:g})}):i.Ay.get("strx.tobe_claimed",{value:o?m:g}):l?i.Ay.get("strx.all_processing",{value:o?m:g}):0})]}),(0,A.jsx)("div",{className:"bottom",children:Object.keys(t).length>0?(0,A.jsx)("div",{className:"claim-btn",onClick:()=>{this.props.network.setData({allowanceVisible:!0}),window.gtag("event","subsidy_claim",{event_category:"sTRX",event_label:"subsidy_claim"})},children:i.Ay.get("strx.claime")}):(0,A.jsx)(u.A,{overlayClassName:"j-tooltip-dropdown",placement:"top",arrowPointAtCenter:!0,title:i.Ay.getHTML("v2.rewards.processing",{value:Number(r.currPhase)-1}),trigger:"['hover','click']",children:(0,A.jsx)("div",{className:"claim-btn disabled",children:i.Ay.get("strx.claime")})})})]})}})||k)||k)||k)||k;var V,D=s(25034),I=(s(47767),s(87980),s(95893),s(22172)),P=s(33635),E=s(12226);let M=(0,o.WQ)("network")(V=(0,o.WQ)("lend")(V=(0,o.WQ)("system")(V=(0,o.WQ)("pool")(V=(0,o.WQ)("strx")(V=(0,o.WQ)("energyRental")(V=(0,o.PA)(V=class extends r.Component{constructor(e){var t,s;super(e),t=this,this.componentDidMount=async()=>{window.localStorage.setItem("lastVisitEnergyRentalPage","energy"),await this.props.lend.getLatestBlockInfo(),this.props.strx.setVariablesInterval(),document.title="Energy Rental - JustLend DAO",window.gtag("event","PC_page_energy",{event_category:"sTRX",event_label:"page_energy"}),window.gtag("event","energyrent_old_PV",{event_category:"energyrent",event_label:"energyrent_old_PV"}),window.gtag("event","energyrent_old_UV",{event_category:"energyrent",event_label:"energyrent_old_UV"});const{isConnected:e}=this.props.network;e?this.props.energyRental.getMiniOrderList():this.props.network.on("connect",(async()=>{this.props.energyRental.getMiniOrderList()}))},this.getUserData=async()=>{await this.props.strx.getUserTrxBalance(),await this.props.strx.getAccountRentInfos(),await this.props.strx.getMultiReward(),await this.props.strx.getUserData(),await this.props.strx.getReturnRentInfo(),this.props.network.on("connect",(async()=>{await this.props.strx.getUserTrxBalance(),await this.props.strx.getAccountRentInfos(),await this.props.strx.getMultiReward(),await this.props.strx.getUserData(),await this.props.strx.getReturnRentInfo(),await this.getEnergyUsed()})),this.props.network.on("chainChanged",(async()=>{await this.props.strx.getUserTrxBalance(),await this.props.strx.getAccountRentInfos(),await this.props.strx.getMultiReward(),await this.props.strx.getUserData(),await this.props.strx.getNotAccountRentInfos(),await this.props.strx.getReturnRentInfo(),await this.getEnergyUsed()}))},this.initForm=()=>{this.setState({rentAmountsEnergyInputValue:"",rentAmountsStakeInputValue:"",rentWaysTimeInputValue:"",rentWaysRentInputValue:""})},this.getEnergyUsed=async()=>{try{const e=this.energyToTrx(),{needToPayTrx:t}=this.getDynamicInfos(e,(0,I.A)(1).times(86400),"notLogin"),s=await this.props.system.getRentFeeLimit(window.defaultAccount||"TVNevinkBb9JytBHhK2ZMsnWX5sWqJu9fx",(0,I.A)(e).times(j.TS.trxPrecision)._toFixed(0,1),1,(0,I.A)(t).times(j.TS.trxPrecision)._toFixed(0,1));this.setState({energyUsed:s})}catch(e){console.log("error: getEnergyUsed")}},this.getMarketData=async()=>{try{this.props.strx.getMarketData(),await this.props.strx.getNotAccountRentInfos(),await this.getEnergyUsed();let e=this.timeToRent("",!0);this.setState({defaultRent:e})}catch(e){console.log("error: getMarketData")}},this.getAnnouncementUrl=()=>{const{lang:e}=this.state,t=e&&e.includes("en")?"https://justlendorg.zendesk.com/hc/en-us/articles/17080698112537":"https://justlendorg.zendesk.com/hc/zh-cn/articles/17080698112537";return j.TS.nile?t:"https://support.justlend.org/hc/en-us/articles/32539144305305"},this.getLearnUrl=()=>{const{lang:e}=this.state,t=e&&e.includes("en")?"https://justlendorg.zendesk.com/hc/en-us/articles/16512503468057":"https://justlendorg.zendesk.com/hc/zh-cn/articles/16512503468057",s=e&&e.includes("en")?"https://justlendorg.zendesk.com/hc/en-us/articles/17526112107417":"https://justlendorg.zendesk.com/hc/zh-cn/articles/17526112107417";return j.TS.nile?t:s},this.tutorialUrl=()=>{const{lang:e}=this.state;return e.includes("en")?"https://justlendorg.zendesk.com/hc/en-us/articles/18581604307737":"https://justlendorg.zendesk.com/hc/zh-cn/articles/18581604307737"},this.subsidyUrl=()=>{const{lang:e}=this.state;return e.includes("en")?"https://support.justlend.org/hc/en-us/articles/19326031593497":"https://support.justlend.org/hc/zh-cn/articles/19326031593497"},this.getOfferUrl=()=>{const{lang:e}=this.state;return e&&e.includes("en")?"https://justlendorg.zendesk.com/hc/en-us/articles/18496749460377":"https://justlendorg.zendesk.com/hc/zh-cn/articles/18496749460377"},this.getDefaultEnergyValue=()=>(0,I.A)(this.props.strx.rentBalance).gt(0)?j.TS.energyRental.renewOrderDefaultEnergyValue:j.TS.energyRental.newOrderDefaultEnergyValue,this.getCurrentInfos=()=>{try{const{rentBalance:e,securityDeposit:t,feeRatio:s,minFee:n,liquidateThreshold:r,basicRate:a}=this.props.strx;let i=Math.max(n,(0,I.A)((0,I.A)(e).times(s))),l=(0,I.A)(e).times(a).times((0,I.A)(86400).plus(r)),o=(0,I.A)(l).plus(i).minus(t),c=(0,I.A)(e).times(a).times(86400),d=(0,I.A)((0,I.A)(t).minus(i).minus(l)).div((0,I.A)(e).times(a)).times(1e3),g=(new Date).getTime();return{fee:i,rentMoney:l,needToPayTrx:o,rentPerDay:c,rentDaysLeft:(0,I.A)(Math.abs(d)).plus(g),rentDaysLeftTrue:(0,I.A)(d).plus(g),rentDaysLeftSecs:(0,I.A)(Math.abs(d)).div(1e3)}}catch(e){console.log("error: getCurrentInfos")}},this.getDynamicInfos=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;try{const{rentBalance:r,securityDeposit:a,feeRatio:i,minFee:l,liquidateThreshold:o,rate:c,basicRate:d}=t.props.strx,{rentDaysLeftSecs:g}=t.getCurrentInfos();let m=Math.max(l,(0,I.A)(e).times(i)),p=(0,I.A)(e).times(c).times((0,I.A)(86400).plus(o)),u=0;if("addEnergy"===n){p=(0,I.A)(e).minus(r).times(c).times((0,I.A)(g));let t=(0,I.A)(e).times(c).times((0,I.A)(g).plus(86400).plus(o));u=(0,I.A)(t).plus(m).minus(a)}else if("addTime"===n)u=(0,I.A)(r).times(d).times(s);else if("notLogin"===n){let t=(0,I.A)(e).times(c).times((0,I.A)(s).plus(86400).plus(o));u=(0,I.A)(t).plus(m)}let h=(0,I.A)(e).times(c).times(86400),y=(0,I.A)((0,I.A)(a).minus(m).minus(p)).div((0,I.A)(e).times(c)).times(1e3);return{fee:m,rentMoney:p,needToPayTrx:u,rentPerDay:h,rentDaysLeft:(0,I.A)(y).plus((new Date).getTime())}}catch(r){console.log("error: getDynamicInfos")}},this.rentToTime=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.state.rentWaysRentInputValue,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;try{const{rentBalance:r,securityDeposit:a,feeRatio:i,minFee:l,liquidateThreshold:o,rate:c,basicRate:d}=t.props.strx;let g=0,m="--";if(!(0,I.A)(c).isNaN()){if((0,I.A)(r).gt(0))g=(0,I.A)(e).div(r).div(d);else{const{rentAmountsStakeInputValue:s}=t.state;let n=Math.max(l,(0,I.A)(s||t.energyToTrx()).times(i)),r=(0,I.A)(e).plus(a).minus(n);g=(0,I.A)(r).div(s||t.energyToTrx()).div(c).minus(o).minus(86400)}const{isExpired:s}=t.judgeExpiredClear(),{rentDaysLeft:n}=t.getCurrentInfos();s&&(g=(0,I.A)(g).minus((0,I.A)(n).minus((new Date).getTime()).div(1e3))),m=(0,I.A)(g).div(86400)._toFixed(1,1),(0,I.A)(m).gt(0)||(m=0)}if(s)return m;t.setState({rentWaysTimeInputValue:!n&&(0,I.A)(m).eq(1)?"":m})}catch(r){console.log("error: rentToTime")}},this.timeToRent=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.state.rentWaysTimeInputValue,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{const{rentBalance:n}=t.props.strx,{rentAmountsEnergyInputValue:r,rentAmountsStakeInputValue:a}=t.state,i=e||1,l=a||t.energyToTrx(),{isExpired:o}=t.judgeExpiredClear(),{rentDaysLeft:c}=t.getCurrentInfos();let d=0;if((0,I.A)(n).gt(0)){const e=o?(0,I.A)(c).minus((new Date).getTime()).plus((0,I.A)(i).times(864e5)).div(1e3):(0,I.A)(i).times(86400);d=t.getDynamicInfos(0,e,"addTime").needToPayTrx}else{d=t.getDynamicInfos(l,(0,I.A)(i).times(86400),"notLogin").needToPayTrx}if(s)return d;t.setState({rentWaysRentInputValue:(0,I.A)(d).isNaN()||!t.state.rentWaysTimeInputValue&&(0,I.A)(d).eq(t.state.defaultRent)?"":(0,I.A)(d)._toFixed(j.TS.trxDecimal,1)})}catch(n){console.log("error: timeToRent")}},this.trxMax=()=>{try{this.props.system.clearRejectError();const{isConnected:e}=this.props.network;if(!e)return this.props.network.connectWalletV2();window.gtag("event","PC_energy_trx_max",{event_category:"sTRX",event_label:"energy_trx_max"});let{trxBalance:t}=this.props.strx;t=(0,I.A)(t).div(j.TS.trxPrecision);const s=this.rentToTime(t,!0);let n=this.state.rentDaysArray[1];(0,I.A)(s).gt(n)?(this.timeToRent(n),this.setState({rentWaysTimeInputValue:n})):(this.timeToRent(s),this.setState({rentWaysTimeInputValue:s,rentWaysRentInputValue:t})),setTimeout((()=>{this.rentWaysRentInputValid()}))}catch(e){console.log("error: trxMax")}},this.timeMax=()=>{try{this.props.system.clearRejectError();const{isConnected:e}=this.props.network;if(!e)return this.props.network.connectWalletV2();let{trxBalance:t}=this.props.strx;t=(0,I.A)(t).div(j.TS.trxPrecision);const s=this.rentToTime(t,!0);let n=this.state.rentDaysArray[1];(0,I.A)(s).gt(n)?this.setState({rentWaysTimeInputValue:n}):this.rentToTime(t),setTimeout((()=>{this.rentWaysTimeInputValid()})),window.gtag("event","PC_energy_time_max",{event_category:"sTRX",event_label:"energy_time_max"})}catch(e){console.log("error: timeMax")}},this.returnRuleTipRender=()=>{const e=this.getLearnUrl();return(0,A.jsxs)("div",{className:"return-rule-tip",children:[(0,A.jsx)("span",{className:"return-rule-tip-text",children:i.Ay.get("strx.return_rule_tip")}),(0,A.jsx)(E.z,{className:"learn-more learn-more-btn",href:e,target:"_blank",rel:"noopener noreferrer",onClick:()=>{window.gtag("event","PC_energy_fee_compute_rule",{event_category:"sTRX",event_label:"energy_fee_compute_rule"})},children:i.Ay.get("strx.learn_more")})]})},this.energyInfoRender=()=>{let{trxBalance:e}=this.props.strx;e=(0,I.A)(e).div(j.TS.trxPrecision);const{rentWaysTimeInputValue:t,rentAmountsStakeInputValue:s,rentWaysRentInputValue:n,rentWaysSelectValue:r,defaultRent:a}=this.state,{maxRentableOfType:l,marketData:o}=this.props.strx,{lang:c,theme:d}=this.props.lend;let g=t||1,m=n||a,p=s||this.energyToTrx();const{rentMoney:h,fee:y,needToPayTrx:x}=this.getDynamicInfos(p,(0,I.A)(g).times(86400),"notLogin"),_="3"===r?m:x;return(0,A.jsxs)("div",{className:"energy-info energy-info-item",children:[(0,A.jsxs)("div",{className:`info-subtitle flex ${c}`,children:[i.Ay.get("strx.total_prepayment"),(0,A.jsx)("br",{}),i.Ay.get("strx.return_early")]}),(0,A.jsx)("div",{className:"pay-amount-sub ellipsis dashed pay-amount-sub-calc",children:(0,A.jsxs)(u.A,{width:"314",title:(0,A.jsxs)("div",{className:"rent-fee-detail",children:[(0,A.jsxs)("div",{className:"flexB flexA rent-fee-detail-item",children:[(0,A.jsx)("div",{className:"name",children:i.Ay.get("strx.energy_prepay_tips1")}),(0,A.jsxs)("div",{className:"value ellipsis",children:[(0,I.A)(_).minus(h).minus(y).eq(0)?0:(0,v.ZV)((0,I.A)(_).minus(h).minus(y),j.TS.trxDecimal)," ","TRX"]})]}),(0,A.jsxs)("div",{className:"flexB flexA rent-fee-detail-item",children:[(0,A.jsx)("div",{className:"name",children:i.Ay.get("strx.energy_rent_money_tips1")}),(0,A.jsxs)("div",{className:"value ellipsis",children:[(0,I.A)(h).plus(y).eq(0)?0:(0,v.ZV)((0,I.A)(h).plus(y),j.TS.trxDecimal)," ","TRX"]})]}),this.returnRuleTipRender()]}),placement:"bottomRight",arrowPointAtCenter:!0,getPopupContainer:()=>document.body.querySelector(".rent-content"),overlayClassName:"j-tooltip-dropdown triangle-icon w314 pay-amount-sub-arrow",onMouseEnter:()=>{try{setTimeout((()=>{const e=document.querySelector(".pay-amount-sub-calc").offsetWidth/2;document.querySelector(".pay-amount-sub-arrow .ant-tooltip-arrow").style.right=e+8+"px"}),200)}catch(e){}},children:[(0,v.ZV)(_,j.TS.trxDecimal)," TRX"]})})]})},this.energyTransactionUsedEnergyRender=()=>{let{trxBalance:e,energyHold:t,energyDependingValue:s}=this.props.strx;e=(0,I.A)(e).div(j.TS.trxPrecision);const{energyUsed:n,mobile:r}=this.state,a=(0,I.A)((0,I.A)(n).div(1e3)._toFixed(0,1)).plus(1).div(10),{lang:l}=this.props.lend;this.getOfferUrl();return(0,A.jsxs)("div",{className:"energy-info energy-info-item",children:[(0,A.jsx)("div",{className:`info-subtitle flex ${l} energy-consumed aic`,children:(0,A.jsx)("span",{className:"",children:i.Ay.get("strx.energy_transaction_used_energy")})}),(0,A.jsx)("div",{className:"pay-amount-sub ellipsis flex aic",children:(0,I.A)(t).gte(s)?!(0,I.A)(e).isNaN()&&(0,I.A)(e).lt(110)?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{className:"energy-used-ignore",children:"\u2248 85.8K"}),(0,A.jsx)("div",{className:"energy-used",children:"\u2248 8.6K"}),(0,A.jsx)("div",{className:"energy-used-unit",children:i.Ay.get("strx.energy_energy")})]}):(0,I.A)(n).isNaN()?(0,A.jsx)("div",{className:"energy-used",children:i.Ay.get("strx.energy_computing")}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:"energy-used-ignore",children:["\u2248 ",(0,v.ZV)((0,I.A)(n).div(1e3),1),"K"]}),(0,A.jsxs)("div",{className:"energy-used",children:["\u2248 ",(0,v.ZV)(a,1),"K"]}),(0,A.jsx)("div",{className:"energy-used-unit",children:i.Ay.get("strx.energy_energy")})]}):!(0,I.A)(e).isNaN()&&(0,I.A)(e).lt(110)?(0,A.jsx)(A.Fragment,{children:(0,A.jsx)("div",{className:"energy-used",children:"\u2248 85.8K"})}):(0,I.A)(n).isNaN()?(0,A.jsx)("div",{className:"energy-used",children:i.Ay.get("strx.energy_computing")}):(0,A.jsxs)("div",{className:"energy-used",children:["\u2248",(0,v.ZV)((0,I.A)(n).div(1e3),1),"K"]})})]})},this.energyUsedTipRender=()=>{const{energyHold:e,energyDependingValue:t}=this.props.strx;return(0,I.A)(e).isNaN()?(0,A.jsx)("div",{className:"j-important-tip"}):(0,A.jsxs)("div",{className:"j-important-tip",children:[(0,A.jsx)("span",{}),(0,I.A)(e).gte(t)?(0,A.jsxs)("span",{children:[(0,A.jsx)("span",{className:"mr-6",children:i.Ay.get("strx.energy_used_tip")}),(0,A.jsx)(E.z,{className:"learn-more",href:this.tutorialUrl(),target:"_blank",rel:"noopener noreferrer",children:i.Ay.get("strx.energy_used_tip_link")})]}):(0,A.jsx)("span",{className:"energy-used-tip",children:i.Ay.get("strx.energy_used_tip_new")})]})},this.rentInfoNotLogin=()=>{const{marketData:e,userData:t,multiRewardData:s}=this.props.strx,{isConnected:n}=this.props.network,{lang:r}=this.state,{rewardMap:a}=t,l=n&&((0,I.A)(a.gainNew).gt(0)||Object.keys(s).length>0||(0,I.A)(a.gainLast).gt(0)&&"2"==a.miningStatus);return(0,A.jsxs)("div",{className:"my-rent-info not-login-info",children:[(0,A.jsxs)("div",{className:"rent-info-top",children:[(0,A.jsxs)("div",{className:"rent-info-content",children:[(0,A.jsx)("div",{className:"rent-info-title",children:i.Ay.get("strx.energy_rent_10w_per_day")}),(0,A.jsxs)("div",{className:"rent-energy-amount",children:[(0,A.jsx)("span",{className:"equal-alike",children:"\u2248 "}),(0,A.jsx)("span",{className:"rent-amount",children:(0,v.ZV)((0,I.A)(e.trx1wEnergy).times(10),3,{miniText:"0.001"})})," ",(0,A.jsxs)("span",{className:"rent-unit",children:["TRX/",i.Ay.get("strx.energy_day2")]})]})]}),(0,A.jsx)("div",{className:"rent-info-icon"+("en-US"===r?" en":"")})]}),l&&(0,A.jsx)(C,{}),(0,A.jsxs)("div",{className:"energy-info not-login-info "+(l?" unclaim":""),children:[(0,A.jsx)("div",{className:"energy-info-top",children:i.Ay.get("strx.energy_get_same_energy")}),(0,A.jsxs)("div",{className:"energy-info-content",children:[(0,A.jsxs)("div",{className:"need-stake",children:[(0,A.jsx)("div",{className:"icon"}),(0,A.jsx)("div",{className:"title",children:i.Ay.get("strx.energy_need_stake_trx")}),(0,A.jsxs)("div",{className:"value",children:[(0,v.ZV)((0,I.A)(1e5).div(e.energyStakePerTrx),0,{miniText:"1"}),(0,A.jsx)("span",{children:"TRX"})]})]}),(0,A.jsxs)("div",{className:"need-burn",children:[(0,A.jsx)("div",{className:"icon"}),(0,A.jsx)("div",{className:"title",children:i.Ay.get("strx.energy_need_burn_trx")}),(0,A.jsxs)("div",{className:"value",children:[(0,v.ZV)((0,I.A)(1e5).div(e.energyBurnPerTrx),3,{miniText:"0.001"}),(0,A.jsx)("span",{children:"TRX"})]})]})]})]})]})},this.rentFormNotLogin=()=>{const{isConnected:e}=this.props.network;let{trxBalance:t}=this.props.strx;t=(0,I.A)(t).div(j.TS.trxPrecision);const{approving:s,rentWaysTimeInputValue:n,rentAmountsEnergyInputValue:r,rentAmountsStakeInputValue:a,rentWaysRentInputValue:l,rentWaysSelectValue:o,defaultRent:c,showBalanceError:d,energyUsed:g,mobile:m}=this.state,{maxRentableOfType:p,marketData:h}=this.props.strx,{energyStakePerTrx:y}=h,{lang:x,theme:_}=this.props.lend;(0,I.A)((0,I.A)(g).div(1e3)._toFixed(0,1)).plus(1).div(10);let w=n||1,N=l||c,f=a||this.energyToTrx();const{rentMoney:T,fee:b,needToPayTrx:R}=this.getDynamicInfos(f,(0,I.A)(w).times(86400),"notLogin"),S="3"===o?N:R,{transModalInfo:k}=(this.getLearnUrl(),this.getOfferUrl(),this.props.system),{declined:C,transType:V}=k,D=p,P=(0,I.A)(D).times(y),E=(0,I.A)(1e5);return(0,A.jsxs)("div",{className:"rent-form "+(j.TS.winterThemeVisible?"snow-ele-top":""),children:[(0,A.jsx)("div",{className:"rent-form-tabs rent",children:(0,A.jsx)("span",{className:"single-tab",children:i.Ay.get("strx.energy_rent_energy")})}),(0,A.jsxs)("div",{className:"rent-content",children:[this.rentAmountsRender("1"),this.rentWaysRender("1"),(0,A.jsxs)("div",{className:"energy-infos energy-infos-new mt20",children:[this.energyInfoRender(),this.energyTransactionUsedEnergyRender()]}),this.energyUsedTipRender(),s?(0,A.jsxs)("button",{className:"j-large-btn j-supply rent-now j-signing energy_config_extend",disabled:!0,children:[i.Ay.get("v2.sign_in_wallet"),(0,A.jsx)("span",{className:"siging-icon"})]}):e?(0,A.jsx)("button",{className:"j-large-btn j-supply rent-now gas-less-btn",disabled:((0,I.A)(P).lt(E)||this.state.rentAmountsErrorMsg||this.state.rentWaysErrorMsg&&!["-1","-2","-3"].includes(this.state.rentWaysErrorMsg)||(0,I.A)(S).gt(t))&&d,onClick:()=>this.rentResourceValid((0,I.A)(P).lt(E)||this.state.rentAmountsErrorMsg||this.state.rentWaysErrorMsg&&!["-1","-2","-3"].includes(this.state.rentWaysErrorMsg)||(0,I.A)(S).gt(t),f,S),children:i.Ay.get("strx.energy_rent_now")}):"disabled"===this.props.lend.serviceInnerStatus?(0,A.jsx)(u.A,{title:i.Ay.get("season.can_not_connect"),overlayClassName:"j-tooltip-dropdown season season-l "+_,arrowPointAtCenter:!0,placement:"bottom",getPopupContainer:()=>document.querySelector("#root .j-wrapper .j-large-btn.j-supply.gas-less-btn.season"),children:(0,A.jsx)("button",{className:"j-large-btn j-supply rent-now gas-less-btn connect season",onClick:()=>{this.props.lend.setData({noServiceModalAllVisible:!0})},children:i.Ay.get("strx.energy_connect_to_rent")})}):(0,A.jsx)("button",{className:"j-large-btn j-supply rent-now gas-less-btn connect",onClick:()=>{this.props.network.connectWalletV2(),window.gtag("event","PC_energy_connect_wallet",{event_category:"sTRX",event_label:"energy_connect_wallet"})},children:i.Ay.get("strx.energy_connect_to_rent")}),C&&"rentResource"===V&&(0,A.jsxs)("div",{className:"j-error-tip wallet-reject",children:[(0,A.jsx)("span",{className:"j-error-img"}),(0,A.jsx)("div",{children:i.Ay.get("v2.reject_in_wallet")})]}),(0,I.A)(S).gt(t)&&d&&(0,A.jsxs)("div",{className:"j-error-tip wallet-reject",children:[(0,A.jsx)("span",{className:"j-error-img"}),(0,A.jsx)("div",{children:i.Ay.getHTML("strx.energy_insufficient_balance",{value:(0,v.ZV)(t,j.TS.trxDecimal)})})]})]})]})},this.rentInfo=()=>{const{rentDaysLeftStatus:e,mobile:t,lang:s}=this.state,{securityDeposit:n,rentBalance:r,returnResourceEnergy:a,marketData:l,returnRentInfo:o}=this.props.strx,{fee:c,rate:g,rentPerDay:m,rentDaysLeft:p,rentMoney:y,rentDaysLeftTrue:x}=this.getCurrentInfos(),{days:_,hours:j,mins:w}=(0,v.zg)(p);this.getLearnUrl();let N=0;(0,I.A)(a).isNaN()||(N=(0,I.A)(a).gt(n)?(0,I.A)(a).minus(n):(0,I.A)(n).minus(a));(0,I.A)(y).plus(c).minus(N);const{userData:f,multiRewardData:T}=this.props.strx,{isConnected:b}=this.props.network,{rewardMap:R}=f,S=b&&((0,I.A)(R.gainNew).gt(0)||Object.keys(T).length>0||(0,I.A)(R.gainLast).gt(0)&&"2"==R.miningStatus);let k=(0,I.A)(o.unrecoveredEnergyAmount).plus(1e4),V=(0,I.A)(o.dailyRent).times((0,I.A)(k).div(o.rentAmount)).times(.5),D=(0,I.A)(o.rentRemain).plus(o.securityDeposit);return V=(0,I.A)(V).gt(D)?D:V,(0,A.jsxs)("div",{className:"my-rent-info login",children:[(0,A.jsxs)("div",{className:"rent-info-top",children:[(0,A.jsxs)("div",{className:"rent-info-content",children:[(0,A.jsx)("div",{className:"rent-info-title",children:i.Ay.get("strx.energy_rental_amount")}),(0,A.jsx)("div",{className:"rent-energy-amount not-login flex",children:(0,A.jsxs)("div",{className:"flexA",children:[(0,A.jsx)("span",{className:"equal-alike-a",children:"\u2248 "}),(0,A.jsx)(u.A,{title:i.Ay.get("strx.energy_trx_energy_desc"),placement:t?"topLeft":"top",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown",children:(0,A.jsx)("span",{className:"rent-amount underline",children:(0,v.ZV)((0,I.A)(r).times(l.energyStakePerTrx),0)})}),(0,A.jsx)("span",{className:"rent-unit",children:i.Ay.get("strx.energy_energy_day")})]})}),(0,A.jsx)("div",{className:"rent-delegate-amount flex aic",children:i.Ay.getHTML("strx.energy_subsidy_rent_price_day",{value:(0,v.ZV)(m,3,{miniText:"0.001"})})})]}),(0,A.jsx)("div",{className:"rent-info-icon"+("en-US"===s?" en":"")})]}),(0,A.jsxs)("div",{children:[S&&(0,A.jsx)(C,{}),(0,A.jsxs)("div",{className:"energy-info",children:[(0,A.jsx)("div",{className:"rent-left",children:(0,A.jsxs)("div",{children:[(0,A.jsxs)("div",{className:"rent-left-label",onClick:()=>{this.setState({rentDaysLeftStatus:!e}),window.gtag("event","PC_energy_exchange_icon",{event_category:"sTRX",event_label:"energy_exchange_icon"})},children:[e?i.Ay.get("strx.energy_expire_date"):i.Ay.get("strx.energy_remaining_duration"),(0,A.jsx)("span",{className:"j-exchange-icon"})]}),(0,A.jsx)("div",{className:"rent-left-time",children:!(0,I.A)(x).isNaN()&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("span",{className:"rent-left-wavyline"}),(0,I.A)(n).minus(y).minus(c).gt(0)?(0,I.A)(p).isNaN()?"--":e?d()((0,I.A)(x).toNumber()).format("YYYY-MM-DD HH:mm"):i.Ay.getHTML("strx.energy_d_h_m",{value1:_,value2:j,value3:w}):e?d()((0,I.A)(x).toNumber()).format("YYYY-MM-DD HH:mm"):i.Ay.getHTML("strx.energy_d_h_m",{value1:0,value2:0,value3:0})]})})]})}),(0,A.jsxs)("div",{className:"energy-info-content login flexB flexA",children:[(0,A.jsxs)("div",{className:"energy-info-content-item",children:[(0,A.jsx)("div",{className:"title flex items-center",children:i.Ay.get("strx.refund_amount_now")}),(0,A.jsxs)("div",{className:"item-return",children:[(0,A.jsx)(u.A,{placement:"bottomLeft",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown triangle-icon w254 value-return-arrow",getPopupContainer:()=>document.body.querySelector(".item-return"),width:254,onMouseEnter:()=>{try{setTimeout((()=>{const e=document.querySelector(".value-return").offsetWidth/2;document.querySelector(".value-return-arrow .ant-tooltip-arrow").style.left=e+"px"}),200)}catch(e){}},title:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:"flexB remain",children:[(0,A.jsx)("div",{className:"key",children:i.Ay.get("strx.energy_remaining_rent")}),(0,A.jsxs)("div",{className:"val",children:[(0,v.ZV)(o.rentRemain,6),(0,A.jsx)("span",{children:" TRX"})]})]}),(0,A.jsxs)("div",{className:"flexB rent-money",children:[(0,A.jsx)("div",{className:"key",children:i.Ay.get("strx.energy_rent_money")}),(0,A.jsxs)("div",{className:"val",children:[(0,v.ZV)(o.securityDeposit,6),(0,A.jsx)("span",{children:" TRX"})]})]})]}),children:(0,A.jsx)("span",{className:"value-return",children:(0,v.ZV)((0,I.A)(o.rentRemain).plus(o.securityDeposit).minus(V),6)})}),(0,A.jsx)("span",{className:"value-symbol",children:" TRX"})]})]}),(0,A.jsx)(h.A,{className:"rent-back",onClick:this.returnSource,children:i.Ay.get("strx.energy_end_now")})]})]})]})]})},this.rentForm=()=>{const{tabValue:e}=this.state;return(0,A.jsxs)("div",{className:"rent-form",children:[(0,A.jsxs)("div",{className:"rent-form-tabs",children:[(0,A.jsx)("span",{className:"energy"===e?"current":"",onClick:()=>{this.setState({tabValue:"energy"}),this.props.system.clearRejectError(),window.gtag("event","PC_energy_rent_more",{event_category:"sTRX",event_label:"energy_rent_more"})},children:i.Ay.get("strx.energy_rent_more")}),(0,A.jsx)("span",{className:"time"===e?"current":"",onClick:()=>{this.setState({tabValue:"time"}),this.props.system.clearRejectError(),window.gtag("event","PC_energy_rent_time",{event_category:"sTRX",event_label:"energy_rent_time"})},children:i.Ay.get("strx.energy_extend_rent_duration")})]}),"energy"===e?this.energyAddRender():this.timeAddRender()]})},this.rentAmountsSelectChange=e=>{try{this.props.system.clearRejectError(),this.setState({rentAmountsSelectValue:e}),setTimeout((()=>{"0"===e?(this.rentAmountsEnergyInputValid(),window.gtag("event","PC_energy_select_energy",{event_category:"sTRX",event_label:"energy_select_energy"})):"1"===e&&(this.rentAmountsStakeInputValid(),window.gtag("event","PC_energy_select_trx",{event_category:"sTRX",event_label:"energy_select_trx"}))}))}catch(t){console.log("error: rentAmountsSelectChange")}},this.setRate=async e=>{try{e=(0,I.A)(e).isNaN()||!e&&!(0,I.A)(e).eq(0)?this.energyToTrx():e,this.props.strx.setData({stakeAmount:e}),this.props.strx.rentalRate(e)}catch(t){console.log("error: setRate")}},this.energyToTrx=e=>{try{const{marketData:t}=this.props.strx,{energyStakePerTrx:s}=t;return(!e||e<=0)&&(e=this.getDefaultEnergyValue()),(0,I.A)((0,I.A)(e).div(s)._toFixed(0,1)).plus(1)}catch(t){console.log("error: energyToTrx")}},this.rentAmountsEnergyInputChange=async e=>{try{this.props.system.clearRejectError();const{rentAmountsEnergyInputDecimal:r}=this.state,{marketData:a}=this.props.strx,{energyStakePerTrx:i}=a;var t=!1,s="",n="";if(""===e)t=!0,s="",n="";else if((0,I.A)(e).eq(0))t=!0,s=(0,v.CW)(e,r),n="0";else{const{valid:a,str:l}=(0,v.PY)(""+e,r);a&&/^\d*$/.test(l)&&(t=!0,s=l,n=l?(0,I.A)((0,I.A)(l).div(i)._toFixed(0,1)).plus(1):"")}t&&(this.setState({rentAmountsEnergyInputValue:s,rentAmountsStakeInputValue:n}),this.rentAmountsEnergyInputValid(s),this.setRate(n),setTimeout((()=>{this.commonSelectChange()})))}catch(r){console.log("error: rentAmountsEnergyInputChange"),console.log(r)}},this.rentAmountsEnergyInputValid=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.state.rentAmountsEnergyInputValue;const{maxRentableOfType:s,marketData:n}=t.props.strx,{energyStakePerTrx:r}=n,a=s,l=(0,I.A)(a).times(r)._toFixed(0,1),o=(0,I.A)(1e5);e||(0,I.A)(e).eq(0)?(0,I.A)((0,I.A)(a).times(r)).lt(o)?t.setState({rentAmountsErrorMsg:i.Ay.get("strx.energy_no_balance")}):(0,I.A)(e).lt(o)?t.setState({rentAmountsErrorMsg:i.Ay.getHTML("strx.energy_energy_min_amount",{value:(0,v.ZV)(o)})}):(0,I.A)(e).gt(l)?t.setState({rentAmountsErrorMsg:i.Ay.getHTML("strx.energy_energy_max_amount",{value:(0,v.ZV)(l)})}):t.setState({rentAmountsErrorMsg:""}):t.setState({rentAmountsErrorMsg:""})},this.rentAmountsStakeInputChange=async e=>{try{this.props.system.clearRejectError();const{rentAmountsStakeInputDecimal:t,rentAmountsEnergyInputDecimal:s,rentWaysTimeInputValue:n}=this.state,{valid:r,str:a}=(0,v.PY)(""+e,t),{marketData:i}=this.props.strx,{energyStakePerTrx:l}=i;if(r&&/^\d*$/.test(a)){let e=a?(0,I.A)(a).times(l)._toFixed(s,1):"";this.setState({rentAmountsStakeInputValue:a,rentAmountsEnergyInputValue:e}),this.rentAmountsStakeInputValid(a),this.setRate(a),setTimeout((()=>{this.commonSelectChange()}))}}catch(t){console.log("error: rentAmountsStakeInputChange")}},this.rentAmountsStakeInputValid=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.state.rentAmountsStakeInputValue,{trxBalance:s,maxRentableOfType:n,marketData:r}=t.props.strx;s=(0,I.A)(s).div(j.TS.trxPrecision);let a=n;const l=(0,I.A)(a)._toFixed(0,1),o=t.energyToTrx();e||(0,I.A)(e).eq(0)?(0,I.A)(a).lt(o)?t.setState({rentAmountsErrorMsg:i.Ay.get("strx.energy_no_balance")}):(0,I.A)(e).lt(o)||(0,I.A)(e).gt(l)?t.setState({rentAmountsErrorMsg:i.Ay.get("strx.energy_out_of_range",{value1:(0,v.ZV)(o),value2:(0,v.ZV)(l)})}):t.setState({rentAmountsErrorMsg:""}):t.setState({rentAmountsErrorMsg:""})},this.rentWaysSelectChange=e=>{try{this.props.system.clearRejectError(),this.setState({rentWaysSelectValue:e}),setTimeout((()=>{"2"===e?(this.rentWaysTimeInputValid(),window.gtag("event","PC_energy_select_duration",{event_category:"sTRX",event_label:"energy_select_duration"})):(this.timeToRent(),this.rentWaysRentInputValid(),window.gtag("event","PC_energy_select_rent",{event_category:"sTRX",event_label:"energy_select_rent"}))}))}catch(t){console.log("error: rentWaysSelectChange")}},this.commonSelectChange=()=>{const{rentWaysSelectValue:e,rentWaysRentInputValue:t,defaultRent:s}=this.state;"2"===e?this.timeToRent():this.rentToTime(t||s)},this.rentWaysTimeInputChange=e=>{try{this.props.system.clearRejectError();const{rentWaysTimeInputDecimal:n}=this.state;var t=!1,s="";if(""===e||(0,I.A)(e).eq(0))t=!0,s=(0,v.CW)(e,n);else{const{valid:r,str:a}=(0,v.PY)(e,n);r&&/^\d*(.|.[0-9]){0,1}$/.test(a)&&(t=!0,s=a)}t&&(this.setState({rentWaysTimeInputValue:s}),this.rentWaysTimeInputValid(s))}catch(n){console.log("error: rentWaysTimeInputChange")}},this.rentWaysTimeInputValid=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.state.rentWaysTimeInputValue,{trxBalance:s}=t.props.strx;s=(0,I.A)(s).div(j.TS.trxPrecision);let n=t.rentToTime((0,I.A)(s).minus(j.TS.safeValueTRX),!0),r=t.timeToRent(e,!0);!e&&!(0,I.A)(e).eq(0)||(0,I.A)(r).gt(s)?t.setState({rentWaysErrorMsg:""}):(0,I.A)(e).lt(1)||(0,I.A)(e).gt(30)?t.setState({rentWaysErrorMsg:i.Ay.get("strx.energy_out_of_days",{value1:(0,v.ZV)(1),value2:(0,v.ZV)(30)})}):(0,I.A)(s).lt(j.TS.safeValueTRX)?t.setState({rentWaysErrorMsg:"-2"}):(0,I.A)(n).lt(e)?t.setState({rentWaysErrorMsg:"-3"}):t.setState({rentWaysErrorMsg:""})},this.rentWaysRentInputChange=e=>{try{this.props.system.clearRejectError();const{valid:t,str:s}=(0,v.PY)(e,j.TS.trxDecimal);if(t)if(this.setState({rentWaysRentInputValue:s}),this.rentWaysRentInputValid(s),s)this.rentToTime(s);else{let{defaultRent:e}=this.state;this.rentToTime(e,!1,s)}}catch(t){console.log("error: rentWaysRentInputChange")}},this.rentWaysRentInputValid=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.state.rentWaysRentInputValue,{rentBalance:s,trxBalance:n}=t.props.strx;n=(0,I.A)(n).div(j.TS.trxPrecision);const{rentDaysArray:r}=t.state,a=(0,I.A)(t.timeToRent(r[0],!0))._toFixed(6,1),l=t.timeToRent(r[1],!0);let o=(0,I.A)((0,I.A)(l).gt(n)?n:l)._toFixed(6,1);if(o=(0,I.A)(o).lt(a)?(0,I.A)(l)._toFixed(6,1):o,!e&&!(0,I.A)(e).eq(0)||(0,I.A)(e).gt(n))t.setState({rentWaysErrorMsg:""});else if((0,I.A)(e).lt(a)||(0,I.A)(e).gt(o)){let e=(0,I.A)(s).gt(0)?"strx.energy_out_of_extend_trx":"strx.energy_out_of_extend_trx1";t.setState({rentWaysErrorMsg:i.Ay.get(e,{value1:(0,v.ZV)(a,6),value2:(0,v.ZV)(o,6)})})}else(0,I.A)(n).lt(j.TS.safeValueTRX)?t.setState({rentWaysErrorMsg:"-2"}):(0,I.A)(n).minus(j.TS.safeValueTRX).lt(e)?t.setState({rentWaysErrorMsg:"-1"}):t.setState({rentWaysErrorMsg:""})},this.rentAmountsRender=e=>{const{rentAmountsSelectValue:t,rentAmountsEnergyInputValue:s,rentAmountsStakeInputValue:n,rentAmountsErrorMsg:r,energyFocused:a}=this.state,{marketData:l}=this.props.strx;let{trxBalance:o}=this.props.strx;o=(0,I.A)(o).div(j.TS.trxPrecision);const{isConnected:c}=this.props.network,{energyStakePerTrx:d}=l,g="1"!==e;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:"rent-labels",children:[(0,A.jsx)(R.L,{title:i.Ay.get("strx.energy_tips_2"),placement:"topLeft",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown",children:(0,A.jsx)("span",{className:"rent-label-text",children:i.Ay.get("strx.energy_rent_amount")})}),(0,A.jsxs)("span",{children:[(0,A.jsxs)("span",{className:"rent-days-title",children:[i.Ay.get("strx.energy_available_balance"),":"]}),(0,A.jsxs)("span",{className:"rent-days-value",children:[c?(0,v.ZV)(o,j.TS.trxDecimal):"--"," TRX"]})]})]}),(0,A.jsxs)(y.A.Group,{compact:!0,className:"mt-10 "+(r?" j-error-input-group":""),children:[(0,A.jsxs)("div",{className:"j-select-alike j-select-alike-energy",children:[(0,A.jsx)(u.A,{title:()=>(0,A.jsx)("div",{children:(0,A.jsx)("div",{className:"tal",children:i.Ay.get("strx.energy_tips_2")})}),placement:"top",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown",children:(0,A.jsx)("span",{className:"j-tooltip-icon mr-6",onMouseEnter:()=>{let t="1"===e?"1":"";window.gtag("event","click",{event_category:"sTRX",event_label:"energy_rent_hover"+t})}})}),(0,A.jsx)("div",{className:"j-alike-text",children:i.Ay.get("strx.energy_rent_amount")})]}),"0"===t?(0,A.jsx)(y.A,{className:"j-input energy-input",placeholder:g?"100,000":"300,000",allowClear:!0,addonAfter:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("span",{className:"energy-unit",children:i.Ay.get("strx.energy_energy_day")}),(0,A.jsx)("span",{className:"exchange",onClick:()=>this.rentAmountsSelectChange("1")})," "]}),value:(0,v.QA)(s),onChange:e=>this.rentAmountsEnergyInputChange((0,v.DS)(e.target.value)),onFocus:()=>{this.setState({energyFocused:!0}),this.inputFocus(),window.gtag("event","PC_energy_rent_energy_focus"+Number(g),{event_category:"sTRX",event_label:"energy_rent_energy_focus"+Number(g)})},onBlur:()=>{this.setState({energyFocused:!1})}}):(0,A.jsx)(y.A,{className:"j-input energy-input",placeholder:"100,000",allowClear:!0,addonAfter:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("span",{className:"stake-trx",children:"TRX"}),(0,A.jsx)("span",{className:"exchange",onClick:()=>this.rentAmountsSelectChange("0")})]}),value:(0,v.QA)(n),onChange:e=>this.rentAmountsStakeInputChange((0,v.DS)(e.target.value)),onFocus:()=>{this.inputFocus(),window.gtag("event","PC_energy_rent_trx_focus"+Number(g),{event_category:"sTRX",event_label:"energy_rent_trx_focus"+Number(g)})}}),r?(0,A.jsxs)("div",{className:"j-error-tip",children:[(0,A.jsx)("span",{className:"j-error-img"}),(0,A.jsx)("div",{className:"j-safe-text",children:r})]}):(0,I.A)(s).gte(0)&&a?(0,A.jsxs)("div",{className:"j-error-tip ways-warning",children:[(0,A.jsx)("span",{className:"j-warning-icon"}),(0,A.jsx)("div",{children:i.Ay.getHTML("strx.energy_acquire_info",{value:(0,v.ZV)(this.energyToTrx(s||this.getDefaultEnergyValue()),0)})})]}):null]})]})},this.rentWaysRender=e=>{const{rentWaysSelectValue:t,rentWaysTimeInputValue:s,rentWaysRentInputValue:n,rentWaysErrorMsg:r,defaultRent:a,mobile:l}=this.state,{isConnected:o}=this.props.network,{theme:c}=this.props.lend;let{trxBalance:g,rentBalance:m}=this.props.strx;g=(0,I.A)(g).div(j.TS.trxPrecision);let p="--";if("-3"===r){let e=this.rentToTime((0,I.A)(g).minus(j.TS.safeValueTRX),!0);const t=(0,I.A)(s).minus(e);p=(0,I.A)(t).times(24)}return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:"rent-labels rent-labels-time",children:[(0,A.jsx)(R.L,{title:i.Ay.get("strx.energy_tips_3"),placement:"topLeft",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown",children:(0,A.jsx)("span",{className:"rent-label-text",children:i.Ay.get("strx.energy_rent_time")})}),l&&(0,A.jsxs)("div",{className:"rent-labels jce",children:[(0,A.jsxs)("span",{className:"rent-days-title",children:[i.Ay.get("strx.energy_available_balance"),":"]}),(0,A.jsxs)("span",{className:"rent-days-value",children:[o?(0,v.ZV)(g,j.TS.trxDecimal):"--"," TRX"]})]})]}),(0,A.jsxs)(y.A.Group,{compact:!0,className:"mt-10 "+(r&&!["-1","-2","-3"].includes(r)?" j-error-input-group":""),children:[(0,A.jsxs)("div",{className:"j-select-alike j-select-alike-energy",children:[(0,A.jsx)(u.A,{title:()=>(0,A.jsx)("div",{children:(0,A.jsx)("div",{className:"tal",children:i.Ay.get("strx.energy_tips_3")})}),placement:"top",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown",children:(0,A.jsx)("span",{className:"j-tooltip-icon mr-6",onMouseEnter:()=>{let t="1"!==e;window.gtag("event","energy_rental_calculation_hover"+Number(t),{event_category:"sTRX",event_label:"energy_rental_calculation_hover"+Number(t)})}})}),(0,A.jsx)("div",{className:"j-alike-text",children:i.Ay.get("strx.energy_rent_time")})]}),"2"===t?(0,A.jsx)(y.A,{className:"j-input energy-input ",placeholder:"1",allowClear:!0,addonAfter:(0,A.jsxs)("div",{className:"flex aic",children:[(0,A.jsx)("span",{className:"energy-unit",children:i.Ay.get("strx.energy_day")}),"disabled"===this.props.lend.serviceInnerStatus?(0,A.jsx)(u.A,{title:i.Ay.get("season.can_not_connect"),overlayClassName:"j-tooltip-dropdown season "+c,arrowPointAtCenter:!0,placement:"bottomRight",children:(0,A.jsx)("div",{className:"energy-max season",onClick:()=>{this.props.lend.setData({noServiceModalAllVisible:!0})},children:i.Ay.get("strx.energy_max")})}):(0,A.jsx)("div",{className:"energy-max",onClick:this.timeMax,children:i.Ay.get("strx.energy_max")})]}),value:(0,v.QA)(s),onChange:e=>this.rentWaysTimeInputChange((0,v.DS)(e.target.value)),onFocus:()=>{this.inputFocus();let t="1"!==e;window.gtag("event","PC_energy_rent_duration_focus"+Number(t),{event_category:"sTRX",event_label:"energy_rent_duration_focus"+Number(t)})}}):(0,A.jsx)(y.A,{className:"j-input energy-input ",placeholder:(0,v.ZV)(a,j.TS.trxDecimal),allowClear:!0,addonAfter:(0,A.jsx)(A.Fragment,{children:(0,A.jsx)("span",{className:"stake-trx",children:"TRX"})}),value:(0,v.QA)(n),onChange:e=>this.rentWaysRentInputChange((0,v.DS)(e.target.value)),onFocus:()=>{this.inputFocus();let t="1"!==e;window.gtag("event","PC_energy_rent_focus"+Number(t),{event_category:"sTRX",event_label:"energy_rent_focus"+Number(t)})}}),r&&("-1"===r?(0,A.jsxs)("div",{className:"j-error-tip ways-warning",children:[(0,A.jsx)("span",{className:"j-warning-icon"}),(0,A.jsxs)("div",{children:[i.Ay.get("strx.stake_enough_trx"),(0,A.jsxs)("span",{className:"set-max",onClick:()=>this.reserveTrx(),children:[i.Ay.get("strx.stake_reserve_trx",{value:j.TS.safeValueTRX}),(0,A.jsx)("em",{})]})]})]}):"-2"===r?(0,A.jsxs)("div",{className:"j-error-tip ways-warning",children:[(0,A.jsx)("span",{className:"j-warning-icon"}),(0,A.jsx)("div",{children:i.Ay.get("strx.stake_enough_resources")})]}):"-3"===r?(0,A.jsxs)("div",{className:"j-error-tip ways-warning",children:[(0,A.jsx)("span",{className:"j-warning-icon"}),(0,A.jsxs)("div",{children:[i.Ay.get("strx.stake_adjust_trx"),(0,A.jsxs)("span",{className:"set-max",onClick:()=>this.adjustTrx(),children:[i.Ay.getHTML("strx.stake_adjust_trx_btn",{value1:(0,v.ZV)(p,2),value2:j.TS.safeValueTRX}),(0,A.jsx)("em",{})]})]})]}):(0,A.jsxs)("div",{className:"j-error-tip",children:[(0,A.jsx)("span",{className:"j-error-img"}),(0,A.jsx)("div",{className:"j-safe-text",children:r})]}))]}),!(0,I.A)(m).gt(0)&&(0,A.jsx)("div",{className:"j-time-tips",children:i.Ay.getHTML("strx.energy_tips_1",{value:d()((0,I.A)(s||1).times(864e5).plus((new Date).getTime()).toNumber()).format("YYYY-MM-DD HH:mm")})})]})},this.inputFocus=()=>{this.setState({showBalanceError:!0})},this.reserveTrx=()=>{let{trxBalance:e}=this.props.strx;e=(0,I.A)(e).div(j.TS.trxPrecision),this.rentWaysRentInputChange((0,I.A)(e).minus(j.TS.safeValueTRX))},this.adjustTrx=()=>{let{trxBalance:e}=this.props.strx;e=(0,I.A)(e).div(j.TS.trxPrecision);let t=this.rentToTime((0,I.A)(e).minus(j.TS.safeValueTRX),!0);this.rentWaysTimeInputChange(t)},this.judgeExpiredClear=()=>{const{rentBalance:e,securityDeposit:t}=this.props.strx,{fee:s,rentMoney:n}=this.getCurrentInfos();return{isExpired:(0,I.A)(e).gt(0)&&!(0,I.A)(t).minus(n).minus(s).gt(0),isClear:(0,I.A)(e).gt(0)&&(0,I.A)(t).eq(0)}},this.energyAddRender=()=>{const{rentAmountsStakeInputValue:e,rentAmountsEnergyInputValue:t,approving:s,showBalanceError:n,energyUsed:r,mobile:a}=this.state,{marketData:l}=this.props.strx,{energyStakePerTrx:o}=l,{rentBalance:c}=this.props.strx;let{trxBalance:g}=this.props.strx;g=(0,I.A)(g).div(j.TS.trxPrecision);(0,I.A)((0,I.A)(r).div(1e3)._toFixed(0,1)).plus(1).div(10);const m=e||this.energyToTrx(),p=t||(0,I.A)(m).times(o),{rentMoney:h,fee:y,needToPayTrx:x}=this.getDynamicInfos((0,I.A)(m).plus(c),0,"addEnergy"),{rentDaysLeft:_,rentDaysLeftTrue:w}=this.getCurrentInfos(),{isExpired:N}=((0,I.A)(w).minus((new Date).getTime()).div(864e5),this.judgeExpiredClear()),{transModalInfo:f}=(this.getOfferUrl(),this.getLearnUrl(),this.props.system),{lang:T,theme:b}=this.props.lend,{declined:R,transType:S}=f;return(0,A.jsx)(A.Fragment,{children:(0,A.jsxs)("div",{className:"rent-content",children:[this.rentAmountsRender(),(0,A.jsx)("div",{className:"energy-infos no-padding",children:(0,A.jsxs)("div",{className:"add-after",children:[(0,A.jsxs)("div",{children:[(0,A.jsxs)("div",{className:"after-title",children:[(0,v.ZV)((0,I.A)(c).times(o),0)," ",i.Ay.get("strx.energy_energy_day")]}),(0,A.jsx)("div",{className:"after-subtitle date",children:i.Ay.getHTML("strx.energy_withhold",{value:(0,v.ZV)(c,0)})})]}),(0,A.jsx)("div",{className:"add-to-icon"}),(0,A.jsxs)("div",{className:"after-rent",children:[(0,A.jsxs)("div",{className:"after-title pr append-icon",children:[(0,v.ZV)((0,I.A)(c).times(o).plus(p),0)," ",i.Ay.get("strx.energy_energy_day")]}),(0,A.jsx)("div",{className:"after-subtitle date",children:i.Ay.getHTML("strx.energy_withhold",{value:(0,v.ZV)((0,I.A)(c).plus(m),0)})})]})]})}),(0,A.jsx)("div",{className:"j-time-tips",children:N?i.Ay.get("strx.energy_rental_expired"):i.Ay.getHTML("strx.energy_tips_1",{value:(0,I.A)(w).isNaN()?"--":d()((0,I.A)(w).toNumber()).format("YYYY-MM-DD HH:mm")})}),(0,A.jsxs)("div",{className:"energy-infos energy-infos-new mt20",children:[(0,A.jsxs)("div",{className:"energy-info",children:[(0,A.jsxs)("div",{className:`info-subtitle flex ${T}`,children:[i.Ay.get("strx.total_prepayment"),(0,A.jsx)("br",{}),i.Ay.get("strx.return_early")]}),(0,A.jsx)("div",{className:"pay-amount-sub ellipsis dashed pay-amount-sub-calc",children:(0,A.jsxs)(u.A,{width:"314",title:(0,A.jsxs)("div",{className:"rent-fee-detail",children:[(0,A.jsxs)("div",{className:"flexB flexA rent-fee-detail-item",children:[(0,A.jsx)("div",{className:"name",children:i.Ay.get("strx.energy_prepay_tips1")}),(0,A.jsxs)("div",{className:"value ellipsis",children:[(0,I.A)(h).eq(0)?0:(0,v.ZV)(h,j.TS.trxDecimal)," TRX"]})]}),(0,A.jsxs)("div",{className:"flexB flexA rent-fee-detail-item",children:[(0,A.jsx)("div",{className:"name",children:i.Ay.getHTML("strx.energy_rent_money_tips")}),(0,A.jsxs)("div",{className:"value ellipsis",children:[(0,I.A)(x).minus(h).eq(0)?0:(0,v.ZV)((0,I.A)(x).minus(h),j.TS.trxDecimal)," ","TRX"]})]}),this.returnRuleTipRender()]}),placement:"bottomRight",arrowPointAtCenter:!0,getPopupContainer:()=>document.body.querySelector(".rent-content"),overlayClassName:"j-tooltip-dropdown triangle-icon w314 pay-amount-sub-arrow",onMouseEnter:()=>{try{setTimeout((()=>{const e=document.querySelector(".pay-amount-sub-calc").offsetWidth/2;document.querySelector(".pay-amount-sub-arrow .ant-tooltip-arrow").style.right=e+8+"px"}),200)}catch(e){}},children:[(0,v.ZV)(x,j.TS.trxDecimal)," TRX"]})})]}),this.energyTransactionUsedEnergyRender()]}),this.energyUsedTipRender(),s?(0,A.jsxs)("button",{className:"j-large-btn j-supply rent-now j-signing energy_config_extend",disabled:!0,children:[i.Ay.get("v2.sign_in_wallet"),(0,A.jsx)("span",{className:"siging-icon"})]}):(0,A.jsx)("button",{className:"j-large-btn j-supply rent-now gas-less-btn energy_config_extend",disabled:this.state.rentAmountsErrorMsg||(0,I.A)(x).gt(g)&&n||N,onClick:()=>this.rentResourceValid(this.state.rentAmountsErrorMsg||(0,I.A)(x).gt(g)||N,m,x,"addEnergy"),children:i.Ay.get("strx.energy_config_extend")}),R&&"addEnergy"===S&&(0,A.jsxs)("div",{className:"j-error-tip wallet-reject",children:[(0,A.jsx)("span",{className:"j-error-img"}),(0,A.jsx)("div",{children:i.Ay.get("v2.reject_in_wallet")})]}),N?(0,A.jsxs)("div",{className:"j-error-tip wallet-reject",children:[(0,A.jsx)("span",{className:"j-error-img"}),(0,A.jsx)("div",{children:i.Ay.get("strx.expired_tip")})]}):(0,I.A)(x).gt(g)&&n&&(0,A.jsxs)("div",{className:"j-error-tip wallet-reject",children:[(0,A.jsx)("span",{className:"j-error-img"}),(0,A.jsx)("div",{children:i.Ay.getHTML("strx.energy_insufficient_balance",{value:(0,v.ZV)(g,j.TS.trxDecimal)})})]})]})})},this.timeAddRender=()=>{const{isExpired:e}=this.judgeExpiredClear(),{rentWaysTimeInputValue:t,rentWaysRentInputValue:s,approving:n,rentWaysSelectValue:r,defaultRent:a,showBalanceError:l,energyUsed:o,mobile:c}=this.state,{isConnected:g}=this.props.network,{marketData:m}=this.props.strx;let{trxBalance:p}=this.props.strx;p=(0,I.A)(p).div(j.TS.trxPrecision);const h=t||1,y=s||a,{fee:x,rate:_,rentPerDay:w,rentDaysLeft:N,rentDaysLeftTrue:f,rentMoney:T}=this.getCurrentInfos(),b=e?(0,I.A)(N).minus((new Date).getTime()).plus((0,I.A)(h).times(864e5)).div(1e3):(0,I.A)(h).times(86400),{needToPayTrx:R}=this.getDynamicInfos(0,b,"addTime"),S="3"===r?y:R,k=e?(0,I.A)((new Date).getTime()).plus((0,I.A)(h).times(864e5)):(0,I.A)(N).plus((0,I.A)(h).times(864e5)),{days:C,hours:V,mins:D}=(0,v.zg)(e?(new Date).getTime():(0,I.A)(N)),{days:P,hours:E,mins:M}=(0,v.zg)(k),{transModalInfo:W}=this.props.system,{lang:L,theme:F}=this.props.lend,{declined:H,transType:X}=W;return(0,A.jsx)(A.Fragment,{children:(0,A.jsxs)("div",{className:"rent-content",children:[!c&&(0,A.jsxs)("div",{className:"rent-labels jce",children:[(0,A.jsxs)("span",{className:"rent-days-title",children:[i.Ay.get("strx.energy_available_balance"),":"]}),(0,A.jsxs)("span",{className:"rent-days-value",children:[g?(0,v.ZV)(p,j.TS.trxDecimal):"--"," TRX"]})]}),this.rentWaysRender(),(0,A.jsx)("div",{className:"energy-infos no-padding",children:(0,A.jsxs)("div",{className:"add-after",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("div",{className:"after-title",children:(0,I.A)(N).isNaN()?"--":i.Ay.getHTML("strx.energy_d_h_m",{value1:C,value2:V,value3:D})}),(0,A.jsx)("div",{className:"after-subtitle date",children:i.Ay.getHTML("strx.energy_expired",{value:(0,I.A)(f).isNaN()?"--":d()((0,I.A)(f).toNumber()).format("YYYY-MM-DD HH:mm")})})]}),(0,A.jsx)("div",{className:"add-to-icon"}),(0,A.jsxs)("div",{className:"after-rent",children:[(0,A.jsx)("div",{className:"after-title",children:(0,A.jsxs)("div",{className:"after-title-with-go-up",children:[(0,I.A)(N).isNaN()?"--":i.Ay.getHTML("strx.energy_d_h_m",{value1:P,value2:E,value3:M})," "]})}),(0,A.jsx)("div",{className:"after-subtitle date",children:i.Ay.getHTML("strx.energy_expired",{value:(0,I.A)(N).isNaN()?"--":d()(e?(new Date).getTime():(0,I.A)(N).toNumber()).add((0,I.A)(h).times(864e5),"milliseconds").format("YYYY-MM-DD HH:mm")})})]})]})}),(0,A.jsxs)("div",{className:"energy-infos energy-infos-new mt20",children:[(0,A.jsxs)("div",{className:"energy-info",children:[(0,A.jsxs)("div",{className:`info-subtitle flex ${L}`,children:[i.Ay.get("strx.total_prepayment"),(0,A.jsx)("br",{}),i.Ay.get("strx.return_early")]}),(0,A.jsx)("div",{className:"pay-amount-sub ellipsis dashed pay-amount-sub-calc",children:(0,A.jsxs)(u.A,{title:(0,A.jsxs)("div",{className:"rent-fee-detail",children:[(0,A.jsxs)("div",{className:"flexB flexA rent-fee-detail-item",children:[(0,A.jsx)("div",{className:"name",children:i.Ay.get("strx.energy_prepay_tips1")}),(0,A.jsxs)("div",{className:"value ellipsis",children:[(0,I.A)(S).eq(0)?0:(0,v.ZV)(S,j.TS.trxDecimal)," TRX"]})]}),(0,A.jsxs)("div",{className:"flexB flexA rent-fee-detail-item",children:[(0,A.jsx)("div",{className:"name",children:i.Ay.getHTML("strx.energy_rent_money_tips")}),(0,A.jsx)("div",{className:"value",children:i.Ay.get("strx.energy_no_need_pay")})]}),this.returnRuleTipRender()]}),placement:"bottomRight",arrowPointAtCenter:!0,getPopupContainer:()=>document.body.querySelector(".rent-content"),overlayClassName:"j-tooltip-dropdown triangle-icon w314 pay-amount-sub-arrow",onMouseEnter:()=>{try{setTimeout((()=>{const e=document.querySelector(".pay-amount-sub-calc").offsetWidth/2;document.querySelector(".pay-amount-sub-arrow .ant-tooltip-arrow").style.right=e+8+"px"}),200)}catch(e){}},children:[(0,v.ZV)(R,j.TS.trxDecimal)," TRX"]})})]}),this.energyTransactionUsedEnergyRender()]}),this.energyUsedTipRender(),n?(0,A.jsxs)("button",{className:"j-large-btn j-supply rent-now j-signing energy_config_extend",disabled:!0,children:[i.Ay.get("v2.sign_in_wallet"),(0,A.jsx)("span",{className:"siging-icon"})]}):(0,A.jsx)("button",{className:"j-large-btn j-supply rent-now  gas-less-btn energy_config_extend",disabled:(this.state.rentWaysErrorMsg&&!["-1","-2","-3"].includes(this.state.rentWaysErrorMsg)||(0,I.A)(S).gt(p))&&l,onClick:()=>this.rentResourceValid(this.state.rentWaysErrorMsg&&!["-1","-2","-3"].includes(this.state.rentWaysErrorMsg)||(0,I.A)(S).gt(p),0,S,"addTime"),children:i.Ay.get("strx.energy_config_extend")}),H&&"addTime"===X&&(0,A.jsxs)("div",{className:"j-error-tip wallet-reject",children:[(0,A.jsx)("span",{className:"j-error-img"}),(0,A.jsx)("div",{children:i.Ay.get("v2.reject_in_wallet")})]}),(0,I.A)(S).gt(p)&&l&&(0,A.jsxs)("div",{className:"j-error-tip wallet-reject",children:[(0,A.jsx)("span",{className:"j-error-img"}),(0,A.jsx)("div",{children:i.Ay.getHTML("strx.energy_insufficient_balance",{value:(0,v.ZV)(p,j.TS.trxDecimal)})})]})]})})},this.energyRender=()=>{const{rentBalance:e}=this.props.strx,{isConnected:t,defaultAccount:s}=this.props.network;return(0,I.A)(e).gt(0)&&t?(0,A.jsxs)(A.Fragment,{children:[this.rentInfo(),this.rentForm()]}):(0,A.jsxs)(A.Fragment,{children:[this.rentInfoNotLogin(),this.rentFormNotLogin()]})},this.rentResourceValid=(e,t,s,n)=>{this.setState({showBalanceError:!0}),e||this.rentResource(t,s,n)},this.rentResource=async(e,t,s)=>{try{if("addTime"===s?window.gtag("event","PC_energy_rent_extend_time_button",{event_category:"sTRX",event_label:"energy_rent_extend_time_button"}):"addEnergy"===s?window.gtag("event","PC_energy_rent_extend_energy_button",{event_category:"sTRX",event_label:"energy_rent_extend_energy_button"}):window.gtag("event","PC_energy_rent_button",{event_category:"sTRX",event_label:"energy_rent_button"}),0===this.props.network.isRightChain)return void this.props.network.changeChain();if(this.props.strx.rentPaused)return this.props.strx.setData({rentPausedVisible:!0});this.props.system.clearRejectError();const n={title:"v2.transaction_confirm",title2:"deposit.transactionsent",title3:"v2.transaction_confirm_fail",title4:"deposit.confirm_transaction",obj:{value:(0,v.ZV)(t,j.TS.trxDecimal),token:"TRX"},transType:s||"rentResource"};this.setState({approving:!0});const r=j.TS.contract.marketProxyContract;let a="rentResource(address,uint256,uint256)";const i=(0,I.A)(e).times(j.TS.trxPrecision)._toFixed(0,1);let l=[{type:"address",value:window.defaultAccount},{type:"uint256",value:i},{type:"uint256",value:1}];const o=await this.props.system.getFeeLimitCommon(r,a,l);await this.props.system.rentResource(window.defaultAccount,i,1,new I.A(t).times(j.TS.trxPrecision)._toFixed(0,1),n,o)&&("addTime"===s?window.gtag("event","PC_energy_rent_extend_time_success",{event_category:"sTRX",event_label:"energy_rent_extend_time_success"}):"addEnergy"===s?window.gtag("event","PC_energy_rent_extend_energy_success",{event_category:"sTRX",event_label:"energy_rent_extend_energy_success"}):window.gtag("event","PC_energy_rent_success",{event_category:"sTRX",event_label:"energy_rent_success"}),setTimeout((()=>{this.initForm(),this.props.strx.getUserTrxBalance(),this.props.strx.getAccountRentInfos(),this.props.strx.getNotAccountRentInfos(),this.props.strx.getReturnRentInfo()}),5e3)),this.setState({approving:!1})}catch(n){console.log("error: rentResource")}},this.returnSource=()=>{try{if(window.gtag("event","PC_energy_return_source",{event_category:"sTRX",event_label:"energy_return_source"}),0===this.props.network.isRightChain)return void this.props.network.changeChain();this.props.strx.setData({returnResourceVisible:!0})}catch(e){console.log("error: returnSource")}},this.state={marketData:{trx1wEnergy:"--",model:[]},lang:(null===(s=(0,v.Sp)())||void 0===s?void 0:s.lang)||window.localStorage.getItem("lang")||i.Ay.options.currentLocale,mobile:(0,l.A)(window.navigator).any,rentInfo:{},tabValue:"energy",rentAmountsSelectValue:"0",rentAmountsEnergyInputValue:"",rentAmountsEnergyInputDecimal:0,rentAmountsStakeInputValue:"",rentAmountsStakeInputDecimal:0,rentWaysSelectValue:"2",rentWaysTimeInputValue:"",rentWaysTimeInputDecimal:1,rentWaysRentInputValue:"",rentWaysRentInputDecimal:6,rentPerDay:0,rentYjn:0,rentDaysArray:[1,30],rentDaysLeftStatus:!0,approving:!1,rentAmountsErrorMsg:"",rentWaysErrorMsg:"",defaultRent:"",showBalanceError:!1,energyFocused:!1,energyUsed:"--"}}componentWillUnmount(){this.props.system.clearRejectError(),this.props.strx.clearVariablesInterval()}render(){const{allowanceVisible:e}=this.props.network,{theme:t,applicationMap:s}=this.props.lend,{returnSourceInfo:n,lang:r,mobile:l,hideNewVersionHint:o}=this.state,{marketData:c}=this.props.strx,d=this.getAnnouncementUrl(),u=this.getLearnUrl(),{orderListTotalCount:h,miniReceiverTotal:y}=this.props.energyRental;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:"j-wrapper "+t+(j.TS.winterThemeVisible?" snow-show":""),children:[j.TS.winterThemeVisible&&(0,A.jsx)(D.A,{fromPage:"energyRent"}),(0,A.jsx)(g.A,{instantActions:this.getMarketData,mountedActions:this.getUserData}),(0,A.jsx)(m.A,{pageName:"energyRent"}),(0,A.jsxs)("div",{className:"j-stake-container j-energy-rent",children:[(0,A.jsx)("div",{className:"j-liquidity-stake ",children:(0,A.jsxs)("div",{className:"top-header",children:[(0,A.jsxs)("div",{className:"flexA",children:[(0,A.jsx)("div",{className:"title energy-rent-title",children:i.Ay.get("strx.energy_rental")}),(0,A.jsx)(a.N_,{to:"/energyRental?lang="+r,className:"new-version-link green",href:"/energyRental?lang="+r,onClick:()=>{window.gtag("event","click",{event_category:"energyrent",event_label:"energyrent_old_click_swicthtoPro"})},children:i.Ay.get("energy_rental.page_header.new_version_btn")}),h+y<=1&&!o&&(0,A.jsxs)("div",{className:"new-version-hint"+("en-US"===r?" en":""),children:[i.Ay.get("s7.try_new_version"),(0,A.jsx)("span",{className:"close-btn",onClick:()=>{this.setState({hideNewVersionHint:!0})}})]}),h+y>1&&!o&&(0,A.jsxs)("div",{className:"new-version-hint"+("en-US"===r?" en":""),children:[i.Ay.get("energy_rental.page_header.new_version_hint"),(0,A.jsx)("span",{className:"close-btn",onClick:()=>{this.setState({hideNewVersionHint:!0})}})]})]}),(0,A.jsxs)("div",{className:"info",children:[(0,A.jsxs)("div",{className:"desc",children:[i.Ay.get("strx.energy_rental_desc"),(0,A.jsx)(E.z,{href:u,target:"_blank",className:"learn-more",onClick:()=>{window.gtag("event","PC_energy_learn_more",{event_category:"sTRX",event_label:"energy_learn_more"})},children:i.Ay.get("strx.energy_lerna_more")})]}),(0,A.jsxs)("div",{className:"j-announce",children:[(0,A.jsx)("span",{className:"announce-icon"}),(0,A.jsx)("a",{className:"announce-content",onClick:window.gtag("event","PC_energy_announce",{event_category:"sTRX",event_label:"energy_announce"}),href:d,target:"announce",rel:"noopener noreferrer",children:i.Ay.get("strx.stake_annoucement_2")}),(0,A.jsx)("span",{className:"announce-arrow-icon"})]})]})]})}),(0,A.jsx)("div",{className:"j-eles"+("en-US"===r?" en":""),children:this.energyRender()}),(0,A.jsx)(P.Z,{data:c,type:"energy"})]}),(0,A.jsx)(p.A,{})]}),(0,A.jsx)(N,{callback:this.initForm}),(0,A.jsx)(f.A,{}),(0,A.jsx)(x.A,{}),e&&(0,A.jsx)(T.A,{store:"strx"}),(0,A.jsx)(b.A,{theme:t})]})}})||V)||V)||V)||V)||V)||V)||V;const W=M;var L;const F=(0,o.WQ)("network")(L=(0,o.PA)(L=class extends r.Component{constructor(e){super(e),this.componentDidMount=async()=>{this.props.network.setData({routeName:"EnergyRent"})}}render(){return(0,A.jsx)(W,{})}})||L)||L},33635:(e,t,s)=>{s.d(t,{Z:()=>u});var n,r=s(76998),a=s(98859),i=s(96843),l=(s(95893),s(33270)),o=s(37895),c=s(81055),d=s(22172),g=s(23446);let m=(0,a.WQ)("lend")(n=(0,a.PA)(n=class extends r.Component{constructor(e){super(e),this.onChartHightLight=e=>{const{dataList:t}=this.props,s=e.batch.reduce(((e,t)=>(e[t.seriesIndex]=t,e)),{}),n=t[s[0].dataIndex];this.setState({hasTouchedChart:!0,curParams:[{axisValue:n.date,value:n.depositedAPY,dataIndex:s[0].dataIndex},{axisValue:n.date,value:n.depositedUSD,dataIndex:s[0].dataIndex}]})},this.initRef=e=>{this.echartRef=e},this.onChartReady=()=>{setTimeout(this.showTooltipForCurrentData,800)},this.showTooltipForCurrentData=()=>{var e,t;const{mobile:s}=this.state,n=null===(e=this.echartRef)||void 0===e?void 0:e.getEchartsInstance();null!==(t=this.props.dataList)&&void 0!==t&&t.length?n&&n.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:this.props.dataList.findIndex((e=>e.current))||0,position:s?[40,10]:[80,10]}):setTimeout(this.showTooltipForCurrentData,800)},this.hideTooltip=()=>{var e;const t=null===(e=this.echartRef)||void 0===e?void 0:e.getEchartsInstance();t&&t.dispatchAction({type:"hideTip"})},this.onChartMouseover=()=>{!this.state.isHovering&&this.setState({isHovering:!0}),this.setState({labelStatus:!1})},this.onChartMouseout=()=>{this.setState({isHovering:!1,labelStatus:!0}),setTimeout((()=>{this.showTooltipForCurrentData()}),400)},this.state={mobile:(0,l.Fr)().any,curParams:{trx1wEnergyShow:"--",totalApyShow:"--",supplyApyShow:"--",occupancyRateShow:"--",voteApyShow:"--",dataIndex:0},hasTouchedChart:!1,isHovering:!1,labelStatus:!0},this.echartRef=null}componentDidUpdate(e){this.hideTooltip(),setTimeout((()=>{this.showTooltipForCurrentData()}))}getEchartsOption(){const{voteApy:e=0,type:t,totalApy:s}=this.props,{theme:n}=this.props.lend,{mobile:r,labelStatus:a}=this.state,o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0;const n=e.find((e=>e.current));t=n?(0,d.A)((0,d.A)(s).toFixed(4,1)).minus(+(0,d.A)(n.supply).toFixed(4,1)):(0,d.A)(t);const r=(0,c.mY)(100*t,2,{miniText:"0.01"})+"%";return e.map((e=>{const s=(0,c.mY)(100*e.supply,2,{miniText:"0.01"})+"%",n=t.plus((0,d.A)(e.supply).toFixed(4,1)).times(100),a=(0,c.mY)(n,2,{miniText:"0.01"})+"%",i=(0,c.mY)(100*e.base,2,{round:!0})+"%";return{...e,totalApy:n.valueOf(),value:n.valueOf(),trx1wEnergyShow:(0,c.mY)(100*e.trx1wEnergy,0,{miniText:"0.001"}),voteApyShow:r,supplyApyShow:s,totalApyShow:a,occupancyRateShow:i}}))}(this.props.dataList,e,s),g=function(e){let{theme:t,dataList:s,type:n,isMobile:r,labelStatus:a}=e;const o=s.map((e=>100*e.base)),c=s.map((e=>e.totalApy)),g=s.map((e=>100*e.trx1wEnergy)),m="white"===t,p="stake"===n,u=p?o.map(((e,t)=>[e,c[t]])):o.map(((e,t)=>[e,g[t]]));return{color:[{type:"linear",x:1,y:0,x2:0,y2:0,colorStops:p?[{offset:0,color:"#9195FB"},{offset:1,color:"#18C19F"}]:[{offset:0,color:"#1BDCB5"},{offset:1,color:"#5FD2EB"}],global:!1},{type:"linear",x:0,y:1,x2:0,y2:0,colorStops:p?[{offset:0,color:"rgba(29, 192, 163, 0)"},{offset:1,color:"rgba(146, 150, 251, 0.3)"}]:[{offset:0,color:"rgba(29, 192, 163, 0)"},{offset:1,color:"rgba(134, 255, 231, 0.3)"}],global:!1}],grid:{top:32,left:r?0:23,right:9,bottom:0,containLabel:!0},tooltip:{trigger:"axis",showContent:!0,extraCssText:"z-index: 999",position:r?["10%","20%"]:void 0,axisPointer:{type:"line",animation:!1,lineStyle:{color:m?"rgb(34, 35, 43, 0.4)":"rgba(255, 255, 255, 0.4)",type:"dashed",width:.5},label:{precision:2}},backgroundColor:m?"#ffffff":"#353745",borderWidth:"0",padding:0,textStyle:{color:"rgba(255,255,255,0.6)",fontFamily:"PingFang SC",fontSize:"14px"},formatter:function(e){const t=s[e[0].dataIndex];return"stake"===n?`<div class="tooltip">\n        <header class="header item color-primary">\n          <span class="title">${i.Ay.get("strx.stake_staking_apy")}</span>\n          <span class="value">${t.totalApyShow}</span>\n        </header>\n        <div class="item">\n          <span class="title color-light">${i.Ay.get("strx.energy_rental")} APY</span>\n          <span class="value value-wrap">\n            <span class="num purple">${t.supplyApyShow}</span>\n            <span class="color-light value-extra">\n              <span class="">(${i.Ay.get("strx.stake_data_energy_renting_rate",{value:""})} </span>&nbsp;<span class="num color-primary">${t.occupancyRateShow}</span>)\n            </span>\n          </span>\n        </div>\n        <div class="item">\n          <span class="title color-light">${i.Ay.get("strx.stake_data_voting_apy")}</span>\n          <span class="value">\n            <span class="green num">${t.voteApyShow}</span>\n          </span>\n        </div>\n      </div>`:`<div class="tooltip energy">\n        <div class="item">\n          <span class="title color-light">${i.Ay.get("strx.energy_rent_energy_price")}</span>\n          <span class="value value-wrap">\n            <span class="num green">${t.trx1wEnergyShow} sun/${i.Ay.get("strx.energy_day2")}</span>\n          </span>\n          <span class="color-light value-extra">\n              <span>(${i.Ay.get("strx.stake_data_energy_renting_rate",{value:""})} </span>&nbsp;<span class="num color-primary">${t.occupancyRateShow}</span>)\n          </span>\n        </div>\n      </div>`}},xAxis:{type:"value",data:o,boundaryGap:!1,axisLine:{show:!0,lineStyle:{color:m?"rgba(34,35,43,0.06)":"rgba(255,255,255,0.06)"}},axisLabel:{show:!0,color:m?"rgba(34,35,43,0.6)":"rgba(255,255,255,0.6)",margin:16,fontSize:10,align:"center",fontFamily:"Avenir Next",interval:(e,t)=>`${t}`.endsWith("0")},axisPointer:{value:s.findIndex((e=>e.current))||0,label:{show:a,formatter:function(e,t){return i.Ay.get("market.current")},backgroundColor:"transparent",color:m?"rgba(34, 0, 34, 0.6)":"rgba(255,255,255,0.6)"},handle:{show:a,color:"transparent"}},axisTick:{show:!1},splitLine:{show:!1},name:r?"":"X:",nameLocation:"start",nameGap:0,nameTextStyle:{color:m?"rgba(34,35,43,0.6)":"rgba(255,255,255,0.6)",fontSize:12,lineHeight:16,verticalAlign:"top",fontWeight:400,padding:r?[13,12,0,0]:p?[35,16,0,0]:[12,16,0,0]}},yAxis:{type:"value",splitNumber:4,name:r?"":"Y:",nameLocation:"end",nameGap:55,nameTextStyle:{color:m?"rgba(34,35,43,0.6)":"rgba(255,255,255,0.6)",fontSize:12,lineHeight:16,verticalAlign:"top",fontWeight:400,padding:r?[13,12,0,0]:p?[10,50,0,0]:[30,80,0,0]},axisLabel:{show:!0,color:m?"rgba(34,35,43, 0.6)":"rgba(255,255,255,0.6)",margin:r?12:20,fontSize:10,verticalAlign:"middle",fontFamily:"Avenir Next",formatter:e=>p?(0,l.ZV)(e,0):(0,d.A)(e).lte(0)?0:(0,l.ZV)(e,3,{cutZero:!0})},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{color:m?"rgba(34,35,43,0.06)":"rgba(255,255,255,0.06)"}}},series:[{data:u,type:"line",areaStyle:{color:"transparent"},lineStyle:{width:3},itemStyle:{normal:{opacity:0,lineStyle:{width:3}},emphasis:{opacity:1,shadowOffsetX:2,shadowOffsetY:2,color:p?"#9195FB":"#18C19F",borderColor:"#ffffff",borderWidth:3,shadowBlur:2,shadowColor:"rgba(0, 0, 0, 0.1)"}},symbolSize:6},{data:u,type:"line",lineStyle:{color:"transparent"},areaStyle:{},itemStyle:{show:!1,normal:{opacity:0},emphasis:{opacity:0}}}]}}({theme:n,dataList:o,type:t,isMobile:r,labelStatus:a});return g}render(){const{mobile:e}=this.state;return(0,g.jsx)("div",{className:"chart",onMouseOut:this.onChartMouseout,onMouseOver:this.onChartMouseover,children:(0,g.jsx)(o.A,{option:this.getEchartsOption(),ref:this.initRef,style:{height:194},className:"",onChartReady:this.onChartReady})})}})||n)||n;var p;let u=(0,a.WQ)("network")(p=(0,a.WQ)("lend")(p=(0,a.WQ)("system")(p=(0,a.WQ)("pool")(p=(0,a.WQ)("strx")(p=(0,a.PA)(p=class extends r.Component{constructor(e){super(e),this.onReverseRate=()=>{const{reverseRate:e}=this.state;this.setState({reverseRate:!e}),window.gtag("event","PC_stake_reverse_rate",{event_category:"sTRX",event_label:"stake_reverse_rate"})},this.state={mobile:(0,l.Fr)().any,reverseRate:!1}}renderStakeMarket(){const{data:e}=this.props,{reverseRate:t}=this.state;return(0,g.jsxs)("div",{className:"data-wrap color-primary",children:[(0,g.jsxs)("div",{className:"summary",children:[(0,g.jsx)("span",{className:"title",children:i.Ay.get("strx.stake_data_total_staked")}),(0,g.jsxs)("div",{className:"value",children:[(0,g.jsx)("span",{className:"num",children:(0,l.ZV)(e.totalDeposits,0,{miniText:"1"})}),(0,g.jsx)("span",{className:"postfix",children:"TRX"})]})]}),(0,g.jsx)("div",{className:"divider-h"}),(0,g.jsxs)("div",{className:"info-wrap",children:[(0,g.jsxs)("div",{className:"info-item",children:[(0,g.jsx)("span",{className:"title color-light",children:i.Ay.get("strx.stake_data_stakers")}),(0,g.jsx)("span",{className:"value",children:(0,l.ZV)(e.depositsHeadCounts,!1)})]}),(0,g.jsxs)("div",{className:"info-item",children:[(0,g.jsx)("span",{className:"title color-light",children:i.Ay.get("strx.stake_data_ratio")}),(0,g.jsxs)("span",{className:"value exchange",children:[t?(0,g.jsxs)("span",{children:["1 sTRX = ",(0,l.ZV)(e.trx1sTrx,6)," TRX"]}):(0,g.jsxs)("span",{children:["1 TRX = ",(0,l.ZV)(e.sTrx1Trx,6)," sTRX"]}),(0,g.jsx)("span",{className:"icon",onClick:this.onReverseRate})]})]}),(0,g.jsxs)("div",{className:"info-item",children:[(0,g.jsx)("span",{className:"title color-light",children:i.Ay.get("strx.stake_data_strx_supply")}),(0,g.jsx)("span",{className:"value",children:(0,l.ZV)(e.totalSupply,0,{miniText:"1"})})]})]})]})}renderEnergy(){const{data:e}=this.props,{maxRentableOfType:t}=this.props.strx;return(0,g.jsxs)("div",{className:"data-wrap color-primary energy-data",children:[(0,g.jsxs)("div",{className:"summary",children:[(0,g.jsx)("span",{className:"title",children:i.Ay.get("strx.energy_rent_energy_price")}),(0,g.jsxs)("div",{className:"value",children:[(0,g.jsx)("span",{className:"num",children:(0,l.ZV)(100*e.trx1wEnergy,0,{miniText:"0.001"})}),(0,g.jsxs)("span",{className:"postfix",children:["sun/",i.Ay.get("strx.energy_day2")]})]}),(0,g.jsx)("div",{className:"sumary-tip color-light",children:i.Ay.get("strx.energy_rent_price")})]}),(0,g.jsx)("div",{className:"divider-h"}),(0,g.jsxs)("div",{className:"info-wrap",children:[(0,g.jsxs)("div",{className:"info-item",children:[(0,g.jsx)("div",{className:"title",children:i.Ay.get("strx.energy_total_resource")}),(0,g.jsxs)("div",{className:"value",children:[(0,g.jsx)("span",{className:"num",children:(0,l.ZV)((0,d.A)(e.totalUnfreezableEnergy).plus(e.totalDelegatedEnergy).times(e.energyStakePerTrx),0)}),(0,g.jsx)("span",{className:"postfix",children:i.Ay.get("strx.energy_energy")})]})]}),(0,g.jsxs)("div",{className:"info-item",children:[(0,g.jsx)("div",{className:"title",children:i.Ay.get("strx.energy_available_rental")}),(0,g.jsxs)("div",{className:"value",children:[(0,g.jsx)("span",{className:"num",children:(0,l.ZV)((0,d.A)(e.energyStakePerTrx).times(t),0)}),(0,g.jsx)("span",{className:"postfix",children:i.Ay.get("strx.energy_energy")})]})]})]})]})}render(){const{lang:e}=this.props.lend,{data:t,type:s}=this.props,n="stake"===s;return n?(0,g.jsxs)("div",{className:`market-data stake ${e}`,children:[(0,g.jsxs)("div",{className:"section-title color-primary",children:[(0,g.jsx)("span",{className:`${s} decoration`}),(0,g.jsx)("span",{children:i.Ay.get("strx.stake_data_modal_data")})]}),(0,g.jsx)("div",{className:"market-data-section stake",children:this.renderStakeMarket()})]}):(0,g.jsxs)("div",{className:`market-data ${e}`,children:[(0,g.jsxs)("div",{className:"section-title color-primary",children:[(0,g.jsx)("span",{className:`${s} decoration`}),(0,g.jsx)("span",{children:i.Ay.get("strx.energy_market_data")})]}),(0,g.jsxs)("div",{className:"market-data-section column",children:[this.renderEnergy(),(0,g.jsx)("div",{className:"divider-v"}),(0,g.jsxs)("div",{className:"chart-wrap "+(n?"stake":"energy"),children:[(0,g.jsxs)("div",{className:"title-wrap",children:[(0,g.jsx)("span",{className:"title color-primary",children:n?i.Ay.get("strx.stake_data_staking_apy_modal"):i.Ay.get("strx.energy_rent_price_model")}),(0,g.jsxs)("span",{className:"desc color-light",children:[(0,g.jsx)("span",{className:"desc",children:i.Ay.get("strx.stake_data_energy_renting_apy")}),(0,g.jsx)("span",{className:"y desc",children:n?"Y: APY (%)":`Y: ${i.Ay.get("strx.energy_rent_energy_price")} (sun/${i.Ay.get("strx.energy_day2")})`})]})]}),(0,g.jsx)(m,{dataList:t.model,voteApy:t.voteApy,type:s,totalApy:t.totalApy})]})]})]})}})||p)||p)||p)||p)||p)||p},47767:()=>{},70102:(e,t,s)=>{s.d(t,{A:()=>g});var n,r=s(76998),a=s(98859),i=(s(33270),s(48634)),l=s(96843),o=(s(83933),s(95889),s(852)),c=s(52142),d=(s(75659),s(23446));const g=(0,a.WQ)("network")(n=(0,a.WQ)("lend")(n=(0,a.WQ)("system")(n=(0,a.WQ)("pool")(n=(0,a.WQ)("strx")(n=(0,a.PA)(n=class extends r.Component{constructor(){super(),this.close=()=>{this.props.strx.setData({rentPausedVisible:!1})},this.state={lang:window.localStorage.getItem("lang")||l.Ay.options.currentLocale,approving:!1}}componentDidMount(){}render(){const{theme:e}=this.props.lend,{rentPausedVisible:t}=this.props.strx;return(0,d.jsx)(i.A,{title:l.Ay.get("collateral_tip_title"),visible:t,closable:!1,icon:null,footer:null,width:400,centered:!0,className:`j-modal j-rent-paused-modal  header-border ${e} `,getContainer:()=>document.querySelector(".j-wrapper"),children:(0,d.jsxs)("div",{className:"rent-paused",children:[(0,d.jsx)("img",{className:"rp-icon",src:"white"===e?c:o,alt:""}),(0,d.jsx)("div",{className:"rp-des",children:l.Ay.getHTML("strx.energy_under_upgrading")}),(0,d.jsx)("button",{className:"j-large-btn j-supply rent-now",onClick:()=>this.close(),children:l.Ay.get("got_it")})]})})}})||n)||n)||n)||n)||n)||n},80646:()=>{},87980:()=>{},95889:()=>{},99861:(e,t,s)=>{s.d(t,{A:()=>h});var n,r=s(76998),a=s(59866),i=s(98859),l=s(33270),o=s(95381),c=s(48634),d=s(26559),g=s(65506),m=s(96843),p=s(75659),u=(s(28567),s(83933),s(80646),s(23446));const h=(0,i.WQ)("network")(n=(0,i.WQ)("strx")(n=(0,i.WQ)("energyRental")(n=(0,i.WQ)("system")(n=(0,i.PA)(n=class extends r.Component{constructor(){super(),this.renderRewardList=()=>{const{defaultValue:e,multiRewardData:t}=this.props[this.props.store],{approving:s,lang:n}=this.state;let r=Object.keys(t).reverse();return(0,u.jsx)(o.A.Group,{disabled:s,defaultValue:e,onChange:this.onChange,value:e,children:r.map((n=>(0,u.jsxs)("div",{className:"j-reward-item"+(e.length>=p.Ay.rewardNum&&!e.includes(n)||s?" j-reward-item-disabled":""),children:[(0,u.jsx)(o.A,{className:"j-checkbox blue",value:n,disabled:e.length>=p.Ay.rewardNum&&!e.includes(n),children:m.Ay.getHTML("v2.rewards.num",{value:n})})," ",(0,u.jsxs)("div",{className:"tar",children:[(0,u.jsxs)("span",{className:"j-value",children:[(0,l.ZV)((0,l.gH)(parseInt(t[n].amount)).div(p.Ay.tokenDefaultPrecision),6,{miniText:.001})," "]}),(0,u.jsx)("span",{className:"j-reward-unit",children:" JST"})]})]},n)))})},this.onChange=e=>{let t=null===e||void 0===e?void 0:e.length;if(t>p.Ay.rewardNum)return;this.props[this.props.store].filterReward(e);const{multiRewardData:s}=this.props[this.props.store];let n=Object.keys(s).length;t===p.Ay.rewardNum||t===n?this.setState({checkAll:!0}):t<p.Ay.rewardNum&&this.setState({checkAll:!1})},this.onCheckAllChange=e=>{let t=e.target.checked;if(t){const{multiRewardData:e}=this.props[this.props.store];this.props[this.props.store].filterReward(Object.keys(e)),window.gtag("event","PC_select_all_reward",{event_category:"PC_V1.5",event_label:"select_all_reward"})}else this.props[this.props.store].setData({defaultValue:[],choosedTotalReward:0}),window.gtag("event","PC_unselect_all_reward",{event_category:"PC_V1.5",event_label:"unselect_all_reward"});this.setState({checkAll:t})},this.getReward=async()=>{if(this.props.system.clearRejectError(),0===this.props.network.isRightChain)return void this.props.network.changeChain();if(0===this.props.network.isMainNetwork)return void this.props.network.showNetworkErrorModal();window.gtag("event","PC_claim_confirm",{event_category:"PC_V1.5",event_label:"claim_confirm"});const{multiRewardData:e,defaultValue:t,choosedTotalReward:s}=this.props[this.props.store],n={title:"strx.energy_notification_reward_title",title2:"deposit.transactionsent",title3:"v2.transaction_confirm_fail",title4:"deposit.confirm_transaction",obj:{value:(0,l.ZV)(s,6,{miniText:.001}),token:"JST"},transType:"reward"};this.setState({approving:!0});let r=[];t.map((t=>{r.push([e[t].merkleIndex,e[t].index,e[t].amount,e[t].proof])}));const a=p.Ay.sTRX.merkleDistributor;const i=await this.props.system.getFeeLimitCommon(a,"multiClaim((uint256,uint256,uint256,bytes32[])[])",[]);await this.props.system.getAllowanceMultiReward([r],n,i)&&(window.gtag("event","PC_claim_success",{event_category:"PC_V1.5",event_label:"claim_success"}),this.props.network.setData({allowanceVisible:!1}),setTimeout((()=>{this.props[this.props.store].getMultiReward()}),5e3)),this.setState({approving:!1})},this.timerInterval=null,this.state={mobile:(0,a.A)(window.navigator).any,lang:window.localStorage.getItem("lang")||m.Ay.options.currentLocale,approving:!1,indeterminate:!0,checkAll:!0}}render(){const{mobile:e,lang:t,checkAll:s,data:n,approving:r}=this.state,{theme:a,multiRewardData:i,defaultValue:p,choosedTotalReward:h,totalReward:y,collapse:x}=this.props[this.props.store],{allowanceVisible:v}=this.props.network,{transModalInfo:_}=this.props.system,{declined:j,transType:A}=_;return(0,u.jsx)(c.A,{title:m.Ay.get("strx.energy_waiting_get_allowance"),maskClosable:!1,visible:v,closable:!0,onCancel:()=>{this.props.system.clearRejectError(),this.props.network.setData({allowanceVisible:!1}),this.props[this.props.store].collapseInit(),this.props[this.props.store].filterReward(),window.gtag("event","PC_reward_modal_close",{event_category:"PC_V1.5",event_label:"reward_modal_close"})},footer:null,className:"j-modal j-reward-modal j-allowance-modal header-border",width:450,centered:!e,getContainer:()=>document.querySelector(".j-wrapper"),children:(0,u.jsxs)("div",{className:"j-rewards j-allowance",children:[(0,u.jsx)("div",{className:"rewards-icon"}),(0,u.jsx)("div",{className:"rewards-title",children:m.Ay.get("v2.rewards.claiming")}),(0,u.jsxs)("div",{className:"rewards-value",children:[(0,l.gH)(h).eq(0)?"0":(0,l.ZV)(h,6,{miniText:.001})," ","JST"]}),(0,u.jsxs)("div",{className:"rewards-lists",children:[(0,u.jsxs)("div",{className:"rewards-list-top",children:[(0,u.jsxs)("div",{className:"flex aic",children:[(0,u.jsxs)(o.A,{className:"j-checkbox blue",disabled:r,onChange:this.onCheckAllChange,checked:s,children:[m.Ay.get("strx.energy_rounds")," (",p.length,"/",Object.keys(i).length,")"]}),Object.keys(i).length>3&&(0,u.jsx)(d.A,{title:m.Ay.get("v2.rewards.most_can_claim"),placement:"top",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown",getPopupContainer:()=>document.querySelector(".j-reward-modal"),children:(0,u.jsx)("span",{className:"j-tooltip-icon"})})]}),(0,u.jsxs)("div",{className:"j-collapse"+(x?"":" active"),onClick:()=>{this.props[this.props.store].setData({collapse:!x}),x?window.gtag("event","PC_rewards_uncollapse",{event_category:"PC_V1.5",event_label:"rewards_uncollapse"}):window.gtag("event","PC_rewards_collapse",{event_category:"PC_V1.5",event_label:"rewards_collapse"})},children:[m.Ay.get("strx.energy_allowance_detail"),(0,u.jsx)("span",{className:"j-collapse-icon"})]})]}),!x&&(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"pr",children:[(0,u.jsx)("div",{className:"rewards-list-content scroll-bar",children:this.renderRewardList()}),Object.keys(i).length>3&&(0,u.jsx)("div",{className:"linear"})]})})]}),(0,u.jsx)("div",{className:"borrow-tip borrow-important-tip "+((0,l.gH)(y).minus(h).gt(0)?"":"opacity"),children:((0,l.gH)(y).minus(h).gt(0),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("span",{className:"en-US"===t?"en":""}),m.Ay.getHTML("v2.rewards.have_reclaimed",{value:(0,l.ZV)((0,l.gH)(y).minus(h),8,{miniText:.001}),token:"JST"})]}))}),r?(0,u.jsxs)("button",{className:"j-large-btn j-blue j-signing mt-0",disabled:!0,children:[m.Ay.get("v2.sign_in_wallet"),(0,u.jsx)("span",{className:"siging-icon"})]}):(0,u.jsx)(g.A,{className:"j-large-btn j-blue mt-0",disabled:(null===p||void 0===p?void 0:p.length)<=0,onClick:this.getReward,children:m.Ay.get("v2.rewards.claim_confirm")}),j&&"reward"===A&&(0,u.jsxs)("div",{className:"j-error-tip wallet-reject",children:[(0,u.jsx)("span",{className:"j-error-img"}),(0,u.jsx)("div",{children:m.Ay.get("v2.reject_in_wallet")})]})]})})}})||n)||n)||n)||n)||n}}]);