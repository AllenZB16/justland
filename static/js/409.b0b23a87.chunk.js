"use strict";(self.webpackChunkjustlend_front=self.webpackChunkjustlend_front||[]).push([[409],{73974:(e,t,i)=>{i.r(t),i.d(t,{default:()=>B});var l,a=i(76998),s=i(96843),n=i(59866),r=i(25443),o=i.n(r),d=i(98859),c=i(93995),u=i(13412),h=i(33270),p=i(26559),m=i(67441),g=i(65506),j=i(10723),x=i(95381),v=i(76181),q=i(94709),k=i(25609),y=i(48634),A=i(48727),w=i(75659),N=i(97105),C=(i(12492),i(23446));const{Option:b}=k.A;const S=(0,d.WQ)("lend")(l=(0,d.WQ)("system")(l=(0,d.WQ)("network")(l=(0,d.PA)(l=class extends a.Component{constructor(e){var t;super(e),t=this,this.componentDidMount=()=>{this.listInit(),window.gtag("event","liquidate_liquidatepop",{event_category:"liquidate",event_label:"liquidate_liquidatepop"})},this.listInit=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.state.switchValue;const{borrowTokenList:i,collateralTokenList:l}=t.props.dataInfo,{jtokens:a}=t.props.lend.liquidateInfo,s={};l.map((e=>{s[e.symbol]=e}));const n={};i.map((e=>{n[e.symbol]=e}));let r=t.collateralTokenListSort(l,e),o=i.sort(((e,t)=>t.valueUsd-e.valueUsd));const d=r[0].symbol,c=o[0].symbol;t.setState({collateralTokenMap:s,borrowTokenMap:n,getSelectValue:d,repaySelectValue:c},(()=>{t.maxRepayAmountFilter({collateralTokenMap:s,borrowTokenMap:n,repaySelectValue:c,getSelectValue:d})}))},this.getBalanceInfo=async function(e,i){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.props.network.defaultAccount,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.state.repaySelectValue;try{const s=await(0,N.p5)({token:e,jtokenAddress:i,precision:w.Ay[(""+a).toLocaleLowerCase()].precision},l);t.setState({balanceInfo:s}),t.maxRepayAmountFilter({balanceInfo:s,repaySelectValue:a})}catch(s){console.log("repayChange ",s)}},this.maxRepayAmountFilter=function(){let{getSelectValue:e=t.state.getSelectValue,repaySelectValue:i=t.state.repaySelectValue,collateralTokenMap:l=t.state.collateralTokenMap,borrowTokenMap:a=t.state.borrowTokenMap,balanceInfo:s=t.state.balanceInfo}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var r,o,d,c;if(!i)return"--";const{balanceMap:s}=t.props.lend,u=(0,h.gH)(null===(r=a[i])||void 0===r?void 0:r.valueUsd).times(.5),p=(0,h.gH)(null===(o=l[e])||void 0===o?void 0:o.valueUsd).div(1.08),m=null===(d=s[i])||void 0===d?void 0:d.balance;let g=(0,h.gH)(u).div(null===(c=a[i])||void 0===c?void 0:c.price);return(0,h.gH)(p).lt(u)&&(g=(0,h.gH)(p).div(a[i].price)),(0,h.gH)(m).lt(g)&&(g=m),g=(0,h.gH)(g)._toFixed(w.Ay[(""+i).toLocaleLowerCase()].decimal,1),n||t.setState({maxRepayAmountLimit:g}),g}catch(u){console.log("maxRepayAmountFilter ",u)}},this.liquidateHide=()=>{this.props.lend.setData({liquidateShow:!1}),window.gtag("event","click",{event_category:"liquidate",event_label:"liquidate_liquidatepop_click_Stable"})},this.onSwitchChange=e=>{e?(window.localStorage.setItem("stableCoinsFirst","true"),window.gtag("event","click",{event_category:"liquidate",event_label:"liquidate_liquidatepop_click_Stable"})):window.localStorage.setItem("stableCoinsFirst",""),this.setState({switchValue:e}),this.listInit(e)},this.getSelectChange=e=>{this.setState({getSelectValue:e,repayValue:""}),this.repayChange(""),this.maxRepayAmountFilter({getSelectValue:e})},this.repaySelectChange=e=>{const{borrowTokenMap:t}=this.state,{jtokens:i}=this.props.lend.liquidateInfo;this.setState({repaySelectValue:e,repayValue:""}),this.repayChange(""),this.maxRepayAmountFilter({repaySelectValue:e})},this.repayChange=e=>{try{this.props.system.clearRejectError();let{repaySelectValue:t,borrowTokenMap:i,maxRepayAmountLimit:l}=this.state;const{valid:a,str:n}=(0,h.PY)(e,w.Ay[t.toLocaleLowerCase()].decimal);if(a){this.setState({repayValue:n});let e="";e=(0,h.gH)(n).isNaN()||(0,h.gH)(n).eq(0)?"":(0,h.gH)(n).gt(l)?s.Ay.get("liquidate.liquidate_tip13"):"",this.setState({errMsg:e})}}catch(t){console.log("repayChange ",t)}},this.clickMax=()=>{const{repaySelectValue:e,borrowTokenMap:t,maxRepayAmountLimit:i}=this.state;this.setState({repayValue:i},(()=>{this.repayChange(i)})),window.gtag("event","click",{event_category:"liquidate",event_label:"liquidate_liquidatepop_click_inputMax"})},this.approve=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.state.repaySelectValue;try{t.props.system.clearRejectError();const{borrowTokenMap:i,collateralTokenMap:l}=t.state,{jtokens:a}=t.props.lend.liquidateInfo;t.setState({approving:!0});await t.props.system.approveToken({collateralAddress:i[e].tokenAddress,jtokenAddress:a["j"+e],transType:"approve"})&&(t.setState({hasApproved:!0}),window.gtag("event","click",{event_category:"liquidate",event_label:"liquidate_liquidatepop_click_Approve"})),t.setState({approving:!1})}catch(i){console.log("Error: approve error")}},this.submit=async()=>{try{this.props.system.clearRejectError(),window.gtag("event","click",{event_category:"liquidate",event_label:"liquidate_liquidatepop_click_Liquidate"});const{lang:e,switchValue:t,getSelectValue:i,repaySelectValue:l,repayValue:a,collateralTokenMap:s,borrowTokenMap:n,errMsg:r}=this.state,{borrower:o}=this.props.dataInfo,{jtokens:d}=this.props.lend.liquidateInfo,c={title:"notification.transaction_confirm",title2:"notification.transactionsent",title3:"notification.transaction_confirm_fail",title4:"notification.confirm_transaction",obj:{value:a,token:l},transType:"liquidate"};this.setState({approving:!0});let u="";const p=d["j"+l],m=s[i].jtokenAddress,g=(0,h.gH)(a).times(w.Ay[null===l||void 0===l?void 0:l.toLocaleLowerCase()].precision)._toFixed(0,1);if("TRX"===l){let e="liquidateBorrow(address,address)",t=[{type:"address",value:o},{type:"address",value:m}];const i={feeLimit:await this.props.system.getFeeLimitCommon(p,e,t)};u=await this.props.system.liquidateBorrowJtrx(p,o,m,g,c,i)}else{let e="liquidateBorrow(address,uint256,address)",t=[{type:"address",value:o},{type:"uint256",value:g},{type:"address",value:m}];const i={feeLimit:await this.props.system.getFeeLimitCommon(p,e,t)};u=await this.props.system.liquidateBorrow(p,o,m,g,c,i)}if(-1===u)return window.gtag("event","click",{event_category:"liquidate",event_label:"liquidate_errorpop"}),this.props.lend.setData({exceptionVisible:!0}),void this.setState({approving:!1});u?(this.liquidateHide(),setTimeout((()=>{this.props.lend.getLiquidateInfo()}),5e3),window.gtag("event","click",{event_category:"liquidate",event_label:"liquidate_success_pop"})):window.gtag("event","click",{event_category:"liquidate",event_label:"liquidate_timeout_pop"}),this.setState({approving:!1})}catch(e){console.log("Error: liquidateBorrow error"),window.gtag("event","click",{event_category:"liquidate",event_label:"liquidate_failed_pop"}),this.setState({approving:!1})}},this.collateralTokenListSort=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.state.switchValue;if(e=e.sort(((e,t)=>t.valueUsd-e.valueUsd)),i){let t=["jUSDD","jUSDT","jTUSD","jUSDC","jUSDJ","jBUSD","jwstUSDT"],i=[],l=[];return e.map((e=>{t.includes(e.symbol)?i.push(e):l.push(e)})),[...i,...l]}return e},this.state={lang:window.localStorage.getItem("lang")||s.Ay.options.currentLocale,mobile:(0,n.A)(window.navigator).any,switchValue:!!window.localStorage.getItem("stableCoinsFirst"),getSelectValue:"",repaySelectValue:"",collateralTokenMap:{},borrowTokenMap:{},repayValue:"",errMsg:"",approving:!1,hasApproved:!1,maxRepayAmountLimit:"--"}}render(){var e;const{borrowTokenList:t,collateralTokenList:i}=this.props.dataInfo;let l=this.collateralTokenListSort(i);const{liquidateShow:a}=this.props.lend,{lang:n,switchValue:r,getSelectValue:o,repaySelectValue:d,repayValue:c,collateralTokenMap:u,borrowTokenMap:g,errMsg:j,approving:x,hasApproved:v,maxRepayAmountLimit:N,balanceInfo:S,mobile:f}=this.state,{balanceMap:H}=this.props.lend;let V=t.sort(((e,t)=>t.valueUsd-e.valueUsd));const D=o?u[o].price:0,I=d?g[d].price:0,M=(0,h.fK)(c).times(I).div(D),R=(0,h.gH)(M).times(D),T=(0,h.gH)(M).times(.08),E=(0,h.gH)(T).times(D),L=(0,h.gH)(M).plus(T),U=(0,h.gH)(R).plus(E),{transModalInfo:B}=this.props.system,{declined:_,transType:Z}=B;let Q=!0;var F,O;d&&(Q=(0,h.gH)((0,h.gH)(c).times(null===(F=w.Ay[(""+d).toLocaleLowerCase()])||void 0===F?void 0:F.precision)).lte(null===(O=H[d])||void 0===O?void 0:O.allowance));return(0,C.jsx)(y.A,{visible:!0,title:s.Ay.get("liquidate.liquidate_liquidate"),width:400,centered:!0,maskClosable:!1,footer:null,className:"j-modal header-border j-liquidate-modal "+(f?" j-liquidate-m-modal":""),onCancel:()=>this.liquidateHide(),getContainer:()=>document.querySelector(".j-wrapper"),children:(0,C.jsxs)("div",{className:"j-liquidate-content",children:[(0,C.jsxs)("div",{className:"jc-main flex aic jcsb",children:[(0,C.jsxs)("div",{className:"flex aic",children:[(0,C.jsx)("span",{className:"lc-title",children:s.Ay.get("liquidate.liquidate_get")}),(0,C.jsxs)("span",{className:"lc-subtitle",children:["(",s.Ay.get("liquidate.liquidate_tip3"),")"]})]}),(0,C.jsxs)("div",{className:"bs-list flex aic",children:[(0,C.jsx)("span",{className:"lc-subtitle",children:s.Ay.get("liquidate.liquidate_tip5")}),(0,C.jsx)(A.A,{on:r,lang:n,onClick:()=>{this.onSwitchChange(!r)}})]})]}),(0,C.jsx)("div",{className:"liquidate-select liquidate-select-get pr",children:(0,C.jsxs)(k.A,{value:o,onChange:this.getSelectChange,dropdownClassName:"liquidate-select-dropdown"+(l.length<=3?" liquidate-select-dropdown-hide":""),getPopupContainer:()=>document.querySelector(".liquidate-select-get"),children:[(0,C.jsx)(b,{disabled:!0,className:"get-select-title",children:(0,C.jsxs)("div",{children:[(0,C.jsx)("div",{className:"get-select-subtile",children:s.Ay.get("liquidate.liquidate_collateral")}),(0,C.jsx)("div",{className:"flex aic",children:f?(0,C.jsx)(q.L,{overlayClassName:"j-tooltip-dropdown",title:s.Ay.get("liquidate.liquidate_tip4"),placement:"topRight",arrowPointAtCenter:!0,getPopupContainer:()=>document.querySelector(".j-liquidate-modal"),children:(0,C.jsx)("span",{className:"get-select-subtile",children:s.Ay.get("liquidate.liquidate_collateral_value")})}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(p.A,{overlayClassName:"j-tooltip-dropdown",title:s.Ay.get("liquidate.liquidate_tip4"),placement:"top",arrowPointAtCenter:!0,getPopupContainer:()=>document.querySelector(".liquidate-select-get"),children:(0,C.jsx)("span",{className:"j-tooltip-icon lower-icon"})}),(0,C.jsx)("span",{className:"get-select-subtile ml-8",children:s.Ay.get("liquidate.liquidate_collateral_value")})]})})]})},"getSelectTitle"),l.map((e=>(0,C.jsx)(b,{value:e.symbol,children:(0,C.jsxs)("div",{className:"flex aic jcsb",children:[(0,C.jsxs)("div",{className:"flex aic",children:[(0,C.jsx)("img",{className:"jc-logo",src:(0,h.TA)(e.symbol),alt:""}),(0,C.jsx)("span",{className:"jc-text",children:e.symbol}),(0,C.jsx)("em",{className:"jc-selected-sign"+(e.symbol===o?" selected":"")})]}),(0,C.jsxs)("div",{className:"jc-values",children:[(0,C.jsx)("div",{className:"jc-select-value",title:(0,h.ZV)((0,h.gH)(e.valueUsd),(0,h.gH)(e.valueUsd).lt(.01)?18:2,{needDolar:!0,cutZero:!0}),children:(0,h.ZV)((0,h.gH)(e.valueUsd),(0,h.gH)(e.valueUsd).lt(.01)?18:2,{needDolar:!0,cutZero:!0})}),(0,C.jsx)("div",{className:"jc-select-amount",title:(0,h.ZV)(e.amount,(0,h.gH)(e.amount).lt(1)?18:2,{cutZero:!0}),children:(0,h.ZV)(e.amount,(0,h.gH)(e.amount).lt(1)?18:2,{cutZero:!0})})]})]})},e.jtokenAddress)))]})}),(0,C.jsxs)("div",{className:"jc-main flex aic",children:[(0,C.jsx)("span",{className:"lc-title",children:s.Ay.get("liquidate.liquidate_repay")}),(0,C.jsxs)("span",{className:"lc-subtitle",children:["(",s.Ay.get("liquidate.liquidate_tip6"),")"]})]}),(0,C.jsx)("div",{className:"liquidate-select liquidate-select-repay pr",children:(0,C.jsxs)(k.A,{value:d,onChange:this.repaySelectChange,dropdownClassName:"liquidate-select-dropdown"+(V.length<=3?" liquidate-select-dropdown-hide":""),getPopupContainer:()=>document.querySelector(".liquidate-select-repay"),children:[(0,C.jsx)(b,{disabled:!0,className:"get-select-title",children:(0,C.jsxs)("div",{className:"j-option-ele",children:[(0,C.jsx)("div",{className:"get-select-subtile",children:s.Ay.get("liquidate.liquidate_debt")}),(0,C.jsx)("div",{className:"get-select-subtile opacity-5",children:s.Ay.get("liquidate.risk.total_debt")}),(0,C.jsx)("div",{className:"flex aic",children:f?(0,C.jsx)(q.L,{overlayClassName:"j-tooltip-dropdown",title:s.Ay.get("liquidate.liquidate_tip7"),placement:"topLeft",arrowPointAtCenter:!0,getPopupContainer:()=>document.querySelector(".j-liquidate-modal"),children:(0,C.jsx)("span",{className:"get-select-subtile",children:s.Ay.get("liquidate.liquidate_max")})}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(p.A,{overlayClassName:"j-tooltip-dropdown",title:s.Ay.get("liquidate.liquidate_tip7"),placement:"top",arrowPointAtCenter:!0,getPopupContainer:()=>document.querySelector(".liquidate-select-get"),children:(0,C.jsx)("span",{className:"j-tooltip-icon lower-icon"})}),(0,C.jsx)("span",{className:"get-select-subtile ml-8",children:s.Ay.get("liquidate.liquidate_max")})]})})]})},"repaySelectTitle"),V.map((e=>(0,C.jsx)(b,{value:e.symbol,children:(0,C.jsxs)("div",{className:"flex aic jcsb j-option-ele",children:[(0,C.jsxs)("div",{className:"flex aic",children:[(0,C.jsx)("img",{className:"jc-logo",src:(0,h.iG)(e.symbol),alt:""}),(0,C.jsx)("span",{className:"jc-text",children:e.symbol}),(0,C.jsx)("em",{className:"jc-selected-sign"+(e.symbol===d?" selected":"")})]}),(0,C.jsxs)("div",{className:"jc-values jc-ellipsis jc-values-hide opacity-5",children:[(0,C.jsx)("div",{className:"jc-select-value",title:(0,h.ZV)(e.valueUsd,(0,h.gH)(e.valueUsd).lt(.01)?18:2,{cutZero:!0,needDolar:!0}),children:(0,h.ZV)(e.valueUsd,(0,h.gH)(e.valueUsd).lt(.01)?18:2,{cutZero:!0,needDolar:!0})}),(0,C.jsx)("div",{className:"jc-select-amount",title:(0,h.ZV)(e.amount,(0,h.gH)(e.amount).lt(1)?18:2,{cutZero:!0}),children:(0,h.ZV)(e.amount,(0,h.gH)(e.amount).lt(1)?18:2,{cutZero:!0})})]}),(0,C.jsxs)("div",{className:"jc-values jc-ellipsis",children:[(0,C.jsx)("div",{className:"jc-select-value",title:(0,h.ZV)(Object.keys(g).length<=0?"--":(0,h.gH)(e.price).times(this.maxRepayAmountFilter({repaySelectValue:e.symbol,getSelectValue:o||l[0].symbol},!0)),(0,h.gH)(e.price).times(this.maxRepayAmountFilter({repaySelectValue:e.symbol,getSelectValue:o||l[0].symbol},!0)).lt(.01)?18:2,{cutZero:!0,needDolar:!0}),children:(0,h.ZV)(Object.keys(g).length<=0?"--":(0,h.gH)(e.price).times(this.maxRepayAmountFilter({repaySelectValue:e.symbol,getSelectValue:o||l[0].symbol},!0)),(0,h.gH)(e.price).times(this.maxRepayAmountFilter({repaySelectValue:e.symbol,getSelectValue:o||l[0].symbol},!0)).lt(.01)?18:2,{cutZero:!0,needDolar:!0})}),(0,C.jsx)("div",{className:"jc-select-amount",title:(0,h.ZV)(Object.keys(g).length<=0?"--":this.maxRepayAmountFilter({repaySelectValue:e.symbol,getSelectValue:o||l[0].symbol},!0),(0,h.gH)(this.maxRepayAmountFilter({repaySelectValue:e.symbol,getSelectValue:o||l[0].symbol},!0)).lt(1)?18:2,{cutZero:!0}),children:(0,h.ZV)(Object.keys(g).length<=0?"--":this.maxRepayAmountFilter({repaySelectValue:e.symbol,getSelectValue:o||l[0].symbol},!0),(0,h.gH)(this.maxRepayAmountFilter({repaySelectValue:e.symbol,getSelectValue:o||l[0].symbol},!0)).lt(1)?18:2,{cutZero:!0})})]})]})},e.tokenAddress)))]})}),(0,C.jsxs)("div",{className:"jc-main flex aic jcsb",children:[(0,C.jsx)("div",{className:"flex aic",children:(0,C.jsx)("span",{className:"lc-title",children:s.Ay.get("liquidate.liquidate_repay_amount")})}),(0,C.jsxs)("div",{className:"bs-list flex aic liquidate-max-title",children:[f?(0,C.jsx)(q.L,{overlayClassName:"j-tooltip-dropdown ad-right",title:s.Ay.get("liquidate.liquidate_tip7"),placement:"top",arrowPointAtCenter:!0,children:(0,C.jsx)("span",{className:"lc-subtitle",children:s.Ay.get("liquidate.liquidate_max")})}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("span",{className:"lc-subtitle",children:s.Ay.get("liquidate.liquidate_max")}),(0,C.jsx)(p.A,{overlayClassName:"j-tooltip-dropdown",title:s.Ay.get("liquidate.liquidate_tip7"),placement:"top",arrowPointAtCenter:!0,getPopupContainer:()=>document.querySelector(".j-liquidate-modal"),children:(0,C.jsx)("span",{className:"j-tooltip-icon"})})]}),(0,C.jsxs)("span",{className:"jc-amount",title:(0,h.ZV)(N,(0,h.gH)(N).lt(1)?18:2,{cutZero:!0,showNegative:!0}),children:[(0,h.ZV)(N,(0,h.gH)(N).lt(1)?18:2,{cutZero:!0,showNegative:!0})," ",d]})]})]}),(0,C.jsxs)("div",{className:"jc-input pr"+((0,h.gH)(c).isNaN()?"":" jc-input-repay"),children:[(0,C.jsx)(m.A,{className:"j-input "+(j?"j-error-input":""),placeholder:s.Ay.get("liquidate.liquidate_enter_repay_amount"),allowClear:!0,addonAfter:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("span",{className:"j-input-token",children:d}),(0,C.jsx)("span",{className:"j-max pointer",onClick:()=>{this.clickMax()},children:s.Ay.get("v2.max")})]}),value:(0,h.QA)(c),onChange:e=>{this.repayChange((0,h.DS)(e.target.value)),"click"===e.type&&window.gtag("event","click",{event_category:"liquidate",event_label:"liquidate_liquidatepop_click_inputClose"})}}),j&&(0,C.jsxs)("div",{className:"j-error-tip",children:[(0,C.jsx)("span",{className:"j-error-img"}),(0,C.jsx)("div",{children:j})]}),(0,C.jsx)("div",{className:"jc-input-value",children:(0,h.ZV)((0,h.gH)(c).times(I),(0,h.gH)((0,h.gH)(c).times(I)).lt(.01)?18:2,{cutZero:!0,needDolar:!0})})]}),(0,C.jsxs)("div",{className:"jc-tips flex aic jcsb",children:[(0,C.jsx)("div",{className:"flex aic",children:f?(0,C.jsx)(q.L,{overlayClassName:"j-tooltip-dropdown",title:s.Ay.get("liquidate.risk.tip1"),placement:"topRight",arrowPointAtCenter:!0,getPopupContainer:()=>document.querySelector(".j-liquidate-modal"),children:(0,C.jsx)("span",{className:"lc-subtitle can-get",children:s.Ay.get("liquidate.risk.can_get")})}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("span",{className:"lc-subtitle can-get",children:s.Ay.get("liquidate.risk.can_get")}),(0,C.jsx)(p.A,{overlayClassName:"j-tooltip-dropdown",title:s.Ay.get("liquidate.risk.tip1"),placement:"top",arrowPointAtCenter:!0,getPopupContainer:()=>document.querySelector(".j-liquidate-modal"),children:(0,C.jsx)("span",{className:"j-tooltip-icon ml-8"})})]})}),(0,C.jsxs)("div",{className:"",children:[(0,C.jsx)("div",{className:"jc-token",title:(0,h.gH)(c).isNaN()?"--":(0,h.ZV)(L,(0,h.gH)(L).lt(1)?18:2,{cutZero:!0})+` ${o}`,children:(0,h.gH)(c).isNaN()?"--":(0,h.ZV)(L,(0,h.gH)(L).lt(1)?18:2,{cutZero:!0})+` ${o}`}),(0,C.jsxs)("div",{className:"jc-value",title:(0,h.gH)(c).isNaN()?"--":"$"+(0,h.ZV)(U,(0,h.gH)(U).lt(.01)?18:2,{cutZero:!0}),children:[" ",(0,h.gH)(c).isNaN()?"--":"~ $"+(0,h.ZV)(U,(0,h.gH)(U).lt(.01)?18:2,{cutZero:!0})]}),(0,C.jsx)(p.A,{overlayClassName:"j-tooltip-dropdown",title:s.Ay.get("liquidate.liquidate_reward",{amount:(0,h.gH)(c).isNaN()?"--":(0,h.ZV)(T,(0,h.gH)(T).lt(1)?18:2,{cutZero:!0}),symbol:o}),placement:"bottom",arrowPointAtCenter:!0,getPopupContainer:()=>document.querySelector(".j-liquidate-modal"),children:(0,C.jsx)("div",{className:"liquidate-reward",children:s.Ay.get("liquidate.liquidate_reward",{amount:(0,h.gH)(c).isNaN()?"--":(0,h.ZV)(T,(0,h.gH)(T).lt(1)?18:2,{cutZero:!0}),symbol:o})})})]})]}),(0,C.jsx)("div",{className:"liquidate-tips",children:(0,C.jsx)("div",{className:"liquidate-tip",children:s.Ay.get("liquidate.modal_tip1")})}),(0,h.gH)(this.props.dataInfo.risk).lt(1)?(0,C.jsx)(p.A,{overlayClassName:"j-tooltip-dropdown",title:s.Ay.get("liquidate.can_not_liquidate_tip"),placement:"top",arrowPointAtCenter:!0,children:(0,C.jsx)("button",{className:"j-large-btn j-supply disabled",children:s.Ay.get("liquidate.liquidate_submit")})}):x?(0,C.jsxs)("button",{className:"j-large-btn j-supply j-signing",disabled:!0,children:[s.Ay.get("v2.sign_in_wallet"),(0,C.jsx)("span",{className:"siging-icon"})]}):Q&&(0,h.gH)(null===(e=H[d])||void 0===e?void 0:e.allowance).gt(0)||v?(0,C.jsx)("button",{className:"j-large-btn j-supply",disabled:j||(0,h.gH)(c).isNaN()||(0,h.gH)(c).eq(0)||(0,h.gH)(this.props.dataInfo.risk).lt(1),onClick:()=>this.submit(),children:_&&"liquidate"===Z?s.Ay.get("liquidate.liquidate_submit_again"):s.Ay.get("liquidate.liquidate_submit")}):(0,C.jsx)("button",{className:"j-large-btn j-supply",disabled:j||(0,h.gH)(c).isNaN()||(0,h.gH)(c).eq(0)||(0,h.gH)(this.props.dataInfo.risk).lt(1),onClick:()=>this.approve(),children:s.Ay.getHTML("stake.approve",{token:d})}),_&&("liquidate"===Z||"approve"===Z)&&(0,C.jsxs)("div",{className:"j-error-tip wallet-reject",children:[(0,C.jsx)("span",{className:"j-error-img"}),(0,C.jsx)("div",{children:s.Ay.get("v2.reject_in_wallet")})]})]})})}})||l)||l)||l)||l,f=i.p+"static/media/exception-icon.b755af3a8714e3306d97.png";var H;const{Option:V}=k.A;const D=(0,d.WQ)("lend")(H=(0,d.WQ)("system")(H=(0,d.WQ)("network")(H=(0,d.PA)(H=class extends a.Component{constructor(e){super(e),this.componentDidMount=()=>{},this.state={lang:window.localStorage.getItem("lang")||s.Ay.options.currentLocale,mobile:(0,n.A)(window.navigator).any,switchValue:!!window.localStorage.getItem("stableCoinsFirst"),getSelectValue:"",repaySelectValue:"",collateralTokenMap:{},borrowTokenMap:{},repayValue:"",errMsg:"",approving:!1,hasApproved:!1,maxRepayAmountLimit:"--"}}render(){const{mobile:e}=this.state,{exceptionVisible:t,theme:i}=this.props.lend;return(0,C.jsxs)(y.A,{title:"",visible:t,closable:!1,icon:null,onCancel:()=>this.props.lend.setData({exceptionVisible:!1}),footer:null,width:e?"calc(100% - 40px)":400,centered:!0,className:`j-modal j-transaction-modal ${i} short`,children:[(0,C.jsx)("div",{className:"trans-title",children:s.Ay.get("liquidate.liquidate_failed")}),(0,C.jsxs)("div",{className:"trans-body center",children:[(0,C.jsx)("div",{className:"trans-icon",children:(0,C.jsx)("img",{src:"white"===i?"data:image/png;base64,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":f,alt:""})}),(0,C.jsx)("div",{className:"trans-tips",children:s.Ay.get("liquidate.liquidate_tip14")}),(0,C.jsx)("button",{className:"j-large-btn loading-close",onClick:()=>{this.props.lend.setData({exceptionVisible:!1})},children:s.Ay.get("deposit.closed")})]})]})}})||H)||H)||H)||H;i(62055);var I,M=i(40437),R=i(42780);i(73853);const{feedbackUrl:T}=w.TS;let E=null;const L=(0,d.WQ)("network")(I=(0,d.WQ)("lend")(I=(0,d.WQ)("system")(I=(0,d.PA)(I=class extends a.Component{constructor(e){super(e),this.componentDidMount=async()=>{document.title="Liquidation - JustLend DAO",this.props.network.on("connect",(async()=>{await this.props.lend.getLiquidateInfo(),window.localStorage.getItem("need_reload")&&(window.localStorage.removeItem("need_reload"),window.location.reload())})),await this.props.lend.getLatestBlockInfo()},this.componentWillUnmount=()=>{clearInterval(E)},this.authorityJudge=()=>{var e,t;const{lang:i}=this.state,{hasLiquidateBetaAuthority:l,applicationMap:a}=this.props.lend;(1!==(null===a||void 0===a||null===(e=a.liquidate)||void 0===e?void 0:e.phase)||l)&&null!==a&&void 0!==a&&null!==(t=a.liquidate)&&void 0!==t&&t.switchOn||clearTimeout(null)},this.disclaimerShowJudge=()=>{const{defaultAccount:e}=this.props.network,t=(0,h.VK)(),i=window.localStorage.getItem(e+("Unknown"!==t.browser?t.browser:t.appName)),l=(0,h.Sp)();return i?(this.props.lend.setData({isDisclaimerStoraged:!0}),!1):("no"===l.disclaimer?this.props.lend.setData({isDisclaimerStoraged:!1}):this.props.lend.setData({disclaimerShow:!0,isDisclaimerStoraged:!1}),!0)},this.getUserData=async()=>{const{isConnected:e}=this.props.network},this.getMarketData=async()=>{await this.props.lend.getLiquidateInfo(),this.onCheckAllChangeDebt(!0),this.onCheckAllChangeCollateral(!0),clearInterval(E),E=setInterval((()=>{this.props.lend.getLiquidateInfo(),this.setState({refreshDate:o()().format("YYYY-MM-DD HH:mm")})}),6e4)},this.getInfoColumns=()=>{const{mobile:e}=this.state;return[{title:s.Ay.get("liquidate.liquidate_account"),dataIndex:"borrower",key:"1",ellipsis:!0,fixed:"left",width:(0,n.A)(window.navigator).any?60:360,render:(e,t)=>(0,C.jsx)("div",{className:"liquidate-td account-td",children:e.substr(0,3)+"..."+e.substring(e.length-3)})},{title:(0,C.jsxs)("span",{onClick:()=>{window.gtag("event","click",{event_category:"liquidate",event_label:"liquidate_click_Collateral"})},className:"ant-table-column-title",children:[(0,C.jsx)(p.A,{overlayClassName:"j-tooltip-dropdown",title:s.Ay.get("liquidate.liquidate_tip1"),placement:"top",arrowPointAtCenter:!0,children:(0,C.jsx)("span",{className:"j-tooltip-icon j-info-icon mr-4"})}),s.Ay.get("liquidate.liquidate_collateral")]}),dataIndex:"totalCollateralUsd",sortDirections:["descend","ascend"],sorter:(e,t)=>e.totalCollateralUsd-t.totalCollateralUsd,showSorterTooltip:!1,key:"2",align:"left",render:(e,t)=>{var i;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"liquidate-td",children:(0,h.gH)(e).lt(1)?(0,h.ZV)((0,h.gH)(e),18,{needDolar:!0,cutZero:!0}):(0,h.ZV)((0,h.gH)(e),2,{needDolar:!0})}),(0,C.jsx)("div",{className:"liquidate-imgs",children:null===t||void 0===t||null===(i=t.collateralTokenList)||void 0===i?void 0:i.map(((e,t)=>(0,C.jsx)("img",{className:"j-liquidate-td-logo",src:(0,h.TA)(e.symbol),alt:""},t)))})]})}},{title:(0,C.jsxs)("span",{onClick:()=>{window.gtag("event","click",{event_category:"liquidate",event_label:"liquidate_click_Debt"})},className:"ant-table-column-title",children:[(0,C.jsx)(p.A,{overlayClassName:"j-tooltip-dropdown",title:s.Ay.get("liquidate.liquidate_tip2"),placement:"top",arrowPointAtCenter:!0,children:(0,C.jsx)("span",{className:"j-tooltip-icon j-info-icon mr-4"})}),s.Ay.get("liquidate.liquidate_debt")]}),dataIndex:"totalBorrowUsd",sortDirections:["descend","ascend"],sorter:(e,t)=>e.totalBorrowUsd-t.totalBorrowUsd,showSorterTooltip:!1,key:"3",align:"left",render:(e,t)=>(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"liquidate-td",children:(0,h.gH)(e).lt(1)?(0,h.ZV)((0,h.gH)(e),18,{needDolar:!0,cutZero:!0}):(0,h.ZV)((0,h.gH)(e),2,{needDolar:!0})}),(0,C.jsx)("div",{className:"liquidate-imgs",children:t.borrowTokenList.map(((e,t)=>(0,C.jsx)("img",{className:"j-liquidate-td-logo",src:(0,h.iG)(e.symbol),alt:""},t)))})]})},{title:s.Ay.get("liquidate.liquidate_risk_value"),dataIndex:"risk",key:"5",align:"left",render:(e,t)=>(0,C.jsx)("div",{className:"liquidate-td"+((0,h.gH)(e).gt(1)?" red":""),children:(0,h.ZV)((0,h.gH)(e).times(100),2)})},{title:" ",dataIndex:"btn",key:"4",width:120,render:(t,i)=>(0,h.gH)(i.risk).gte(1)?(0,C.jsx)("div",{className:"j-btn j-reward",onClick:()=>this.liquidateClick(i),children:s.Ay.get("liquidate.liquidate_liquidate")}):(0,C.jsx)(p.A,{overlayClassName:"j-tooltip-dropdown",title:s.Ay.get("liquidate.can_not_liquidate_tip"),placement:e?"topLeft":"top",arrowPointAtCenter:!0,children:(0,C.jsx)("div",{className:"j-btn j-reward",onClick:()=>this.liquidateClick(i),children:s.Ay.get("liquidate.liquidate_liquidate")})})}]},this.liquidateClick=e=>{const{isConnected:t}=this.props.network;if(!t)return window.localStorage.setItem("need_reload",!0),this.props.network.connectWalletV2();window.localStorage.removeItem("need_reload"),0!==this.props.network.isRightChain?0!==this.props.network.isMainNetwork?(this.props.system.clearRejectError(),this.setState({dataInfo:e}),this.props.lend.setData({liquidateShow:!0}),window.gtag("event","click",{event_category:"liquidate",event_label:"liquidate_click_Liquidate"})):this.props.network.showNetworkErrorModal():this.props.network.changeChain()},this.riskFilterRender=()=>{const{errMsg:e,errMsg1:t,lang:i,minRiskValue:l,maxRiskValue:a}=this.state;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(m.A,{className:"j-input search-token "+(e?"j-error-input":""),placeholder:s.Ay.get("liquidate.liquidate_risk_value"),value:l,onChange:e=>this.minRiskChange(e.target.value)}),(0,C.jsx)("em",{}),(0,C.jsx)(m.A,{className:"j-input search-token "+(t?"j-error-input":""),placeholder:s.Ay.get("liquidate.liquidate_risk_value"),value:a,onChange:e=>this.maxRiskChange(e.target.value)}),(0,C.jsx)(g.A,{className:"j-btn j-supply risk-filter-btn",disabled:e||t||(0,h.gH)(l).isNaN()&&(0,h.gH)(a).isNaN(),onClick:this.riskFilterConfirm,children:s.Ay.get("liquidate.risk.confirm")}),(e||t)&&(0,C.jsxs)("div",{className:"risk-error-msg "+("en-US"===i?"en":""),children:[(0,C.jsx)("em",{}),(0,C.jsx)("span",{children:e||t})]})]})},this.riskFilterMobileRender=()=>{const{minRiskValue:e,maxRiskValue:t}=this.state,{theme:i}=this.props.lend;return(0,C.jsx)("div",{className:"liquidate-popover-block",children:(0,C.jsx)(j.A,{content:this.riskFilterMobileContentRender(),trigger:"click",overlayClassName:"j-wrapper liquidate-popover risk-filter-popover "+i,placement:"bottom",children:(0,C.jsxs)("span",{className:"top-subtitle liquidate-select"+((0,h.gH)(e).isNaN()&&(0,h.gH)(t).isNaN()?"":" liquidate-select-open"),children:[s.Ay.get("liquidate.liquidate_risk_value"),(0,C.jsx)("em",{})]})})})},this.riskFilterMobileContentRender=()=>{const{errMsg:e,errMsg1:t,lang:i,minRiskValue:l,maxRiskValue:a}=this.state;return(0,C.jsxs)("div",{className:"risk-filter risk-filter-m",children:[(0,C.jsxs)("div",{children:[(0,C.jsx)(m.A,{className:"j-input search-token "+(e?"j-error-input":""),placeholder:s.Ay.get("liquidate.liquidate_risk_value"),value:l,onChange:e=>this.minRiskChange(e.target.value)}),(0,C.jsx)("em",{className:"short-line"}),(0,C.jsx)(m.A,{className:"j-input search-token "+(t?"j-error-input":""),placeholder:s.Ay.get("liquidate.liquidate_risk_value"),value:a,onChange:e=>this.maxRiskChange(e.target.value)})]}),(0,C.jsx)("div",{children:(0,C.jsx)(g.A,{className:"j-btn j-supply risk-filter-btn",disabled:e||t||(0,h.gH)(l).isNaN()&&(0,h.gH)(a).isNaN(),onClick:this.riskFilterConfirm,children:s.Ay.get("liquidate.risk.confirm")})}),(e||t)&&(0,C.jsxs)("div",{className:"risk-error-msg "+("en-US"===i?"en":""),children:[(0,C.jsx)("em",{}),(0,C.jsx)("span",{children:e||t})]})]})},this.riskFilterConfirm=()=>{const{errMsg:e,errMsg1:t,minRiskValue:i,maxRiskValue:l}=this.state;let a=i,s=l;if((0,h.gH)(i).isNaN()&&(a=95),e||t)return;const{theme:n,liquidateInfo:r,liquidateOriginalInfo:o,liquidateShow:d}=this.props.lend;let c=o.accounts.filter((e=>(0,h.gH)(s).isNaN()?(0,h.gH)((0,h.gH)(e.risk).times(100)).gte(a):(0,h.gH)((0,h.gH)(e.risk).times(100)).gte(a)&&(0,h.gH)((0,h.gH)(e.risk).times(100)).lte(s)));this.props.lend.setData({liquidateInfo:{...r,accounts:c},minRiskValue:a,maxRiskValue:s}),window.gtag("event","click",{event_category:"liquidate",event_label:"liquidate_click_Screen"})},this.minRiskChange=e=>{try{this.props.system.clearRejectError();const{valid:t,str:i}=(0,h.PY)(e,1);if(t){this.setState({minRiskValue:i});let e="";if(e=(0,h.gH)(i).isNaN()?"":(0,h.gH)(i).lt(95)?s.Ay.get("liquidate.risk.placeholder"):"",this.setState({errMsg:e}),!(0,h.gH)(this.state.maxRiskValue).isNaN()&&(0,h.gH)(i).gt(this.state.maxRiskValue)){let e=s.Ay.get("liquidate.risk.msg1",{number:i});this.setState({errMsg1:e})}else this.setState({errMsg1:""})}}catch(t){console.log("minRiskChange ",t)}},this.maxRiskChange=e=>{try{this.props.system.clearRejectError();const{valid:t,str:i}=(0,h.PY)(e,1);if(t){this.setState({maxRiskValue:i});let e="";e=(0,h.gH)(i).isNaN()?"":(0,h.gH)(i).lt(95)?s.Ay.get("liquidate.risk.placeholder"):!(0,h.gH)(this.state.minRiskValue).isNaN()&&(0,h.gH)(i).lt(this.state.minRiskValue)?s.Ay.get("liquidate.risk.msg1",{number:this.state.minRiskValue}):"",this.setState({errMsg1:e})}}catch(t){console.log("maxRiskChange ",t)}},this.totalCollateralContentRender=()=>{const{checkAll:e,defaultValueCollateral:t}=this.state,i=w.TS.totalDebtTokenArr.map((e=>"j"+e));return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(x.A,{className:"j-check-all j-checkbox",onChange:e=>this.onCheckAllChangeCollateral(e.target.checked),checked:e,children:s.Ay.get("claim_trans_check_all")}),(0,C.jsx)(x.A.Group,{className:"j-check-group",defaultValue:t,onChange:this.onChangeCollateral,value:t,children:i.map((e=>(0,C.jsxs)("div",{className:"j-liquidate-item",children:[(0,C.jsx)(x.A,{className:"j-checkbox",value:e,children:(0,C.jsxs)("div",{className:"flex aic",children:[(0,C.jsx)("img",{className:"j-liquidate-logo",src:(0,h.TA)(e),alt:""}),(0,C.jsxs)("span",{className:"j-liquidate-unit",children:[" ",e]})]})})," "]},e)))})]})},this.onCheckAllChangeCollateral=e=>{let t=e;if(t){window.gtag("event","click",{event_category:"liquidate",event_label:"liquidate_liquidatepop_click_Collateral",value:"all"});let e=w.TS.totalDebtTokenArr.map((e=>"j"+e));this.setState({defaultValueCollateral:e})}else this.setState({defaultValueCollateral:[]});this.setState({checkAll:t})},this.onChangeCollateral=e=>{let t=null===e||void 0===e?void 0:e.length,i=w.TS.totalDebtTokenArr.length;t===i?this.setState({checkAll:!0}):t<i&&this.setState({checkAll:!1}),window.gtag("event","click",{event_category:"liquidate",event_label:"liquidate_liquidatepop_click_Collateral",value:e.toString()}),this.setState({defaultValueCollateral:e})},this.totalCollateralRender=()=>{const{defaultValueCollateral:e}=this.state;return this.popoverRender(this.totalCollateralContentRender(),e.length!==w.TS.totalDebtTokenArr.length,s.Ay.get("liquidate.liquidate_collateral"))},this.totalDebtRender=()=>{const{defaultValueDebt:e}=this.state;return this.popoverRender(this.totalDebtContentRender(),e.length!==w.TS.totalDebtTokenArr.length,s.Ay.get("liquidate.liquidate_debt"))},this.popoverRender=(e,t,i)=>{const{theme:l}=this.props.lend;return(0,C.jsx)("div",{className:"liquidate-popover-block ",children:(0,C.jsx)(j.A,{content:e,trigger:"click",placement:"bottom",overlayClassName:"j-wrapper liquidate-popover "+l,children:(0,C.jsxs)("span",{className:"top-subtitle liquidate-select"+(t?" liquidate-select-open":""),children:[i,(0,C.jsx)("em",{})]})})})},this.totalDebtContentRender=()=>{const{checkAllDebt:e,defaultValueDebt:t}=this.state;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(x.A,{className:"j-check-all j-checkbox",onChange:e=>this.onCheckAllChangeDebt(e.target.checked),checked:e,children:s.Ay.get("claim_trans_check_all")}),(0,C.jsx)(x.A.Group,{className:"j-check-group",defaultValue:t,onChange:this.onChangeDebt,value:t,children:w.TS.totalDebtTokenArr.map((e=>(0,C.jsxs)("div",{className:"j-liquidate-item",children:[(0,C.jsx)(x.A,{className:"j-checkbox",value:e,children:(0,C.jsxs)("div",{className:"flex aic",children:[(0,C.jsx)("img",{className:"j-liquidate-logo",src:(0,h.iG)(e),alt:""}),(0,C.jsxs)("span",{className:"j-liquidate-unit",children:[" ",e]})]})})," "]},e)))})]})},this.onCheckAllChangeDebt=e=>{let t=e;t?(window.gtag("event","click",{event_category:"liquidate",event_label:"liquidate_liquidatepop_click_Debt",value:"all"}),this.setState({defaultValueDebt:w.TS.totalDebtTokenArr})):this.setState({defaultValueDebt:[]}),this.setState({checkAllDebt:t})},this.onChangeDebt=e=>{let t=null===e||void 0===e?void 0:e.length,i=w.TS.totalDebtTokenArr.length;t===i?this.setState({checkAllDebt:!0}):t<i&&this.setState({checkAllDebt:!1}),window.gtag("event","click",{event_category:"liquidate",event_label:"liquidate_liquidatepop_click_Debt",value:e.toString()}),this.setState({defaultValueDebt:e})},this.reset=()=>{this.onCheckAllChangeDebt(!0),this.onCheckAllChangeCollateral(!0),this.props.lend.setData({liquidateInfo:this.props.lend.liquidateOriginalInfo,minRiskValue:"",maxRiskValue:""}),this.setState({errMsg:"",errMsg1:"",minRiskValue:"",maxRiskValue:""}),window.gtag("event","click",{event_category:"liquidate",event_label:"liquidate_click_Reset"})},this.refreshDateFn=async()=>{await this.props.lend.getLiquidateInfo(),this.setState({refreshDate:o()().format("YYYY-MM-DD HH:mm")}),window.gtag("event","click",{event_category:"liquidate",event_label:"liquidate_click_Refresh"})},this.newIncludes=(e,t)=>e.filter((e=>t.includes(e))),this.contentRender=e=>{const{refreshDate:t,lang:i,mobile:l}=this.state,{theme:a}=this.props.lend;return(0,C.jsxs)("div",{className:"j-container pr",children:[(0,C.jsxs)("div",{className:"j-navi",children:[(0,C.jsxs)("div",{className:"j-navi-content ",children:[(0,C.jsx)("span",{className:"current",children:s.Ay.get("application.liquidation")}),(0,C.jsx)("div",{children:s.Ay.get("application.des4")})]}),(0,C.jsx)("div",{className:"jl-feedback",children:(0,C.jsxs)("div",{className:"feedback-link",children:[(0,C.jsx)("em",{className:"feedback-icon"}),(0,C.jsx)("a",{className:"jl-links",href:T,target:"feedback",children:s.Ay.get("liquidate.feedback")})]})})]}),(0,C.jsx)("div",{className:"liquidate-warning",children:(0,C.jsxs)("span",{children:[s.Ay.get("disclaimer.new_tip")," ",(0,C.jsx)("a",{href:"https://docs.justlend.org/resources/risk-warning",className:"jl-links",target:"disclaimer",children:s.Ay.get("disclaimer.agree2")})]})}),(0,C.jsxs)("div",{className:"j-liquidate",children:[(0,C.jsxs)("div",{className:"liquidate-top",children:[(0,C.jsxs)("div",{className:"liquidate-top-left",children:[(0,C.jsx)("div",{className:"top-title",children:s.Ay.get("liquidate.liquidate_high_risk_account")}),(0,C.jsx)("div",{className:"top-subtitle",children:s.Ay.get("liquidate.liquidate_high_risk_95_account")})]}),(0,C.jsxs)("div",{className:"liquidate-top-right",children:[(0,C.jsx)("div",{children:this.totalCollateralRender()}),(0,C.jsx)("div",{children:this.totalDebtRender()}),(0,C.jsx)("div",{className:"risk-filter",children:this.riskFilterRender()}),(0,C.jsx)("div",{className:"top-reset",onClick:this.reset,children:s.Ay.get("liquidate.liquidate_reset")}),(0,C.jsxs)("div",{className:"j-refresh",onClick:this.refreshDateFn,children:[(0,C.jsx)("em",{}),s.Ay.getHTML("liquidate.liquidate_update_time",{time:t})]})]})]}),(0,C.jsx)("div",{className:"bs-list j-liquidate-table",children:(0,C.jsx)(v.A,{columns:this.getInfoColumns(),dataSource:e,pagination:!1,locale:{emptyText:h.Hf},scroll:{x:(0,n.A)(window.navigator).any?750:1100}})})]})]})},this.mobileContentRender=e=>{const{refreshDate:t}=this.state;return(0,C.jsxs)("div",{className:"j-container j-liquidate-container-m",children:[(0,C.jsxs)("div",{className:"j-navi",children:[(0,C.jsxs)("div",{className:"j-navi-content",children:[(0,C.jsx)("span",{className:"current",children:s.Ay.get("application.liquidation")}),(0,C.jsx)("div",{children:s.Ay.get("application.des4")})]}),(0,C.jsx)("div",{className:"jl-feedback",children:(0,C.jsxs)("div",{className:"feedback-link",children:[(0,C.jsx)("em",{className:"feedback-icon"}),(0,C.jsx)("a",{className:"jl-links",href:T,target:"feedback",children:s.Ay.get("liquidate.feedback")})]})})]}),(0,C.jsx)("div",{className:"liquidate-warning",children:(0,C.jsxs)("span",{children:[s.Ay.get("disclaimer.new_tip")," ",(0,C.jsx)("a",{href:"https://docs.justlend.org/resources/risk-warning",className:"jl-links",target:"disclaimer",children:s.Ay.get("disclaimer.agree2")})]})}),(0,C.jsxs)("div",{className:"j-liquidate",children:[(0,C.jsxs)("div",{className:"liquidate-top head",children:[(0,C.jsx)(q.L,{overlayClassName:"j-tooltip-dropdown",title:s.Ay.get("liquidate.liquidate_high_risk_95_account"),placement:"topLeft",arrowPointAtCenter:!0,children:(0,C.jsx)("span",{children:s.Ay.get("liquidate.liquidate_high_risk_account")})}),(0,C.jsxs)("div",{className:"j-refresh",onClick:this.refreshDateFn,children:[(0,C.jsx)("em",{}),s.Ay.getHTML("liquidate.liquidate_update_time",{time:t})]})]}),(0,C.jsxs)("div",{className:"liquidate-top liquidate-top-sec",children:[(0,C.jsx)("div",{className:"liquidate-tr",children:this.totalCollateralRender()}),(0,C.jsx)("div",{className:"liquidate-tr",children:this.totalDebtRender()}),(0,C.jsx)("div",{className:"liquidate-tr",children:this.riskFilterMobileRender()}),(0,C.jsx)("div",{className:"top-reset",onClick:this.reset,children:s.Ay.get("liquidate.liquidate_reset")})]}),(0,C.jsx)("div",{className:"bs-list j-liquidate-table",children:e.length<=0?(0,h.Hf)():this.liquidateMobileTableRender(e)})]})]})},this.liquidateMobileTableRender=e=>{const{mobile:t}=this.state;return(0,C.jsx)("div",{className:"liquidate-m-table",children:e.map((e=>(0,C.jsxs)("div",{className:"liquidate-m-item",children:[(0,C.jsxs)("div",{className:"flex",children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("div",{className:"item-title",children:s.Ay.get("liquidate.liquidate_account")}),(0,C.jsx)("div",{className:"item-content",children:e.borrower.substr(0,1)+"..."+e.borrower.substring(e.borrower.length-3)})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("div",{className:"item-title",children:s.Ay.get("liquidate.liquidate_risk_value")}),(0,C.jsx)("div",{className:"item-content"+((0,h.gH)(e.risk).gt(1)?" red":""),children:(0,h.ZV)((0,h.gH)(e.risk).times(100),2)})]})]}),(0,C.jsxs)("div",{className:"flex",children:[(0,C.jsxs)("div",{children:[(0,C.jsx)(q.L,{className:"item-title",overlayClassName:"j-tooltip-dropdown",title:s.Ay.get("liquidate.liquidate_tip1"),placement:"topLeft",arrowPointAtCenter:!0,children:(0,C.jsx)("span",{children:s.Ay.get("liquidate.liquidate_collateral")})}),(0,C.jsxs)("div",{className:"item-content",children:[(0,h.gH)(e.totalCollateralUsd).lt(1)?(0,h.ZV)((0,h.gH)(e.totalCollateralUsd),18,{needDolar:!0,cutZero:!0}):(0,h.ZV)((0,h.gH)(e.totalCollateralUsd),2,{needDolar:!0}),(0,C.jsx)("div",{className:"liquidate-imgs",children:e.collateralTokenList.map((e=>(0,C.jsx)("img",{className:"j-liquidate-td-logo",src:(0,h.TA)(e.symbol),alt:""})))})]})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)(q.L,{className:"item-title",overlayClassName:"j-tooltip-dropdown",title:s.Ay.get("liquidate.liquidate_tip2"),placement:"top",arrowPointAtCenter:!0,children:(0,C.jsx)("span",{children:s.Ay.get("liquidate.liquidate_debt")})}),(0,C.jsxs)("div",{className:"item-content",children:[(0,h.gH)(e.totalBorrowUsd).lt(1)?(0,h.ZV)((0,h.gH)(e.totalBorrowUsd),18,{needDolar:!0,cutZero:!0}):(0,h.ZV)((0,h.gH)(e.totalBorrowUsd),2,{needDolar:!0}),(0,C.jsx)("div",{className:"liquidate-imgs",children:e.borrowTokenList.map((e=>(0,C.jsx)("img",{className:"j-liquidate-td-logo",src:(0,h.iG)(e.symbol),alt:""})))})]})]})]}),(0,h.gH)(e.risk).gt(1)?(0,C.jsx)("div",{className:"j-large-btn loading-close",onClick:()=>this.liquidateClick(e),children:s.Ay.get("liquidate.liquidate_liquidate")}):(0,C.jsx)(p.A,{overlayClassName:"j-tooltip-dropdown",title:s.Ay.get("liquidate.can_not_liquidate_tip"),placement:"top",arrowPointAtCenter:!0,children:(0,C.jsx)("div",{className:"j-large-btn loading-close",onClick:()=>this.liquidateClick(e),children:s.Ay.get("liquidate.liquidate_liquidate")})})]},e.borrower)))})},this.loadMore=()=>{this.setState({loadMoreIndex:this.state.loadMoreIndex+1})},this.marketDataFilter=()=>{const{defaultValueCollateral:e,defaultValueDebt:t,pageLimit:i,loadMoreIndex:l}=this.state,{liquidateInfo:a}=this.props.lend;let s=[];s=a.accounts.map((e=>{var t,i;let l=[],a=[];return null===e||void 0===e||null===(t=e.borrowTokenList)||void 0===t||t.map((e=>{l.push(e.symbol)})),null===e||void 0===e||null===(i=e.collateralTokenList)||void 0===i||i.map((e=>{a.push(e.symbol)})),{...e,borrowTokenArr:l,collateralTokenArr:a,key:e.borrower}})).filter((i=>(0!==e.length||0!==t.length)&&(0===e.length?this.newIncludes(i.borrowTokenArr,t).length>0:0===t.length?this.newIncludes(i.collateralTokenArr,e).length>0:this.newIncludes(i.collateralTokenArr,e).length>0&&this.newIncludes(i.borrowTokenArr,t).length>0))),s=s.map((e=>({...e,key:e.borrower})));let n=s.slice(0,(l+1)*i);return{marketDataSource:s,marketDataSourceShow:n}},this.loadingRender=()=>{const{theme:e}=this.props.lend,{mobile:t}=this.state;return(0,C.jsxs)("div",{className:"j-container skeleton",children:[t&&(0,C.jsxs)("div",{className:"j-navi-top-m",children:[(0,C.jsx)("div",{children:(0,h.eB)()}),(0,C.jsx)("div",{children:(0,h.eB)()})]}),(0,C.jsxs)("div",{className:"j-navi",children:[(0,C.jsxs)("div",{className:"j-navi-content",children:[(0,h.eB)(),(0,h.eB)()]}),(0,C.jsxs)("div",{className:"jl-feedback",children:[(0,C.jsx)("div",{className:"feedback-link"}),(0,C.jsx)("div",{className:"feedback-title",children:(0,h.eB)()})]})]}),t?(0,C.jsx)(C.Fragment,{children:new Array(2).fill(1).map(((e,t)=>(0,C.jsx)("div",{className:"j-liquidate",children:(0,C.jsxs)("div",{className:"skeleton-block skeleton-liquidate-list-m",children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("div",{children:(0,h.eB)()}),(0,C.jsx)("div",{children:(0,h.eB)()})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("div",{children:(0,h.eB)()}),(0,C.jsx)("div",{children:(0,h.eB)()})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("div",{children:(0,h.eB)()}),(0,C.jsx)("div",{children:(0,h.eB)()})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("div",{children:(0,h.eB)()}),(0,C.jsx)("div",{children:(0,h.eB)()})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("div",{children:(0,h.eB)()}),(0,C.jsx)("div",{children:(0,h.eB)()})]}),(0,C.jsx)("div",{children:(0,C.jsx)("div",{children:(0,h.eB)()})})]})},t)))}):(0,C.jsxs)("div",{className:"j-liquidate",children:[(0,C.jsxs)("div",{className:"skeleton-block flex jcsb",children:[(0,C.jsx)("div",{style:{width:"42%"},children:(0,h.eB)()}),(0,C.jsx)("div",{style:{width:"42%"},children:(0,h.eB)()})]}),(0,C.jsx)("div",{className:"skeleton-space-block"}),(0,C.jsx)("div",{className:"skeleton-block skeleton-liquidate-list",children:new Array(20).fill(1).map(((e,t)=>(0,C.jsx)("div",{children:(0,h.eB)()},t)))})]})]})},this.state={lang:window.localStorage.getItem("lang")||s.Ay.options.currentLocale,mobile:(0,n.A)(window.navigator).any,marketDataSource:[{account:"assdasdasd",collateral:"1212",collateral:[""]}],checkAll:!0,defaultValueCollateral:[],checkAllDebt:!0,defaultValueDebt:[],refreshDate:o()().format("YYYY-MM-DD HH:mm"),dataInfo:{},pageLimit:20,loadMoreIndex:0,showLoadMore:!1,errMsg:"",errMsg1:"",liquidateInfoShow:{},minRiskValue:"",maxRiskValue:""}}render(){var e;const{mobile:t,dataInfo:i,pageLimit:l,loadMoreIndex:a}=this.state,{theme:n,liquidateShow:r,liquidateOriginalInfo:o,isDisclaimerStoraged:d}=this.props.lend;let{marketDataSource:h,marketDataSourceShow:p}=this.marketDataFilter(),m=!0;return null!==o&&void 0!==o&&null!==(e=o.accounts)&&void 0!==e&&e.length&&(null!==h&&void 0!==h&&h.length||0===h.length)&&(m=!1),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"j-wrapper "+n+(t?" j-wrapper-m":""),children:[(0,C.jsx)(c.A,{instantActions:this.getMarketData,mountedActions:this.getUserData}),m?this.loadingRender():(0,C.jsxs)(C.Fragment,{children:[t?this.mobileContentRender(p):this.contentRender(p),h.length>l&&(a+1)*l<h.length&&(0,C.jsx)("div",{className:"load-more",children:(0,C.jsxs)("div",{className:"flex aic jcc",onClick:()=>this.loadMore(),children:[s.Ay.get("liquidate.liquidate_more"),(0,C.jsx)("em",{})]})})]}),(0,C.jsx)(u.A,{})]}),r&&(0,C.jsx)(S,{dataInfo:i}),t&&!r&&(0,C.jsx)(R.A,{theme:n}),(0,C.jsx)(D,{}),(0,C.jsx)(M.A,{})]})}})||I)||I)||I)||I;var U;const B=(0,d.WQ)("network")(U=(0,d.PA)(U=class extends a.Component{constructor(e){super(e),this.componentDidMount=async()=>{this.props.network.setData({routeName:"liquidate"}),window.gtag("event","liquidate_list_PV",{event_category:"liquidate",event_label:"liquidate_list_PV"}),window.gtag("event","liquidate_list_UV",{event_category:"liquidate",event_label:"liquidate_list_UV"})}}render(){return(0,C.jsx)(L,{})}})||U)||U}}]);