"use strict";(self.webpackChunkjustlend_front=self.webpackChunkjustlend_front||[]).push([[695],{25356:(e,t,n)=>{n.d(t,{L$:()=>A,SS:()=>p,Sm:()=>_,Wz:()=>c,as:()=>h,fj:()=>y,iW:()=>g,n3:()=>d,pQ:()=>u});n(76998);var r=n(96843),a=n(25443),o=n.n(a),i=n(22172),s=n(75659),l=n(23446);function d(e){return s.TS.nile?e&&e.includes("en")?"https://justlendorg.zendesk.com/hc/en-us/articles/17080698112537":"https://justlendorg.zendesk.com/hc/zh-cn/articles/17080698112537":(e&&e.includes("en"),"https://support.justlend.org/hc/en-us/articles/32539144305305")}function c(e){return e&&e.includes("en"),"https://support.justlend.org/hc/en-us/articles/31228571004569-What-are-the-rules-for-rent-calculation"}function g(e){return e&&e.includes("en"),"https://docs.justlend.org/guides/energy-rental"}function u(e){return e&&e.includes("en"),"https://support.justlend.org/hc/en-us/articles/18581604307737"}function p(e){return e&&e.includes("en"),"https://support.justlend.org/hc/en-us/articles/31228571004569-What-are-the-rules-for-rent-calculation"}function m(e,t){return e?e+" "+t:t}function y(e){const t=Math.floor(e/60/60/24),n=Math.floor(e/60/60%24),a=Math.floor(e/60%60);var o="";return t>1?o=m(o,(0,i.A)(t).toString()+r.Ay.get("energy_rental.date_format.days")):t>0&&(o=m(o,(0,i.A)(t).toString()+r.Ay.get("energy_rental.date_format.day"))),n>1?o=m(o,(0,i.A)(n).toString()+r.Ay.get("energy_rental.date_format.hours")):n>0&&(o=m(o,(0,i.A)(n).toString()+r.Ay.get("energy_rental.date_format.hour"))),a>1?o=m(o,(0,i.A)(a).toString()+r.Ay.get("energy_rental.date_format.mins")):a>0&&(o=m(o,(0,i.A)(a).toString()+r.Ay.get("energy_rental.date_format.min"))),o||"--"}function _(e){return e&&(0,i.A)(e).isNaN()?"--":o()((0,i.A)(e).times(1e3).plus((new Date).getTime()).toNumber()).format("YYYY-MM-DD HH:mm")}function h(e){return(0,i.A)(e/60/60).lte(3)}const A=(e,t)=>(0,l.jsxs)("div",{className:t,children:[(0,l.jsx)("span",{children:e.slice(0,e.length-6)}),(0,l.jsx)("span",{className:"second-part",children:e.slice(e.length-6,e.length)})]})},37455:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(76998),a=n(96843),o=n(98859),i=n(48634),s=n(95381);var l,d=n(23446);const c=(0,o.WQ)("lend")(l=(0,o.WQ)("network")(l=(0,o.WQ)("energyRental")(l=(0,o.PA)(l=class extends r.Component{constructor(e){super(e),this.componentDidMount=()=>{},this.close=()=>{this.props.energyRental.setData({dealNoteShow:!1,addOrderModalVisible:!1})},this.onCheckAllChange=e=>{this.props.energyRental.setData({dealNoteCheckValue:e})},this.state={lang:window.localStorage.getItem("lang")||a.Ay.options.currentLocale}}componentWillUnmount(){}render(){const{theme:e}=this.props.lend,{dealNoteShow:t,dealNoteCheckValue:n}=this.props.energyRental,{lang:r}=this.state;return(0,d.jsxs)(i.A,{visible:t,title:a.Ay.get("s7.note1"),width:400,centered:!0,footer:null,className:"j-modal header-border j-deal-note-modal",closable:!1,getContainer:()=>document.querySelector(".j-deal-note-modal-appender"),children:[(0,d.jsx)("img",{className:"collateral-limit-img deal-note-img",src:"data:image/png;base64,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",alt:""}),(0,d.jsx)("div",{className:"collateral-limit collateral-limit-note"+("zh-CN"===r?" tac":""),children:a.Ay.get("s7.note")}),(0,d.jsxs)("div",{className:"deal-note-desc",children:[(0,d.jsx)("div",{className:"note-row",children:a.Ay.get("s7.note_desc1")}),(0,d.jsx)("div",{className:"note-row",children:a.Ay.get("s7.note_desc2")}),(0,d.jsx)("div",{className:"note-row",children:a.Ay.get("s7.note_desc3")})]}),(0,d.jsx)("div",{className:"limit-thirty-days",children:(0,d.jsx)(s.A,{className:"j-deal-note-check j-checkbox",onChange:e=>this.onCheckAllChange(e.target.checked),checked:n,children:a.Ay.get("s7.not_show_one_month")})}),(0,d.jsxs)("div",{className:"end-rental-btns",children:[(0,d.jsx)("button",{className:"j-btn j-supply",onClick:()=>this.close(),children:a.Ay.get("stUSDT_btn_cancel")}),(0,d.jsx)("button",{className:"j-btn j-rent-renew",onClick:async()=>{n?window.localStorage.setItem("dealNoteTimeString",(new Date).getTime()):window.localStorage.setItem("dealNoteTimeString",""),this.props.energyRental.setData({dealNoteShow:!1})},children:a.Ay.get("s7.continue")})]})]})}})||l)||l)||l)||l},51465:()=>{},52297:(e,t,n)=>{n.d(t,{L:()=>s});var r=n(26559),a=n(76998),o=n(33270),i=n(23446);class s extends a.Component{constructor(e){super(e),this.onClickBody=()=>{this.state.isTooltipShow&&(this.setState({isTooltipShow:!1}),this.props.setIsActive&&this.props.setIsActive(!1))},this.onClick=e=>{e.stopPropagation(),this.state.isTooltipShow||(this.props.onOpen&&this.props.onOpen(),this.setState({isTooltipShow:!0}),this.props.setIsActive&&this.props.setIsActive(!0))},this.state={isTooltipShow:!1}}componentDidMount(){document.body.addEventListener("click",this.onClickBody,{capture:!1})}componentWillUnmount(){document.body.removeEventListener("click",this.onClickBody)}render(){const e=(0,o.Fr)().any,{isTooltipShow:t}=this.state,{children:n,...a}=this.props;return(0,i.jsx)(i.Fragment,{children:e?(0,i.jsx)(r.A,{...a,visible:t,onClick:this.onClick,children:(0,i.jsx)("div",{className:"tooltip-text "+(t?"active":""),children:n})}):n})}}},60888:(e,t,n)=>{n.d(t,{A:()=>g});var r=n(76998),a=n(96843),o=n(98859),i=n(48634);const s=n.p+"static/media/end-rental-tip-icon.46326c5be14c5c550d6d.png",l=n.p+"static/media/end-rental-tip-icon.4b4716713601f1f9de8f.png";var d,c=n(23446);const g=(0,o.WQ)("lend")(d=(0,o.WQ)("network")(d=(0,o.WQ)("energyRental")(d=(0,o.PA)(d=class extends r.Component{constructor(e){super(e),this.componentDidMount=()=>{},this.close=()=>{this.props.energyRental.setData({endRentalTipShow:!1})},this.state={lang:window.localStorage.getItem("lang")||a.Ay.options.currentLocale}}componentWillUnmount(){}render(){var e;const{theme:t}=this.props.lend,{endRentalTipShow:n}=this.props.energyRental,{lang:r}=this.state;return(0,c.jsxs)(i.A,{visible:n,title:a.Ay.get("s7.confirm_to_end"),width:400,centered:!0,footer:null,className:"j-modal header-border j-end-rent-modal",closable:!1,getContainer:()=>document.querySelector(".j-wrapper"),children:[(0,c.jsx)("img",{className:"collateral-limit-img end-rental-img",src:"white"===t?l:s,alt:""}),(0,c.jsx)("div",{className:"collateral-limit"+("zh-CN"===r?" tac":""),children:a.Ay.getHTML("s7.tips1")}),(0,c.jsx)("div",{className:"end-rental-address",children:null===(e=this.props.endRentalInfo)||void 0===e?void 0:e.renter}),(0,c.jsxs)("div",{className:"end-rental-btns",children:[(0,c.jsx)("button",{className:"j-btn j-supply",onClick:()=>this.close(),children:a.Ay.get("stUSDT_btn_cancel")}),(0,c.jsx)("button",{className:"j-btn j-rent-renew",onClick:()=>{this.close(),this.props.endRetalFn()},children:a.Ay.get("s7.confirm_to_end")})]})]})}})||d)||d)||d)||d},63460:(e,t,n)=>{n.d(t,{A:()=>R});var r,a=n(76998),o=n(98859),i=n(96843),s=n(59866),l=n(48634),d=n(87207),c=n.n(d),g=n(33270),u=n(25356),p=n(23446);const m=(0,o.WQ)("energyRental")(r=(0,o.PA)(r=class extends a.Component{constructor(){super(),this.componentDidMount=()=>{window.gtag("event","energyrent_pro_retx_tipspopup",{event_category:"energyrent",event_label:"energyrent_pro_retx_tipspopup"})},this.state={}}render(){const{renewOrderReceiver:e,renewOrderExistingEnergyAmount:t,renewOrderExistingRemainingSeconds:n}=this.props.energyRental,{closeModal:r}=this.props;return(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:"content-icon"}),(0,p.jsx)("div",{className:"content-title",children:i.Ay.get("energy_rental.renew_order_modal.existing_order_hint.has_existing_order_msg")}),(0,p.jsxs)("div",{className:"rental-order-detail",children:[(0,p.jsxs)("div",{className:"detail-row",children:[(0,p.jsx)("div",{className:"row-title",children:i.Ay.get("energy_rental.renew_order_modal.existing_order_hint.address_field_title")}),(0,u.L$)(e,"row-value address-row-value")]}),(0,p.jsxs)("div",{className:"detail-row",children:[(0,p.jsx)("div",{className:"row-title",children:i.Ay.get("energy_rental.renew_order_modal.existing_order_hint.rented_energy_field_title")}),(0,p.jsx)("div",{className:"row-value",children:(0,g.gH)(t).gt(0)?(0,g.ZV)(t,0)+" "+i.Ay.get("energy_rental.renew_order_modal.existing_order_hint.rented_energy_value_suffix"):"--"})]}),(0,p.jsxs)("div",{className:"detail-row",children:[(0,p.jsx)("div",{className:"row-title",children:i.Ay.get("energy_rental.renew_order_modal.existing_order_hint.remaining_time_field_title")}),(0,p.jsx)("div",{className:"row-value",children:(0,g.gH)(n).gt(60)?(0,u.fj)(n):(0,g.gH)(n).eq(0)?i.Ay.get("energy_rental.mini_list.rental_time_expired"):(0,g.gH)(n).gt(0)&&(0,g.gH)(n).lte(60)?i.Ay.get("energy_rental.mini_list.rental_time_expire_soon"):"--"})]})]}),(0,p.jsxs)("div",{className:"action-btns",children:[(0,p.jsx)("button",{className:"action-btn close-btn",onClick:()=>{r()},children:i.Ay.get("energy_rental.renew_order_modal.existing_order_hint.cancel_btn")}),(0,p.jsx)("button",{className:"action-btn confirm-btn",disabled:(0,g.gH)(t).isNaN()||(0,g.gH)(n).isNaN(),onClick:()=>{this.props.energyRental.setData({addOrderModalStep:2}),window.gtag("event","energyrent_pro_retx_tipspopup_renew",{event_category:"energyrent",event_label:"energyrent_pro_retx_tipspopup_renew"})},children:i.Ay.get("energy_rental.renew_order_modal.existing_order_hint.renew_btn")})]})]})}})||r)||r;var y,_=n(22172),h=n(26559),A=n(67441),w=n(48727),x=(n(37455),n(75659)),v=n(52297);const f=(0,o.WQ)("network")(y=(0,o.WQ)("energyRental")(y=(0,o.PA)(y=class extends a.Component{constructor(){var e;super(),e=this,this.componentDidMount=async()=>{const{renewOrderExistingRemainingSeconds:e}=this.props.energyRental;this.props.energyRental.renewOrderShouldUseSavedInfo?(this.setState({energyAmountSwitch:this.props.energyRental.renewOrderSavedInfoEnergyAmountSwitch,durationSwitch:this.props.energyRental.renewOrderSavedInfoDurationSwitch,energyAmountInputValue:this.props.energyRental.renewOrderSavedInfoEnergyAmountInputValue,energyAmountValue:this.props.energyRental.renewOrderSavedInfoEnergyAmountValue,durationInputValue:this.props.energyRental.renewOrderSavedInfoDurationInputValue,durationIsDayUnitBoolean:this.props.energyRental.renewOrderSavedInfoDurationIsDayUnitBoolean,durationValueInSeconds:this.props.energyRental.renewOrderSavedInfoDurationValueInSeconds,energyAmountInputError:"",durationInputError:""}),this.props.energyRental.updateRenewOrderInfo(this.props.energyRental.renewOrderSavedInfoEnergyAmountValue,this.props.energyRental.renewOrderSavedInfoDurationValueInSeconds,this.props.energyRental.renewOrderSavedInfoEnergyAmountSwitch)):(0,_.A)(e).gt(0)?(this.setState({energyAmountSwitch:!0,durationSwitch:!1,energyAmountInputValue:"",energyAmountValue:x.Ay.energyRental.renewOrderDefaultEnergyValue,durationInputValue:"",durationIsDayUnitBoolean:!0,durationValueInSeconds:0,energyAmountInputError:"",durationInputError:""}),this.props.energyRental.updateRenewOrderInfo(x.Ay.energyRental.renewOrderDefaultEnergyValue,0,!0)):(this.setState({energyAmountSwitch:!1,durationSwitch:!0,energyAmountInputValue:"",energyAmountValue:0,durationInputValue:"",durationIsDayUnitBoolean:!0,durationValueInSeconds:0,energyAmountInputError:"",durationInputError:""}),this.props.energyRental.updateRenewOrderInfo(0,0,!1))},this.onToggleEnergyAmountSwitch=()=>{const{energyAmountSwitch:e,durationSwitch:t,durationValueInSeconds:n}=this.state,{renewOrderExistingRemainingSeconds:r,renewOrderExistingRate:a}=this.props.energyRental;window.gtag("event","energyrent_pro_retx_popup_clickEnergy",{event_category:"energyrent",event_label:e?"turnOff":"turnOn"}),(0,_.A)(r).gt(0)&&"--"!==a&&(e?t?(this.setState({energyAmountSwitch:!1,energyAmountInputValue:"",energyAmountValue:0,energyAmountInputError:""}),this.props.energyRental.updateRenewOrderInfo(0,n,!1)):(this.setState({energyAmountSwitch:!1,energyAmountInputValue:"",energyAmountValue:0,energyAmountInputError:"",durationSwitch:!0}),this.props.energyRental.updateRenewOrderInfo(0,0,!1)):(this.setState({energyAmountSwitch:!0,energyAmountValue:x.Ay.energyRental.renewOrderDefaultEnergyValue}),this.props.energyRental.updateRenewOrderInfo((0,_.A)(x.Ay.energyRental.renewOrderDefaultEnergyValue),n,!0)))},this.onToggleDurationSwitch=()=>{const{energyAmountSwitch:e,durationSwitch:t,energyAmountValue:n}=this.state,{renewOrderExistingRemainingSeconds:r,renewOrderExistingRate:a}=this.props.energyRental;window.gtag("event","energyrent_pro_retx_popup_clickTime",{event_category:"energyrent",event_label:t?"turnOff":"turnOn"}),(0,_.A)(r).gt(0)&&"--"!==a&&(t?e?(this.setState({durationSwitch:!1,durationInputValue:"",durationValueInSeconds:0,durationInputError:""}),this.props.energyRental.updateRenewOrderInfo((0,_.A)(n),0,e)):(this.setState({durationSwitch:!1,durationInputValue:"",durationValueInSeconds:0,durationInputError:"",energyAmountSwitch:!0,energyAmountValue:x.Ay.energyRental.renewOrderDefaultEnergyValue}),this.props.energyRental.updateRenewOrderInfo((0,_.A)(x.Ay.energyRental.renewOrderDefaultEnergyValue),0,!0)):(this.setState({durationSwitch:!0}),this.props.energyRental.updateRenewOrderInfo((0,_.A)(n),0,e)))},this.onChangeEnergyAmountInput=function(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{durationValueInSeconds:r,energyAmountInputDecimal:a}=e.state;try{if(""===t)e.setState({energyAmountInputValue:""}),e.onChangeEnergyAmountInput(x.Ay.energyRental.renewOrderDefaultEnergyValue,!1);else if((0,_.A)(t).eq(0))e.setState({energyAmountInputValue:(0,g.CW)(t,a)}),e.props.energyRental.updateRenewOrderInfo((0,_.A)(0),r,!0),e.validateEnergyAmountInput(0);else{const{valid:o,str:i}=(0,g.PY)(""+t,a);o&&/^\d*$/.test(i)&&(n?e.setState({energyAmountInputValue:i,energyAmountValue:(0,_.A)(i)}):e.setState({energyAmountValue:(0,_.A)(i)}),e.props.energyRental.updateRenewOrderInfo((0,_.A)(i),r,!0),e.validateEnergyAmountInput(i))}}catch(o){console.log("error: onChangeEnergyAmountInput")}},this.validateEnergyAmountInput=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.state.energyAmountInputValue;const{maxRentableOfType:n,marketData:r}=e.props.energyRental,{energyStakePerTrx:a}=r,o=(0,_.A)(n).times(a)._toFixed(0,1),s=(0,_.A)(x.Ay.energyRental.renewOrderMinEnergyValue);t||(0,_.A)(t).eq(0)?(0,_.A)((0,_.A)(n).times(a)).lt(s)?e.setState({energyAmountInputError:i.Ay.get("energy_rental.form.amount_field.energy_no_balance")}):(0,_.A)(t).lt(s)?e.setState({energyAmountInputError:i.Ay.getHTML("energy_rental.renew_order_modal.renew_form.amount_field.min_val_hint",{value:(0,g.ZV)(s)})}):(0,_.A)(t).gt(o)?e.setState({energyAmountInputError:i.Ay.getHTML("energy_rental.renew_order_modal.renew_form.amount_field.max_val_hint",{value:(0,g.ZV)(o)})}):e.setState({energyAmountInputError:""}):e.setState({energyAmountInputError:""})},this.rentTimeExcution=e=>{let t=.1*e;return e+(t>7200?7200:t)},this.onChangeDurationInput=e=>{const{durationIsDayUnitBoolean:t,durationInputDecimal:n,energyAmountValue:r,energyAmountSwitch:a}=this.state;try{if(""===e||(0,_.A)(e).eq(0))this.setState({durationInputValue:(0,g.CW)(e,n),durationValueInSeconds:0}),this.props.energyRental.updateRenewOrderInfo((0,_.A)(r),0,a),t?this.setState({durationInputError:i.Ay.get("energy_rental.renew_order_modal.renew_form.duration_field.day_unit_min_amount_error")}):this.setState({durationInputError:i.Ay.get("energy_rental.renew_order_modal.renew_form.duration_field.hour_unit_min_amount_error")});else{const{valid:o,str:s}=(0,g.PY)(e,n);if(o&&/^\d*(.|.[0-9]){0,1}$/.test(s)){let e=(0,_.A)(s).isNaN()?0:t?24*(0,_.A)(s)*60*60:60*(0,_.A)(s)*60;e=this.rentTimeExcution(e),this.setState({durationInputValue:s,durationValueInSeconds:e}),this.props.energyRental.updateRenewOrderInfo((0,_.A)(r),e,a),t?(0,_.A)(s).lt(.1)?this.setState({durationInputError:i.Ay.get("energy_rental.renew_order_modal.renew_form.duration_field.day_unit_min_amount_error")}):(0,_.A)(s).gt(30)?this.setState({durationInputError:i.Ay.get("energy_rental.renew_order_modal.renew_form.duration_field.day_unit_max_amount_error")}):this.setState({durationInputError:""}):(0,_.A)(s).lt(.5)?this.setState({durationInputError:i.Ay.get("energy_rental.renew_order_modal.renew_form.duration_field.hour_unit_min_amount_error")}):(0,_.A)(s).gt(720)?this.setState({durationInputError:i.Ay.get("energy_rental.renew_order_modal.renew_form.duration_field.hour_unit_max_amount_error")}):this.setState({durationInputError:""})}}}catch(o){console.log("error: onChangeDurationInput")}},this.onClickDurationInputUnitSwitch=e=>{const{energyAmountValue:t,energyAmountSwitch:n}=this.state;this.setState({durationIsDayUnitBoolean:e,durationInputValue:"",durationValueInSeconds:0,durationInputError:""}),this.props.energyRental.updateRenewOrderInfo((0,_.A)(t),0,n),this.durationInputRef.focus()},this.renderPrepaidInfoBox=(e,t)=>{const{lang:n,mobile:r}=this.state;return(0,p.jsxs)("div",{className:"rental-order-detail",children:[(0,p.jsxs)("div",{className:"detail-row",children:[(0,p.jsx)("div",{className:"row-title",children:i.Ay.get("energy_rental.form.prepayment_info.prepayment_title")}),(0,p.jsx)("div",{className:"row-value prepaid-row-value",children:(0,g.ZV)(e,2,{miniText:.01})}),(0,p.jsx)("div",{className:"row-suffix",children:"TRX"})]}),(0,p.jsxs)("div",{className:"detail-row",children:[(0,p.jsx)("div",{className:"row-title",children:r?(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)(v.L,{title:()=>(0,p.jsxs)("div",{children:[i.Ay.get("energy_rental.form.prepayment_info.security_deposit_hint"),(0,p.jsx)("span",{className:"four-pixel-placeholder"}),(0,p.jsx)("a",{href:(0,u.Wz)(n),target:"_blank",rel:"noreferrer",onClick:()=>{},className:"purple-link-btn hover",children:i.Ay.get("energy_rental.form.prepayment_info.rules_detail")})]}),placement:"topLeft",overlayClassName:"j-tooltip-dropdown energy-rental-tooltip",children:[(0,p.jsx)("div",{className:"title-part",children:i.Ay.get("energy_rental.form.prepayment_info.security_deposit_title_mobile_part_one")}),(0,p.jsx)("div",{className:"title-part",children:i.Ay.get("energy_rental.form.prepayment_info.security_deposit_title_mobile_part_two")})]})}):(0,p.jsxs)(p.Fragment,{children:[i.Ay.get("energy_rental.form.prepayment_info.security_deposit_title"),(0,p.jsx)(h.A,{title:()=>(0,p.jsxs)("div",{children:[i.Ay.get("energy_rental.form.prepayment_info.security_deposit_hint"),(0,p.jsx)("span",{className:"four-pixel-placeholder"}),(0,p.jsx)("a",{href:(0,u.Wz)(n),target:"_blank",rel:"noreferrer",onClick:()=>{},className:"purple-link-btn hover",children:i.Ay.get("energy_rental.form.prepayment_info.rules_detail")})]}),placement:"topLeft",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown energy-rental-tooltip refund-amount-tooltip",children:(0,p.jsx)("div",{className:"j-tooltip-icon"})})]})}),(0,p.jsx)("div",{className:"row-value prepaid-row-value",children:(0,g.ZV)(t,2,{miniText:.01})}),(0,p.jsx)("div",{className:"row-suffix",children:"TRX"})]})]})},this.confirmRenewOrder=()=>{if(0===this.props.network.isRightChain)return void this.props.network.changeChain();const{energyAmountSwitch:e,durationSwitch:t,energyAmountInputValue:n,energyAmountValue:r,durationInputValue:a,durationIsDayUnitBoolean:o,durationValueInSeconds:i,showBalanceError:s}=this.state;let{trxBalance:l,renewOrderPrepayment:d,renewOrderSafeValue:c}=this.props.energyRental;l=(0,_.A)(l).div(x.Ay.trxPrecision);const g=(0,_.A)(d).gt(l),u=(0,_.A)(d).plus(c).gt(l);s||!g&&!u?g||this.props.energyRental.setData({addOrderModalStep:3,isAddOrderModalApprovingTrans:!1,renewOrderShouldUseSavedInfo:!0,renewOrderSavedInfoEnergyAmountSwitch:e,renewOrderSavedInfoEnergyAmountInputValue:n,renewOrderSavedInfoEnergyAmountValue:r,renewOrderSavedInfoDurationSwitch:t,renewOrderSavedInfoDurationInputValue:a,renewOrderSavedInfoDurationIsDayUnitBoolean:o,renewOrderSavedInfoDurationValueInSeconds:i}):this.setState({showBalanceError:!0}),window.gtag("event","energyrent_pro_retx_popup_clickrenew",{event_category:"energyrent",event_label:"energyrent_pro_retx_popup_clickrenew"})},this.state={mobile:(0,s.A)(window.navigator).any,energyAmountSwitch:!0,durationSwitch:!1,energyAmountInputValue:"",energyAmountValue:x.Ay.energyRental.renewOrderDefaultEnergyValue,energyAmountInputDecimal:0,durationInputValue:"",durationInputDecimal:1,durationIsDayUnitBoolean:!0,durationValueInSeconds:0,energyAmountInputError:"",durationInputError:"",showBalanceError:!1},this.durationInputRef=null}render(){const{showBalanceError:e,energyAmountSwitch:t,durationSwitch:n,energyAmountInputValue:r,energyAmountValue:a,durationInputValue:o,durationIsDayUnitBoolean:s,durationValueInSeconds:l,energyAmountInputError:d,durationInputError:m}=this.state,{isConnected:y}=this.props.network;let{kink:h,marketData:v,trxBalance:f,renewOrderPrepayment:j,renewOrderSecurityDeposit:N,renewOrderExistingEnergyAmount:I,renewOrderExistingRemainingSeconds:R,renewOrderEnergyAmount:b,renewOrderDuration:S,renewOrderSafeValue:C}=this.props.energyRental;const E=(0,_.A)(R).eq(0);var O=!E&&t?a:(0,_.A)(0),V=I,k=R;O&&!(0,_.A)(O).isNaN()&&(V=(0,_.A)(O).plus(V)),l&&!(0,_.A)(l).isNaN()&&(k=(0,_.A)(l).plus(k)),f=(0,_.A)(f).div(x.Ay.trxPrecision);const D=(0,_.A)(j).gt(f),M=((0,_.A)(O).eq((0,_.A)(b))||((0,_.A)(O).isNaN()||(0,_.A)(O).eq(0))&&((0,_.A)(b).isNaN()||(0,_.A)(b).eq(0)))&&((0,_.A)(l).eq((0,_.A)(S))||((0,_.A)(l).isNaN()||(0,_.A)(l).eq(0))&&((0,_.A)(S).isNaN()||(0,_.A)(S).eq(0))),T=!E&&t&&(0,_.A)(a).eq(0)||n&&(0,_.A)(l).eq(0),B=(0,_.A)(O).eq(0)&&(0,_.A)(l).eq(0),Q=d&&!E||m||T||B,W=100*v.trx1wEnergy,F=v&&v.model&&v.model.find((e=>!0===e.current)),H=F?100*F.base:"--",L="--"!==H&&(0,_.A)(H).gte(h),P=e&&!Q&&(0,_.A)(j).plus(C).gt(f),Z=V&&V>0?(0,_.A)(V).idiv(x.Ay.estimatedEnergyPerTx):0;return(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:"input-section",children:[(0,p.jsxs)("div",{className:"field-title",children:[(0,p.jsxs)("div",{className:"title-text",children:[i.Ay.get("energy_rental.renew_order_modal.renew_form.amount_field.title"),(0,p.jsx)(w.A,{on:!E&&t,disabled:E,onClick:()=>{this.onToggleEnergyAmountSwitch()}})]}),(0,p.jsx)("div",{className:"available-amount-title",children:i.Ay.get("energy_rental.form.amount_field.available_trx_amount")}),(0,p.jsx)("div",{className:"available-amount-value",children:y&&(0,g.ZV)((0,_.A)(f),x.Ay.trxDecimal)}),(0,p.jsx)("div",{className:"available-amount-suffix",children:y?"TRX":"--"})]}),(0,p.jsxs)(A.A.Group,{compact:!0,className:c()("energy-amount-input-group",{"j-error-input-group":d},{"input-group-disabled":!t||E},{"input-group-always-disabled":E}),children:[(0,p.jsx)(A.A,{className:c()("j-input","energy-amount-input",{"enabled-input":!E&&t}),placeholder:E?i.Ay.get("energy_rental.renew_order_modal.renew_form.expired_hint"):t?(0,g.QA)(x.Ay.energyRental.renewOrderDefaultEnergyValue):i.Ay.get("energy_rental.renew_order_modal.renew_form.amount_field.placeholder"),value:(0,g.QA)(r),onChange:e=>this.onChangeEnergyAmountInput((0,g.DS)(e.target.value)),allowClear:!0,addonBefore:(0,p.jsx)("span",{className:"energy-logo"}),addonAfter:(0,p.jsx)(p.Fragment,{}),disabled:!t||E,onFocus:()=>{this.setState({showBalanceError:!0})}}),d&&(0,p.jsxs)("div",{className:"j-error-tip",children:[(0,p.jsx)("span",{className:"j-error-img"}),(0,p.jsx)("div",{className:"j-safe-text",children:d})]})]})]}),(0,p.jsxs)("div",{className:"input-section",children:[(0,p.jsx)("div",{className:"field-title",children:(0,p.jsxs)("div",{className:"title-text",children:[i.Ay.get("energy_rental.renew_order_modal.renew_form.duration_field.title"),(0,p.jsx)(w.A,{on:E||n,onClick:()=>{this.onToggleDurationSwitch()}})]})}),(0,p.jsxs)(A.A.Group,{compact:!0,className:c()("duration-input-group",{"j-error-input-group":m},{"input-group-disabled":!n&&!E}),children:[(0,p.jsx)(A.A,{className:"j-input duration-input",placeholder:i.Ay.get("energy_rental.renew_order_modal.renew_form.duration_field.placeholder"),value:(0,g.QA)(o),onChange:e=>this.onChangeDurationInput((0,g.DS)(e.target.value)),allowClear:!0,addonBefore:(0,p.jsx)("span",{className:"time-logo"}),addonAfter:(0,p.jsx)("div",{className:"switch-unit-button",onClick:()=>{(E||n)&&(this.onClickDurationInputUnitSwitch(!s),window.gtag("event","energyrent_pro_retx_popup_timeUnit",{event_category:"energyrent",event_label:"energyrent_pro_retx_popup_timeUnit"}))},children:!0===s?i.Ay.get("energy_rental.form.duration_field.day_unit"):i.Ay.get("energy_rental.form.duration_field.hour_unit")}),ref:e=>{this.durationInputRef=e},disabled:!n&&!E,onFocus:()=>{this.setState({showBalanceError:!0})}}),m&&(0,p.jsxs)("div",{className:"j-error-tip",children:[(0,p.jsx)("span",{className:"j-error-img"}),(0,p.jsx)("div",{className:"j-safe-text",children:m})]})]})]}),(0,p.jsxs)("div",{className:"input-section",children:[(0,p.jsx)("div",{className:"field-title",children:(0,p.jsx)("div",{className:"title-text",children:i.Ay.get("energy_rental.renew_order_modal.renew_form.after_renewal_info.title")})}),(0,p.jsxs)("div",{className:"after-renew-detail",children:[(0,p.jsxs)("div",{className:"detail-row energy-icon-prefix",children:[(0,p.jsxs)("span",{className:"row-title",children:[i.Ay.get("energy_rental.renew_order_modal.renew_form.after_renewal_info.energy_title")," "+i.Ay.get("energy_rental.dash")+" ",(0,g.ZV)(V,0)]}),(0,p.jsxs)("span",{className:"row-value",children:[" "+i.Ay.get("energy_rental.tilde")+" ",i.Ay.get(Z>1?"energy_rental.form.amount_field.estimated_transaction_count_hint_plural":"energy_rental.form.amount_field.estimated_transaction_count_hint",{value:Z})]})]}),(0,p.jsxs)("div",{className:"duration-box "+((0,_.A)(k).lt(86400)?"warning":""),children:[(0,p.jsxs)("div",{className:"detail-row duration-icon-prefix",children:[(0,p.jsxs)("span",{className:"row-title",children:[i.Ay.get("energy_rental.renew_order_modal.renew_form.after_renewal_info.duration_title")," "+i.Ay.get("energy_rental.dash")+" ",(0,_.A)(k).gt(60)?(0,u.fj)(k):(0,_.A)(k).eq(0)?i.Ay.get("energy_rental.mini_list.rental_time_expired"):(0,_.A)(k).gt(0)&&(0,_.A)(k).lte(60)?i.Ay.get("energy_rental.mini_list.rental_time_expire_soon"):"--"]}),(0,_.A)(k).gt(60)&&(0,p.jsxs)("span",{className:"row-value",children:[" "+i.Ay.get("energy_rental.tilde")+" ",(0,u.Sm)(k)]})]}),(0,_.A)(k).lt(86400)&&(0,p.jsx)("div",{className:"detail-row",children:(0,p.jsxs)("div",{className:"pretty-short-warning",children:[(0,p.jsxs)("svg",{width:"12",height:"13",viewBox:"0 0 12 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,p.jsx)("circle",{cx:"6",cy:"6.5",r:"5.5",stroke:"#F58721"}),(0,p.jsx)("path",{fill:"#F58721",d:"M6.76368 8.95452C6.76368 9.25577 6.51947 9.49998 6.21823 9.49998H6.00004C5.6988 9.49998 5.45459 9.25577 5.45459 8.95452C5.45459 8.65328 5.6988 8.40907 6.00004 8.40907H6.21823C6.51947 8.40907 6.76368 8.65328 6.76368 8.95452ZM6.10914 7.59089C5.74764 7.59089 5.45459 7.29784 5.45459 6.93634V4.42725C5.45459 4.06575 5.74764 3.77271 6.10914 3.77271C6.47063 3.77271 6.76368 4.06576 6.76368 4.42725V6.93634C6.76368 7.29784 6.47063 7.59089 6.10914 7.59089Z"})]}),(0,p.jsx)("span",{className:"ml-8",children:i.Ay.get("s9.duration_lt_24h_for_modal")})]})})]})]})]}),this.renderPrepaidInfoBox(j,N),L&&(0,p.jsx)("div",{className:"high-rental-price-hint",children:i.Ay.get("energy_rental.form.hints.hign_rental_price",{value:(0,g.ZV)(W,0,{miniText:"0.001"})})}),P&&(0,p.jsx)("div",{className:"safe-max-hint",children:i.Ay.get("energy_rental.form.hints.safe_max_hints",{value:(0,g.ZV)(C,2)})}),D&&e?(0,p.jsx)("button",{className:c()("action-btn confirm-btn single-action-btn",{"have-hint-above":P||L}),disabled:!0,children:i.Ay.get("energy_rental.form.action_btn.insufficient_trx")}):(0,p.jsx)("button",{className:c()("action-btn confirm-btn single-action-btn",{"have-hint-above":P||L}),disabled:!M||(0,_.A)(j).isNaN()||Q,onClick:()=>{this.confirmRenewOrder(),this.props.energyRental.isNeedShowDealTip()&&this.props.energyRental.setData({dealNoteShow:!0})},children:M&&!(0,_.A)(j).isNaN()||Q?i.Ay.get("energy_rental.renew_order_modal.renew_form.renew_action_btn"):(0,p.jsx)("span",{className:"siging-icon"})})]})}})||y)||y)||y;var j;const N=(0,o.WQ)("lend")(j=(0,o.WQ)("network")(j=(0,o.WQ)("system")(j=(0,o.WQ)("pool")(j=(0,o.WQ)("energyRental")(j=(0,o.PA)(j=class extends a.Component{constructor(){super(),this.componentDidMount=()=>{let{addOrderModalIsRenew:e}=this.props.energyRental;e?window.gtag("event","energyrent_pro_retx_confirmpop",{event_category:"energyrent",event_label:"energyrent_pro_retx_confirmpop"}):window.gtag("event","energyrent_pro_tx_confirmpop",{event_category:"energyrent",event_label:"energyrent_pro_tx_confirmpop"})},this.confirmAddOrder=async()=>{let{submittedNewOrderTrxAmount:e,submittedNewOrderPrepayment:t,submittedNewOrderReceiver:n}=this.props.energyRental;if(0!==this.props.network.isRightChain){this.props.system.clearRejectError(),this.props.energyRental.setData({isAddOrderModalApprovingTrans:!0});try{this.props.newOrderSubmittedCallback();await this.props.system.rentResourceWithLoadingFlag(n,(0,g.gH)(e).times(x.Ay.trxPrecision)._toFixed(0,1),1,new g.gH(t).times(x.Ay.trxPrecision)._toFixed(0,1),{})&&setTimeout((()=>{this.props.energyRental.getUserTrxBalance(),this.props.energyRental.getCommonRentInfos(),this.props.energyRental.getMiniOrderList(),this.props.energyRental.getStrxRentAllOrderList({})}),5e3)}catch(r){console.log("error: confirmAddOrder")}}else this.props.network.changeChain()},this.confirmRenewOrder=async()=>{let{renewOrderTrxAmount:e,renewOrderPrepayment:t,renewOrderReceiver:n}=this.props.energyRental;if(0!==this.props.network.isRightChain){this.props.system.clearRejectError(),this.props.energyRental.setData({isAddOrderModalApprovingTrans:!0});try{await this.props.system.rentResourceWithLoadingFlag(n,(0,g.gH)(e).times(x.Ay.trxPrecision)._toFixed(0,1),1,new g.gH(t).times(x.Ay.trxPrecision)._toFixed(0,1),{})&&(this.props.energyRental.getMiniOrderList(),setTimeout((()=>{this.props.energyRental.getUserTrxBalance(),this.props.energyRental.getCommonRentInfos(),this.props.energyRental.getMiniOrderList(),this.props.energyRental.getStrxRentAllOrderList({})}),3e3))}catch(r){console.log("error: confirmRenewOrder")}}else this.props.network.changeChain()}}render(){const{defaultAccount:e}=this.props.network,{transModalInfo:t}=this.props.system,{step:n,txId:r}=t;let{isAddOrderModalApprovingTrans:a,addOrderModalIsRenew:o,submittedNewOrderEnergyAmount:s,submittedNewOrderTrxAmount:l,submittedNewOrderDuration:d,submittedNewOrderPrepayment:m,submittedNewOrderReceiver:y,renewOrderEnergyAmount:_,renewOrderTrxAmount:A,renewOrderDuration:w,renewOrderPrepayment:v,renewOrderReceiver:f}=this.props.energyRental;var j,N,I,R,b;o?(j=_,N=A,I=w,R=v,b=f):(j=s,N=l,I=d,R=m,b=y);var S=82===n&&(0,u.as)(I)&&!o;return(0,p.jsxs)("div",{className:"confirm-detail",children:[(0,p.jsx)("div",{className:c()("content-icon",{"loading-icon":8===n},{"succeed-icon":82===n},{"failed-icon":9===n||83===n})}),(0,p.jsxs)("div",{className:c()("content-title",{"light-weight":1===n||3===n}),children:[(1===n||3===n)&&i.Ay.get("energy_rental.add_order_modal.prepayment_title"),8===n&&i.Ay.get("energy_rental.transaction.submitted_to_chain_msg"),!o&&82===n&&i.Ay.get("energy_rental.add_order_modal.energy_sent_hint"),o&&82===n&&i.Ay.get("energy_rental.renew_order_modal.transaction_completed.renewal_completed_msg"),(9===n||83===n)&&i.Ay.get("energy_rental.transaction.transaction_failed_pls_request_again")]}),(1===n||3===n)&&(0,p.jsxs)("div",{className:"prepayment-value",children:[(0,g.ZV)(R,x.Ay.trxDecimal)," TRX"]}),(9===n||82===n||83===n)&&(0,g.dB)(i.Ay.get("energy_rental.transaction.view_on_tronscan"),r,!0,this.props.energyRental.addOrderModalIsRenew),!(8===n||9===n||83===n)&&(0,p.jsxs)("div",{className:"rental-order-detail",children:[(0,g.gH)(j).gt(0)&&(0,p.jsxs)("div",{className:"detail-row",children:[(0,p.jsx)("div",{className:"row-title",children:o?i.Ay.get("energy_rental.renew_order_modal.renew_form.amount_field.confirm_title"):i.Ay.get("energy_rental.add_order_modal.energy_amount_title")}),(0,p.jsxs)("div",{className:"row-value",children:[i.Ay.get("energy_rental.double_tilde")," ",(0,g.ZV)(j,0)," ",i.Ay.get("energy_rental.add_order_modal.energy_amount_suffix"),(0,p.jsx)(h.A,{title:()=>i.Ay.getHTML("energy_rental.mini_list.energy_amount_hint",{value:(0,g.ZV)((0,g.gH)(N),0)}),placement:"topRight",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown energy-rental-tooltip",onMouseEnter:()=>{window.gtag("event","energyrent_pro_tx_confirmpop_hoverenergy",{event_category:"energyrent",event_label:"energyrent_pro_tx_confirmpop_hoverenergy"})},children:(0,p.jsx)("div",{className:"j-tooltip-icon"})})]})]}),(0,g.gH)(I).gt(0)&&(0,p.jsxs)("div",{className:"detail-row",children:[(0,p.jsx)("div",{className:"row-title",children:o?i.Ay.get("energy_rental.renew_order_modal.renew_form.duration_field.confirm_title"):i.Ay.get("energy_rental.add_order_modal.duration_title")}),(0,p.jsxs)("div",{className:"row-value",children:[i.Ay.get("energy_rental.double_tilde")," ",(0,u.fj)(I),(0,p.jsx)(h.A,{title:()=>i.Ay.getHTML("energy_rental.mini_list.rental_time_hint"),placement:"bottomRight",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown energy-rental-tooltip",onMouseEnter:()=>{window.gtag("event","energyrent_pro_tx_confirmpop_hovertime",{event_category:"energyrent",event_label:"energyrent_pro_tx_confirmpop_hovertime"})},children:(0,p.jsx)("div",{className:"j-tooltip-icon"})})]})]}),!o&&(0,p.jsxs)("div",{className:"detail-row",children:[(0,p.jsx)("div",{className:"row-title",children:i.Ay.get("energy_rental.add_order_modal.address_title")}),y==e?(0,p.jsxs)("div",{className:"row-value address-row-value",children:[(0,u.L$)(b,"inline-address")," ",i.Ay.get("energy_rental.open_bracket"),i.Ay.get("energy_rental.add_order_modal.current_address"),i.Ay.get("energy_rental.close_bracket")]}):(0,u.L$)(b,"row-value address-row-value")]})]}),S&&(0,p.jsx)("div",{className:"short-rental-hint",children:i.Ay.get("energy_rental.form.hints.short_rental_period")}),(1===n||3===n||5===n||4===n)&&(a&&3!==n?(0,p.jsxs)("button",{className:"action-btn single-action-btn confirm-btn is-signing",children:[i.Ay.get("energy_rental.transaction.sign_in_your_wallet_msg"),(0,p.jsx)("span",{className:"siging-icon"})]}):(0,p.jsx)("button",{className:"action-btn single-action-btn confirm-btn",onClick:()=>{o?(this.confirmRenewOrder(),window.gtag("event","energyrent_pro_retx_confirmpop_confirm",{event_category:"energyrent",event_label:"energyrent_pro_retx_confirmpop_confirm"})):(this.confirmAddOrder(),window.gtag("event","energyrent_pro_tx_confirmpop_clickconfirm",{event_category:"energyrent",event_label:"energyrent_pro_tx_confirmpop_clickconfirm"}))},children:i.Ay.get("energy_rental.transaction.confirm_btn")})),(8===n||9===n||82===n||83===n)&&(0,p.jsx)("button",{className:c()("action-btn","single-action-btn","close-btn",{"have-hint-above":S},{"extra-top-margin":8===n||9===n||83===n}),onClick:()=>{this.props.closeModal()},children:i.Ay.get("energy_rental.transaction.close_btn")}),3===n&&(0,p.jsxs)("div",{className:"j-error-tip wallet-reject",children:[(0,p.jsx)("span",{className:"j-error-img"}),(0,p.jsx)("div",{children:i.Ay.get("energy_rental.transaction.wallet_rejected")})]})]})}})||j)||j)||j)||j)||j)||j;var I;const R=(0,o.WQ)("lend")(I=(0,o.WQ)("system")(I=(0,o.WQ)("pool")(I=(0,o.WQ)("energyRental")(I=(0,o.WQ)("network")(I=(0,o.PA)(I=class extends a.Component{constructor(){super(),this.close=()=>{this.props.system.clearRejectError(),this.props.energyRental.setData({addOrderModalVisible:!1,addOrderModalIsRenew:!1}),this.props.energyRental.resetExistingOrderInfo(),this.props.energyRental.resetRenewOrderInfo();const{transModalInfo:e}=this.props.system,{step:t}=e;let{addOrderModalIsRenew:n}=this.props.energyRental;8===t&&(n?window.gtag("event","energyrent_pro_retx_confirmingpop_click",{event_category:"energyrent",event_label:"energyrent_pro_retx_confirmingpop_click"}):window.gtag("event","energyrent_pro_tx_confirmingpop_close",{event_category:"energyrent",event_label:"energyrent_pro_tx_confirmingpop_close"})),82===t&&(n?window.gtag("event","energyrent_pro_retx_successpop",{event_category:"energyrent",event_label:"energyrent_pro_retx_successpop"}):window.gtag("event","energyrent_pro_tx_successpop",{event_category:"energyrent",event_label:"energyrent_pro_tx_successpop"}));const{addOrderModalStep:r,renewOrderExistingRemainingSeconds:a}=this.props.energyRental;"2"==r&&window.gtag("event","energyrent_pro_retx_popup",{event_category:"energyrent",event_label:(0,g.gH)(a).eq(0)?"Expired":"Unexpired"})},this.state={mobile:(0,s.A)(window.navigator).any}}render(){const{mobile:e}=this.state,{theme:t}=this.props.lend,{addOrderModalVisible:n,addOrderModalStep:r,renewOrderReceiver:a,addOrderModalIsRenew:o}=this.props.energyRental,{transModalInfo:s}=this.props.system,{defaultAccount:d}=this.props.network,{step:u}=s;var y="";return"1"==r?y=i.Ay.get("energy_rental.renew_order_modal.existing_order_hint.modal_title"):"2"==r?y=i.Ay.get("energy_rental.renew_order_modal.renew_form.modal_title"):"3"==r&&(y=i.Ay.get("energy_rental.add_order_modal.modal_title"),8===u?(y=i.Ay.get("energy_rental.transaction.transaction_confirming"),o?window.gtag("event","energyrent_pro_retx_confirmingpop",{event_category:"energyrent",event_label:"energyrent_pro_retx_confirmingpop"}):window.gtag("event","energyrent_pro_tx_confirmingpop",{event_category:"energyrent",event_label:"energyrent_pro_tx_confirmingpop"})):82===u?y=i.Ay.get("energy_rental.transaction.transaction_completed"):9!==u&&83!==u||(y=i.Ay.get("energy_rental.transaction.transaction_failed"))),(0,p.jsx)(l.A,{title:(0,p.jsxs)("div",{className:c()("modal-title-container",{"have-subtitle":2==r}),children:[(0,p.jsx)("div",{className:"modal-title",children:y}),2==r&&(0,p.jsxs)("div",{className:"modal-subtitle",children:[(0,g.it)(a,6,6),a==d&&(0,p.jsxs)("span",{children:[i.Ay.get("energy_rental.open_bracket"),i.Ay.get("energy_rental.add_order_modal.current_address"),i.Ay.get("energy_rental.close_bracket")]})]}),3==r&&o&&(1===u||3===u)&&(0,p.jsx)("button",{className:"back-btn",onClick:()=>{this.props.energyRental.setData({addOrderModalStep:2}),window.gtag("event","energyrent_pro_retx_confirmpop_back",{event_category:"energyrent",event_label:"energyrent_pro_retx_confirmpop_back"})}})]}),visible:n,closable:!0,destroyOnClose:!0,icon:null,onCancel:()=>this.close(),footer:null,width:e?"calc(100% - 40px)":400,centered:!0,className:`j-modal header-border ${t} add-order-modal`,getContainer:()=>document.querySelector(".modal-appender"),children:(0,p.jsxs)("div",{className:c()("add-order-modal-content",{"existing-order-hint":1==r},{"renew-form":2==r},{"confirm-detail":3==r}),children:["1"==r&&(0,p.jsx)(m,{closeModal:this.close}),"2"==r&&(0,p.jsx)(f,{closeModal:this.close}),"3"==r&&(0,p.jsx)(N,{closeModal:this.close,newOrderSubmittedCallback:this.props.newOrderSubmittedCallback})]})})}})||I)||I)||I)||I)||I)||I},70705:(e,t,n)=>{n.d(t,{A:()=>u});var r,a=n(76998),o=n(98859),i=n(96843),s=n(59866),l=n(48634),d=n(33270),c=n(75659),g=n(23446);const u=(0,o.WQ)("network")(r=(0,o.WQ)("lend")(r=(0,o.WQ)("system")(r=(0,o.WQ)("pool")(r=(0,o.WQ)("energyRental")(r=(0,o.PA)(r=class extends a.Component{constructor(){super(),this.componentDidMount=async()=>{const{endOrderModalInfo:e}=this.props.energyRental;e.renter&&"--"!==e.renter&&this.props.energyRental.getReturnRentInfo(e.renter,e.receiver),window.gtag("event","energyrent_pro_endtx_confirmpop",{event_category:"energyrent",event_label:"energyrent_pro_endtx_confirmpop"})},this.close=()=>{this.props.energyRental.setData({endOrderModalVisible:!1}),window.gtag("event","click",{event_category:"energyrent",event_label:"energyrent_pro_endtx_confirmingpop_close"})},this.returnResource=async()=>{try{if(window.gtag("event","click",{event_category:"energyrent",event_label:"energyrent_pro_endtx_confirmpop_confirm"}),0===this.props.network.isRightChain)return void this.props.network.changeChain();this.props.system.clearRejectError();const{defaultAccount:e}=this.props.network,{endOrderModalVisible:t,securityDeposit:n,returnResourceEnergy:r,endOrderModalInfo:a,returnRentInfo:o,marketData:i,endOrderType:s}=this.props.energyRental;let l=a.receiver===e?(0,d.gH)(o.unrecoveredEnergyAmount).plus(1e4):o.unrecoveredEnergyAmount,g=a.delegateTrxAmount,u=(0,d.gH)(o.dailyRent).times((0,d.gH)(l).div(o.rentAmount)).times(.5),p=(0,d.gH)(o.rentRemain).plus(o.securityDeposit).minus(u);const{energyFee:m,getEnergyFee:y}=this.props.energyRental,_={title:"v2.transaction_confirm",title2:"deposit.transactionsent",title3:"v2.transaction_confirm_fail",title4:"deposit.confirm_transaction",obj:{value:(0,d.ZV)(p,6,{miniText:"0.000001"}),token:"TRX"},transType:"returnResourceNew"};let h=c.Ay.feeLimitForReturnResourceDefault;const A=await this.props.system.getReturnRentFeeLimit("receiver"===s?a.renter:a.receiver,(0,d.gH)(g).times(c.Ay.trxPrecision)._toFixed(0,1),1,s);let w=m||await y();if(!(0,d.gH)(w).isNaN()&&!(0,d.gH)(A).isNaN()){h=(0,d.gH)((0,d.gH)(A).times(w).div(1e6)._toFixed(0,1)).plus(5).times(c.Ay.trxPrecision).toNumber()}this.setState({approving:!0}),window.gtag("event","energyrent_pro_endtx_confirmingpop",{event_category:"energyrent",event_label:"energyrent_pro_endtx_confirmingpop"});await this.props.system.returnResource("receiver"===s?a.renter:a.receiver,(0,d.gH)(g).times(c.Ay.trxPrecision)._toFixed(0,1),1,(0,d.gH)(h),_,s)&&(this.close(),setTimeout((()=>{this.props.energyRental.getUserTrxBalance(),this.props.energyRental.getCommonRentInfos(),this.props.energyRental.getMultiReward(),this.props.energyRental.getUserData(),this.props.energyRental.getMiniOrderList(),this.props.energyRental.getStrxRentAllOrderList({})}),5e3)),this.setState({approving:!1})}catch(e){console.log("error: returnSource")}},this.state={lang:window.localStorage.getItem("lang")||i.Ay.options.currentLocale,approving:!1,mobile:(0,s.A)(window.navigator).any}}render(){const{transModalInfo:e}=this.props.system,{transType:t,declined:n}=e,{theme:r}=this.props.lend,{endOrderModalVisible:a,securityDeposit:o,returnResourceEnergy:s,endOrderModalInfo:c,returnRentInfo:u}=this.props.energyRental,{canRentSeconds:p,delegateTrxAmount:m,energyAmount:y,receiver:_,renter:h,startTimestamp:A}=c,{approving:w,lang:x,mobile:v}=this.state,{defaultAccount:f}=this.props.network;let j=c.receiver===f?(0,d.gH)(u.unrecoveredEnergyAmount).plus(1e4):u.unrecoveredEnergyAmount,N=(0,d.gH)(u.dailyRent).times((0,d.gH)(j).div(u.rentAmount)).times(.5),I=(0,d.gH)(u.rentRemain).plus(u.securityDeposit);return N=(0,d.gH)(N).gt(I)?I:N,(0,g.jsx)(l.A,{title:i.Ay.get("energy_rental.end_order_modal.modal_title"),visible:a,closable:!0,icon:null,onCancel:()=>this.close(),footer:null,width:v?"calc(100% - 40px)":400,centered:!0,className:`j-modal header-border end-rent-modal ${r} `,getContainer:()=>document.querySelector(".j-wrapper"),children:(0,g.jsxs)("div",{className:"end-order-modal",children:[(0,g.jsx)("div",{className:"end-order-icon "+r}),(0,g.jsx)("div",{className:"content-title",onMouseEnter:()=>{window.gtag("event","energyrent_pro_endtx_confirmpop_hover",{event_category:"energyrent",event_label:"energyrent_pro_endtx_confirmpop_hover"})},children:i.Ay.get("energy_rental.end_order_modal.refund_amount")}),(0,g.jsx)("div",{className:"refund-amount-info",children:(0,g.jsxs)("div",{className:"amount-value",children:[(0,g.jsxs)("div",{className:"refund-detail-tooltip",children:[(0,g.jsxs)("div",{className:"detail-row",children:[(0,g.jsx)("div",{className:"row-title",children:i.Ay.get("energy_rental.end_order_modal.remaining_rent")}),(0,g.jsxs)("div",{className:"row-value",children:[(0,d.ZV)(u.rentRemain,6)," TRX"]})]}),(0,g.jsxs)("div",{className:"detail-row",children:[(0,g.jsx)("div",{className:"row-title",children:i.Ay.get("energy_rental.end_order_modal.security_deposit")}),(0,g.jsxs)("div",{className:"row-value",children:[(0,d.ZV)(u.securityDeposit,6)," TRX"]})]}),(0,g.jsxs)("div",{className:"detail-row",children:[(0,g.jsxs)("div",{className:"row-title",children:[(0,g.jsx)("div",{children:i.Ay.get("energy_rental.end_order_modal.deducted_unrecovered_energy_hint")}),(0,g.jsx)("div",{children:i.Ay.get("energy_rental.end_order_modal.deducted_unrecovered_energy_detail",{value:(0,d.ZV)(j,0)})})]}),(0,g.jsxs)("div",{className:"row-value",children:["- ",(0,d.ZV)(N,6)," TRX"]})]}),(0,g.jsx)("div",{className:"detail-row",children:(0,g.jsxs)("div",{className:"row-title energy-light",children:[(0,g.jsx)("em",{className:""}),i.Ay.get("energy_rental.estimate_refund")]})})]}),(0,d.ZV)((0,d.gH)(u.rentRemain).plus(u.securityDeposit).minus(N),6)," ","TRX"]})}),(0,g.jsxs)("div",{className:"rental-order-detail",children:[(0,g.jsx)("div",{className:"row-title",children:i.Ay.get("energy_rental.end_order_modal.rent_energy_amount")}),(0,g.jsxs)("div",{className:"row-value",children:[(0,d.ZV)(u.rentAmount,0)," ",i.Ay.get("energy_rental.add_order_modal.energy_amount_suffix")]})]}),w?(0,g.jsxs)("button",{className:"j-large-btn j-supply rent-now end-btn j-signing",disabled:!0,children:[i.Ay.get("energy_rental.transaction.sign_in_your_wallet_msg"),(0,g.jsx)("span",{className:"siging-icon"})]}):(0,g.jsx)("button",{className:"j-large-btn j-supply rent-now end-btn",onClick:()=>{this.returnResource()},children:i.Ay.get("energy_rental.transaction.confirm_btn")}),n&&"returnResourceNew"===t&&(0,g.jsxs)("div",{className:"j-error-tip wallet-reject",children:[(0,g.jsx)("span",{className:"j-error-img"}),(0,g.jsx)("div",{children:i.Ay.get("energy_rental.transaction.wallet_rejected")})]})]})})}})||r)||r)||r)||r)||r)||r}}]);